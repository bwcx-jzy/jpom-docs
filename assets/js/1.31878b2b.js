(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{282:function(s,a,t){},321:function(s,a,t){},325:function(s,a,t){},329:function(s,a,t){"use strict";t(282)},374:function(s,a,t){"use strict";t(321)},378:function(s,a,t){"use strict";t(325)},381:function(s,a,t){"use strict";t.r(a);t(124),t(43),t(4),t(21),t(19);var e,r,n,v,l,_,i,o=!1,p=[];"undefined"!=typeof document&&(v=function(s){return o||"interactive"===document.readyState||"complete"===document.readyState?s.call(document):p.push((function(){return s.call(this)})),this},_=function(){for(var s=0,a=p.length;s<a;s++)p[s].apply(document);p=[]},i=function(){o||(o=!0,_.call(window),document.removeEventListener?document.removeEventListener("DOMContentLoaded",i,!1):document.attachEvent&&(document.detachEvent("onreadystatechange",i),window==window.top&&(clearInterval(l),l=null)))},document.addEventListener?document.addEventListener("DOMContentLoaded",i,!1):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){/loaded|complete/.test(document.readyState)&&i()})),window==window.top&&(l=setInterval((function(){try{o||document.documentElement.doScroll("left")}catch(s){return}i()}),5)))),e={fetch:function(s,a){var t="BusuanziCallback_"+Math.floor(1099511627776*Math.random());s=s.replace("=BusuanziCallback","="+t),(n=document.createElement("SCRIPT")).type="text/javascript",n.defer=!0,n.src=s,document.getElementsByTagName("HEAD")[0].appendChild(n),window[t]=this.evalCall(a)},evalCall:function(s){return function(a){v((function(){try{s(a),n&&n.parentElement&&n.parentElement.removeChild&&n.parentElement.removeChild(n)}catch(s){console.log(s),r.hides()}}))}}},r={bszs:["site_pv","page_pv","site_uv"],texts:function(s){this.bszs.map((function(a){var t=document.getElementById("busuanzi_value_"+a);t&&(t.innerHTML=function(s,a="-"){return function(s,a,t,e="-"){if(null==s||""===s)return e;let r=0;const n=parseFloat(s);if(n<=0)return e;r=Math.floor(Math.log(n)/Math.log(a));let v=n/Math.pow(a,r);return v=Number(v.toFixed(2)),v+t[r]}(s,1e3,["B","K","M","G","T","P","E","Z","Y"],a)}(s[a]))}))},hides:function(){this.bszs.map((function(s){var a=document.getElementById("busuanzi_container_"+s);a&&(a.style.display="none")}))},shows:function(){this.bszs.map((function(s){var a=document.getElementById("busuanzi_container_"+s);a&&(a.style.display="inline")}))}};var c=()=>{r&&r.hides(),e.fetch("//busuanzi.ibruce.info/busuanzi?jsonpCallback=BusuanziCallback",(function(s){r.texts(s),r.shows()}))};const u=[{className:"page-view",id:"busuanzi_value_page_pv",title:"本文浏览量"}];var b={mounted(){"/"!=this.$route.path?this.initPageInfo():this.getPageViewCouter(),setTimeout(()=>{this.addExpand(40)},1e3),function(){var s=document.createElement("script");s.src="https://hm.baidu.com/hm.js?1acbde0eb1cc4225dcfe6d1143767a3d";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(s,a)}(),function(){var s=document.createElement("script");s.type="text/javascript",s.async=!0,s.crossorigin="anonymous",s.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8458956478992681";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(s,a)}(),function(){var s=document.createElement("script");s.type="text/javascript",s.async=!0,s.src="https://www.googletagmanager.com/gtag/js?id=G-FYSG66S4HQ";var a=document.getElementsByTagName("script")[0];function t(){dataLayer.push(arguments)}a.parentNode.insertBefore(s,a),window.dataLayer=window.dataLayer||[],t("js",new Date),t("config","G-FYSG66S4HQ")}()},watch:{$route(s,a){"/"!==s.path&&s.path!==a.path&&this.$themeConfig.blogInfo&&this.initPageInfo(),s.path==a.path&&""!=this.$route.hash||setTimeout(()=>{this.addExpand(40)},1e3)}},methods:{initPageInfo(){if(null==this.$frontmatter.article||this.$frontmatter.article){const{eachFileWords:s,pageView:a,pageIteration:t,readingTime:e}=this.$themeConfig.blogInfo;if(s)try{s.forEach(s=>{if(s.permalink==this.$frontmatter.permalink)throw this.addPageWordsCount(s.wordsCount),(e||null==e)&&this.addReadTimeCount(s.readingTime),new Error})}catch(s){}(a||null==a)&&(this.addPageView(),this.getPageViewCouter(t))}else;},getPageViewCouter(s=3e3){c();let a=0;setTimeout(()=>{let t=document.querySelectorAll(".view-data");if(t){let e=t[0];if(e&&""==e.innerText){let r=setInterval(()=>{e&&""==e.innerText?(a+=s,a>5*s&&(t.forEach(s=>{s.innerText="9999"}),clearInterval(r)),""==e.innerText?c():clearInterval(r)):clearInterval(r)},s);this.$once("hook:beforeDestroy",()=>{clearInterval(r),r=null})}}},s)},addPageView(){u.forEach(s=>{let a=document.querySelector("."+s.className);if(a)a.innerHTML='<a style="color: #888; margin-left: 3px" href="javascript:;" id="'+s.id+'" class="view-data"><i title="正在获取..." class="loading iconfont icon-loading"></i></a>';else{let a=document.createElement("div");a.title=s.title,a.className=s.className+" iconfont icon-view",a.style.float="left",a.style.marginLeft="20px",a.style.fontSize="0.8rem",a.innerHTML='<a style="color: #888; margin-left: 3px" href="javascript:;" id="'+s.id+'" class="view-data"><i title="正在获取..." class="loading iconfont icon-loading"></i></a>';let t=document.createElement("style");t.innerHTML="@keyframes turn {\n        0% {\n          transform: rotate(0deg);\n        }\n        100% {\n          transform: rotate(360deg);\n        }\n      }\n      .loading {\n        display: inline-block;\n        animation: turn 1s linear infinite;\n        -webkit-animation: turn 1s linear infinite;\n      }",document.head.appendChild(t),this.mountedView(a)}})},addPageWordsCount(s=0){let a=document.querySelector(".book-words");if(a)a.innerHTML=`<a href="javascript:;" style="margin-left: 3px; color: #888">${s}</a>`;else{let a=document.createElement("div");a.title="文章字数",a.className="book-words iconfont icon-book",a.style.float="left",a.style.marginLeft="20px",a.style.fontSize="0.8rem",a.innerHTML=`<a href="javascript:;" style="margin-left: 3px; color: #888">${s}</a>`,this.mountedView(a)}},addReadTimeCount(s=0){let a=document.querySelector(".reading-time");if(a)a.innerHTML=`<a href="javascript:;" style="margin-left: 3px; color: #888">${s}</a>`;else{let a=document.createElement("div");a.title="预阅读时长",a.className="reading-time iconfont icon-shijian",a.style.float="left",a.style.marginLeft="20px",a.style.fontSize="0.8rem",a.innerHTML=`<a href="javascript:;" style="margin-left: 3px; color: #888">${s}</a>`,this.mountedView(a)}},mountedView(s,a=100,t=".articleInfo-wrap > .articleInfo > .info"){let e=document.querySelector(t);if(e)this.isMountedView(s,e)||e.appendChild(s);else{let r=setInterval(()=>{e=document.querySelector(t),e&&(this.isMountedView(s,e)||(e.appendChild(s),clearInterval(r)))},a);this.$once("hook:beforeDestroy",()=>{clearInterval(r),r=null})}},removeElement(s){var a=document.querySelector(s);a&&a.parentNode.removeChild(a)},isMountedView:(s,a)=>s.parentNode==a,addExpand(s=40){let a=document.getElementsByClassName("line-numbers-mode");Array.from(a).forEach(a=>{if(!a.getElementsByClassName("expand")[0]){let t=a.offsetHeight;0==t&&"cardImgListContainer"!=a.parentNode.className&&(t=this.getHiddenElementHight(a)),t-=12,a.style.height=t+"px";let e=a.getElementsByTagName("pre")[0],r=a.getElementsByClassName("line-numbers-wrapper")[0];const n=document.createElement("div");n.className="expand icon-xiangxiajiantou iconfont",n.onclick=()=>{parseInt(a.style.height)==s?(n.className="expand icon-xiangxiajiantou iconfont",a.style.height=t+"px",setTimeout(()=>{e.style.display="block",r.style.display="block"},80)):(n.className="expand icon-xiangxiajiantou iconfont closed",a.style.height=s+"px",setTimeout(()=>{e.style.display="none",r.style.display="none"},300))},a.append(n),a.append(this.addCircle())}this.getLanguage(a);let t=!1,e=setInterval(()=>{t=this.moveCopyBlock(a),t&&clearInterval(e)},1e3)})},getHiddenElementHight(s){let a;return"none"!=s.parentNode.style.display&&"theme-code-block theme-code-block__active"==s.parentNode.className||(s.parentNode.style.display="block",a=s.offsetHeight,s.parentNode.style.display="none","theme-code-block"!=s.parentNode.className&&"cardListContainer"!=s.parentNode.className||(s.parentNode.style.display="")),a},addCircle(){let s=document.createElement("div");return s.className="circle",s},moveCopyBlock(s){let a=s.getElementsByClassName("code-copy")[0];return!(!a||a.parentNode==s)&&(a.parentNode.parentNode.insertBefore(a,a.parentNode),!0)},getLanguage(s){let a=getComputedStyle(s,":before").getPropertyValue("content");if(2==a.length||""==a||"none"==a){let a=s.className.substring("language".length+1,s.className.indexOf(" "));s.setAttribute("data-language",a)}}},beforeMount(){u.forEach(s=>{this.removeElement("."+s.className)}),this.removeElement(".book-words"),this.removeElement(".reading-time")}},d=(t(378),t(7)),m=Object(d.a)(b,(function(){return(0,this._self._c)("div")}),[],!1,null,null,null);a.default=m.exports},382:function(s,a,t){"use strict";t.r(a);const e=["这里什么都没有。","我是谁？我在哪？","这是一个Four-Oh-Four.","看来我们的链接坏掉了~"];var r={methods:{getMsg:()=>e[Math.floor(Math.random()*e.length)]}},n=(t(329),t(7)),v=Object(n.a)(r,(function(){var s=this._self._c;return s("div",{staticClass:"theme-container"},[s("div",{staticClass:"theme-vdoing-content"},[s("span",[this._v("404")]),this._v(" "),s("blockquote",[this._v(this._s(this.getMsg()))]),this._v(" "),s("router-link",{attrs:{to:"/"}},[this._v("返回首页")])],1)])}),[],!1,null,"439bb2a8",null);a.default=v.exports},384:function(s,a,t){"use strict";t.r(a);t(43);var e={mounted(){setTimeout(()=>{this.mounteElement(),this.canvasBubble()},200)},methods:{canvasBubble(){let s=document.getElementById("canvas");s.width=window.innerWidth,s.height=window.innerHeight,s.style.position="fixed";let a=s.getContext("2d"),[t,e]=[s.width,s.height],r=[];for(let s=0;s<200;s++){let s=n();r.push(s)}function n(){let s=Math.random()*t,a=5*Math.random()+5;return{x:s,y:e+2*a+10*Math.random(),r:a,s:1*Math.random()+1}}!function t(){window.requestAnimationFrame(t),a.fillStyle="rgba(0, 0, 0, .5)",a.rect(0,0,s.width,s.height),a.fill(),r.forEach(({x:s,y:t,r:e,s:v},l)=>{(t-=v)<=-e-10||Math.random()>.995?r[l]=n():r[l]={x:s,y:t,r:e,s:v},function(s,t,e){a.beginPath();var r=a.createRadialGradient(s+e/3,t+e/3,.2*e,s+e/3,t+e/3,.8*e);r.addColorStop(0,"#333"),r.addColorStop(.6,"#ccc"),r.addColorStop(.8,"#efefef"),r.addColorStop(1,"#fff"),a.fillStyle=r,a.globalAlpha=.5,a.arc(s,t,e,0,2*Math.PI),a.fill(),a.closePath()}(s,t,e)})}()},mounteElement(){let s=document.getElementsByClassName("theme-container")[0],a=document.getElementById("bubble");s.append(a)}}},r=(t(374),t(7)),n=Object(r.a)(e,(function(){return(0,this._self._c)("canvas",{attrs:{id:"bubble"}})}),[],!1,null,null,null);a.default=n.exports},389:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){return(0,this._self._c)("ContentSlotsDistributor",{attrs:{"slot-key":this.$parent.slotKey}})}),[],!1,null,null,null);a.default=r.exports},391:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){return(0,this._self._c)("ContentSlotsDistributor",{attrs:{"slot-key":this.$parent.slotKey}})}),[],!1,null,null,null);a.default=r.exports},392:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){return(0,this._self._c)("ContentSlotsDistributor",{attrs:{"slot-key":this.$parent.slotKey}})}),[],!1,null,null,null);a.default=r.exports},405:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("blockquote",[a("p",[s._v("本文主要介绍：\n如何从零开始使用一键安装的方式安装 Jpom 服务端+插件端配置")]),s._v(" "),a("p",[s._v("本文中服务端和插件端是安装在同一个服务器中的，实际操作时根据业务情况来安装")])]),s._v(" "),a("blockquote",[a("p",[s._v("注意：本文采用一键安装同时基于 2.8.8 版本讲解,系统为 ubuntu")])]),s._v(" "),a("h2",{attrs:{id:"需要准备的环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需要准备的环境"}},[s._v("#")]),s._v(" 需要准备的环境")]),s._v(" "),a("ol",[a("li",[s._v("Jpom 服务端、Jpom 插件端（安装 jpom 需要 java 环境）")])]),s._v(" "),a("h2",{attrs:{id:"安装服务端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装服务端"}},[s._v("#")]),s._v(" 安装服务端")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 提前创建好文件夹 并且切换到对应到文件夹执行命令\nmkdir -p /home/jpom/server/\ncd /home/jpom/server/\napt-get install -y wget && wget -O install.sh https://jpom.top/docs/install.sh && bash install.sh Server jdk\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/install1.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/install2.png",alt:"install2",loading:"lazy"}})]),s._v(" "),a("h3",{attrs:{id:"初始化服务端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初始化服务端"}},[s._v("#")]),s._v(" 初始化服务端")]),s._v(" "),a("h4",{attrs:{id:"添加超级管理账号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加超级管理账号"}},[s._v("#")]),s._v(" 添加超级管理账号")]),s._v(" "),a("blockquote",[a("p",[s._v("添加一个超级管理员账号，请妥善保管此账号同时请设置安全度较强的密码")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/inits1.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("h4",{attrs:{id:"开启账号-mfa"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开启账号-mfa"}},[s._v("#")]),s._v(" 开启账号 MFA")]),s._v(" "),a("blockquote",[a("p",[s._v("为了系统安全，强烈建议超级管理员账号开启 MFA 两步验证")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/inits2.png",alt:"install2",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"安装插件端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装插件端"}},[s._v("#")]),s._v(" 安装插件端")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 提前创建好文件夹 并且切换到对应到文件夹执行命令\nmkdir -p /home/jpom/agent/\ncd /home/jpom/agent/\napt-get install -y wget && wget -O install.sh https://jpom.top/docs/install.sh && bash install.sh Agent jdk\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/install-agent1.png",alt:"install1",loading:"lazy"}}),s._v(" "),a("img",{attrs:{src:"/images/tutorial/project_dsl_java/install-agent2.png",alt:"install2",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"添加节点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加节点"}},[s._v("#")]),s._v(" 添加节点")]),s._v(" "),a("p",[s._v("注意要填写端口号哟")]),s._v(" "),a("p",[s._v("这里的节点账号密码和超级管理员账号密码是两个东西哟")]),s._v(" "),a("p",[s._v("节点账号密码在安装启动成功后会输出到控制台，请根据输出到内容填写。如果自己修改了账号密码则填写修改后的")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/inita1.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"注意"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意"}},[s._v("#")]),s._v(" 注意")]),s._v(" "),a("ol",[a("li",[s._v("添加节点的 IP 需要根据您业务环境中的实际 IP 来填写（插件端控制台输出的 IP 是获取当前机器的第一个活跃网卡 IP 仅供参考！实际使用需要更换为和服务端能正常通讯的 IP）")]),s._v(" "),a("li",[s._v("端口默认为 2123 ,如果修改后需要填写修改后的")])]),s._v(" "),a("h3",{attrs:{id:"点网络连接异常或超时"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#点网络连接异常或超时"}},[s._v("#")]),s._v(" 点网络连接异常或超时")]),s._v(" "),a("p",[s._v("添加时候可能出现："),a("code",[s._v("xxx节点网络连接异常或超时,请优先检查插件端运行状态再检查 IP 地址、端口号是否配置正确,防火墙规则,云服务器的安全组配置等网络相关问题排查定位。xxxx")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/install/img.png",alt:"img.png",loading:"lazy"}})]),s._v(" "),a("p",[s._v("这里一般需要检查防火墙、安全组以及 IP 地址是否正常等相关问题。")]),s._v(" "),a("p",[s._v("出现这种提升还有可能是当前插件端的服务未运行，需要检查一下插件端是否正常运行。")]),s._v(" "),a("p",[a("RouterLink",{attrs:{to:"/pages/FQA/proper-noun/#防火墙、安全组"}},[s._v("防火墙、安全组")]),s._v(" 更多说明")],1),s._v(" "),a("h3",{attrs:{id:"授权信息错误"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#授权信息错误"}},[s._v("#")]),s._v(" 授权信息错误")]),s._v(" "),a("p",[s._v("添加时候可能出现："),a("code",[s._v("xxxx节点异常：授权信息错误")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/install/img_1.png",alt:"img_1.png",loading:"lazy"}})]),s._v(" "),a("p",[s._v("这里的节点账号密码和超级管理员账号密码是两个东西哟")]),s._v(" "),a("p",[s._v("节点账号密码在安装启动成功后会输出到控制台，请根据输出到内容填写。如果自己修改了账号密码则填写修改后的。")]),s._v(" "),a("p",[s._v("节点账号和密码安装 Agent 的时候有输出，查看路径："),a("code",[s._v("/agent安装目录/data/agent_authorize.json")]),s._v(" (如果 "),a("code",[s._v("extConfig.yml")]),s._v(" 自定义配置了账号密码不会出现此文件)")]),s._v(" "),a("h2",{attrs:{id:"愉快的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#愉快的使用"}},[s._v("#")]),s._v(" 愉快的使用")]),s._v(" "),a("p",[s._v("这样就完成 Jpom 的安装流程拉，可以根据需要使用其他功能")])])}),[],!1,null,null,null);a.default=r.exports},406:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("blockquote",[a("p",[s._v("本文主要介绍：\n如何使用 Jpom 中的构建触发器实现在 Gitee 仓库提交代码后自动触发构建")]),s._v(" "),a("p",[s._v("文中使用到的依赖环境版本仅供参考，实际使用中请根据业务情况来安装对应的版本")])]),s._v(" "),a("blockquote",[a("p",[s._v("注意：本文默认已经认为您已经安装好 Jpom 服务端并且配置好仓库和构建")])]),s._v(" "),a("h2",{attrs:{id:"需要准备的环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需要准备的环境"}},[s._v("#")]),s._v(" 需要准备的环境")]),s._v(" "),a("ol",[a("li",[s._v("为 Jpom 服务端开放公网可以访问（如果服务端不支持公网访问，Gitee 的 webhook 将无法访问）")])]),s._v(" "),a("h2",{attrs:{id:"生成触发器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成触发器"}},[s._v("#")]),s._v(" 生成触发器")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/gitee-webhook-trigger-build/img.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/gitee-webhook-trigger-build/img_1.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("p",[s._v("地址示例：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("https://xxx.xxxx.cn/api/build2/xxx/xxxx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"给-gitee-仓库配置-webhook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#给-gitee-仓库配置-webhook"}},[s._v("#")]),s._v(" 给 Gitee 仓库配置 webhook")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/gitee-webhook-trigger-build/img_2.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("p",[s._v("可以根据自己的需求勾选触发事件")]),s._v(" "),a("p",[s._v("注意：Jpom 中的 webhook 目前都是免密，不用填写密码或者签名")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/gitee-webhook-trigger-build/img_3.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/gitee-webhook-trigger-build/img_4.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("p",[s._v("这样配置后您在这个仓库提交代码后将自动触发 Jpom 中的此构建（执行构建）")]),s._v(" "),a("h2",{attrs:{id:"如何避免重复构建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何避免重复构建"}},[s._v("#")]),s._v(" 如何避免重复构建")]),s._v(" "),a("p",[s._v("目前 Jpom 中的触发器并未解析触发事件信息，相当于只要请求了该接口就将执行构建。")]),s._v(" "),a("p",[a("strong",[s._v("问：")]),s._v(" 那么该如何避免提交非构建分支时候触发构建呢？")]),s._v(" "),a("p",[a("strong",[s._v("答：")]),s._v(" 开启差异构建，差异构建是指构建时候是否判断仓库代码有变动，如果没有变动则不执行构建")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/gitee-webhook-trigger-build/img_5.png",alt:"install1",loading:"lazy"}})])])}),[],!1,null,null,null);a.default=r.exports},410:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("blockquote",[a("p",[s._v("本文主要介绍：\n如何使用 Jpom 中的构建触发器实现在 GitLab 仓库提交代码后自动触发构建")]),s._v(" "),a("p",[s._v("文中使用到的依赖环境版本仅供参考，实际使用中请根据业务情况来安装对应的版本")])]),s._v(" "),a("blockquote",[a("p",[s._v("注意：本文默认已经认为您已经安装好 Jpom 服务端并且配置好仓库和构建")])]),s._v(" "),a("h2",{attrs:{id:"需要准备的环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需要准备的环境"}},[s._v("#")]),s._v(" 需要准备的环境")]),s._v(" "),a("p",[s._v("GitLab 以及 Jpom 服务端。")]),s._v(" "),a("p",[a("strong",[s._v("重要：请确保 Jpom 服务端和 GitLab 服务器之间可以相互访问通信，以排除因为网络不通导致的无法完成自动构建。")])]),s._v(" "),a("h2",{attrs:{id:"生成触发器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成触发器"}},[s._v("#")]),s._v(" 生成触发器")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/gitee-webhook-trigger-build/img.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/gitee-webhook-trigger-build/img_1.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("p",[s._v("地址示例：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("https://xxx.xxxx.cn/api/build2/xxx/xxxx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"给-gitlab-仓库配置-webhook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#给-gitlab-仓库配置-webhook"}},[s._v("#")]),s._v(" 给 GitLab 仓库配置 Webhook")]),s._v(" "),a("p",[s._v("鼠标移到左侧栏的【Settings】上，然后选择【Webhooks】。")]),s._v(" "),a("p",[s._v("在【URL】中填写 Jpom 的 webhook 地址，Trigger 是什么情况下触发构建，选择【Push events】则会每次有新的推送时自动构建。")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/gitlab-webhook-trigger-build/img_2.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("p",[s._v("注意：Jpom 中的 webhook 目前都是免密，不用填写密码或者签名")]),s._v(" "),a("p",[s._v("这样配置后您在这个仓库提交代码后将自动触发 Jpom 中的此构建（执行构建）")]),s._v(" "),a("h2",{attrs:{id:"如何避免重复构建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何避免重复构建"}},[s._v("#")]),s._v(" 如何避免重复构建")]),s._v(" "),a("p",[s._v("目前 Jpom 中的触发器并未解析触发事件信息，相当于只要请求了该接口就将执行构建。")]),s._v(" "),a("p",[a("strong",[s._v("问：")]),s._v(" 那么该如何避免提交非构建分支时候触发构建呢？")]),s._v(" "),a("p",[a("strong",[s._v("答：")]),s._v(" 开启差异构建，差异构建是指构建时候是否判断仓库代码有变动，如果没有变动则不执行构建")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/gitee-webhook-trigger-build/img_5.png",alt:"install1",loading:"lazy"}})])])}),[],!1,null,null,null);a.default=r.exports},411:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("blockquote",[a("p",[s._v("本文主要介绍：\n如何从零开始使用 Jpom 中的构建功能实现将 node(vue) 项目从仓库中构建并发布到节点项目中并通过 Jpom 配置 nginx。")]),s._v(" "),a("p",[s._v("本文中服务端和插件端是安装在同一个服务器中的，实际操作时根据业务情况来安装")]),s._v(" "),a("p",[s._v("文中使用到的依赖环境版本仅供参考，实际使用中请根据业务情况来安装对应的版本")])]),s._v(" "),a("blockquote",[a("p",[s._v("本文基于 2.8.4 版本讲解")])]),s._v(" "),a("h2",{attrs:{id:"需要准备的环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需要准备的环境"}},[s._v("#")]),s._v(" 需要准备的环境")]),s._v(" "),a("ol",[a("li",[s._v("Jpom 服务端、Jpom 插件端（安装 jpom 需要 java 环境）")]),s._v(" "),a("li",[s._v("服务端所在服务器需要 node 环境")]),s._v(" "),a("li",[s._v("插件端所在服务器需要 nginx 环境")])]),s._v(" "),a("h1",{attrs:{id:"操作步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作步骤"}},[s._v("#")]),s._v(" 操作步骤")]),s._v(" "),a("h2",{attrs:{id:"第一步-安装-jpom-服务端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第一步-安装-jpom-服务端"}},[s._v("#")]),s._v(" 第一步：安装 Jpom 服务端")]),s._v(" "),a("blockquote",[a("p",[s._v("目前安装 Jpom 服务端的方式有：一键安装、下载安装、编译打包安装、docker 安装，建议按照自己熟悉的方式来安装")]),s._v(" "),a("p",[s._v("教程中使用一键安装的命令安装服务端")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mkdir -p /home/jpom/server && cd /home/jpom/server\n# 这里我们选择快速安装 jdk 实际中请根据自己情况选择\nyum install -y wget && wget -O install.sh https://jpom.top/docs/install.sh && bash install.sh Server jdk\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"执行命令后控制台输出如下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行命令后控制台输出如下"}},[s._v("#")]),s._v(" 执行命令后控制台输出如下")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/build_node_release/install1.png",alt:"install1",loading:"lazy"}}),s._v(" "),a("img",{attrs:{src:"/images/tutorial/build_node_release/install2.png",alt:"install2",loading:"lazy"}}),s._v(" "),a("img",{attrs:{src:"/images/tutorial/build_node_release/install3.png",alt:"install3",loading:"lazy"}}),s._v(" "),a("img",{attrs:{src:"/images/tutorial/build_node_release/install4.png",alt:"install4",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"第二步-安装-node-环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第二步-安装-node-环境"}},[s._v("#")]),s._v(" 第二步：安装 node 环境")]),s._v(" "),a("blockquote",[a("p",[s._v("安装 node 环境、这里演示中我们使用 node 16.13.1 版本（项目实际依赖版本请根据业务情况调整）")]),s._v(" "),a("p",[s._v("https://oss.npmmirror.com/dist/node/v16.13.1/node-v16.13.1-linux-x64.tar.gz")])]),s._v(" "),a("p",[s._v("下载安装")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("wget -O node-v16.13.1-linux-x64.tar.gz https://oss.npmmirror.com/dist/node/v16.13.1/node-v16.13.1-linux-x64.tar.gz\n\nmkdir -p /usr/node/ && tar -zxf node-v16.13.1-linux-x64.tar.gz  -C /usr/node/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("img",{attrs:{src:"/images/tutorial/build_node_release/node1.png",alt:"node1",loading:"lazy"}})]),s._v(" "),a("p",[s._v("配置环境变量")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("echo '# node '>>/etc/profile\necho 'export NODE_HOME=/usr/node/node-v16.13.1-linux-x64'>>/etc/profile\necho 'export PATH=$NODE_HOME/bin:$PATH'>>/etc/profile\nsource /etc/profile\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("如构建遇到错误提示/bin/bash: npm: command not found，可以执行如下命令建立软连接\nln -s /usr/node/node-v16.13.1-linux-x64/bin/node /usr/local/bin/node\nln -s /usr/node/node-v16.13.1-linux-x64/bin/npm /usr/local/bin/npm")]),s._v(" "),a("h2",{attrs:{id:"第三步-重启服务器端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第三步-重启服务器端"}},[s._v("#")]),s._v(" 第三步：重启服务器端")]),s._v(" "),a("blockquote",[a("p",[s._v("重启服务器端，由于在启动服务端后安装端 node 环境，所以需要重启服务端让 node 环境在服务端中生效")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("bash /home/jpom/server/Server.sh restart\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"第四步-安装-jpom-插件端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第四步-安装-jpom-插件端"}},[s._v("#")]),s._v(" 第四步：安装 Jpom 插件端")]),s._v(" "),a("blockquote",[a("p",[s._v("目前安装 Jpom 插件端的方式有：一键安装、下载安装、编译打包安装，建议按照自己熟悉的方式来安装")]),s._v(" "),a("p",[s._v("教程中使用一键安装的命令安装插件端")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mkdir -p /home/jpom/agent && cd /home/jpom/agent\n# 这里我们选择快速安装 jdk 实际中请根据自己情况选择\nyum install -y wget && wget -O install.sh https://jpom.top/docs/install.sh && bash install.sh Agent jdk\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("img",{attrs:{src:"/images/tutorial/build_node_release/agent1.png",alt:"agent1",loading:"lazy"}}),s._v(" "),a("img",{attrs:{src:"/images/tutorial/build_node_release/agent2.png",alt:"agent2",loading:"lazy"}})]),s._v(" "),a("p",[s._v("图 2 中圈出来第为插件端的账号密码")]),s._v(" "),a("h2",{attrs:{id:"第五步-安装-nginx-环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第五步-安装-nginx-环境"}},[s._v("#")]),s._v(" 第五步：安装 nginx 环境")]),s._v(" "),a("p",[s._v("教程中使用 centos7 rpm 方式安装，实际中可以根据环境情况安装(如果是编译安装则需要)")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("rpm -ivh https://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm\nyum install -y nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("配置 nginx")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("vim /etc/nginx/nginx.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("建议使用 "),a("code",[s._v("include /etc/nginx/conf.d/*.conf")]),s._v(" 方式来授权给 Jpom 来管理 nginx 配置文件")]),s._v(" "),a("p",[s._v("启动 nginx")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("systemctl start nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"第六步-初始化-jpom-服务端和插件端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第六步-初始化-jpom-服务端和插件端"}},[s._v("#")]),s._v(" 第六步：初始化 Jpom 服务端和插件端")]),s._v(" "),a("p",[s._v("访问：http://IP:2122 这里 ip 请更换为您服务器中第实际 ip")]),s._v(" "),a("p",[s._v("如果无法访问请优先检查 Jpom 访问是否正常运行、服务端防火墙、云服务器的安全组规则等网络原因")]),s._v(" "),a("h3",{attrs:{id:"初始化系统管理员"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初始化系统管理员"}},[s._v("#")]),s._v(" 初始化系统管理员")]),s._v(" "),a("p",[s._v("第一次使用系统需要设置一个系统管理员账号（系统管理员账号密码有强度要求，请安装提示设置。同时也请您牢记系统管理员账号）")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/build_node_release/install-user1.png",alt:"install-user1",loading:"lazy"}}),s._v(" "),a("img",{attrs:{src:"/images/tutorial/build_node_release/install-user2.png",alt:"install-user2",loading:"lazy"}})]),s._v(" "),a("h3",{attrs:{id:"添加-jpom-节点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加-jpom-节点"}},[s._v("#")]),s._v(" 添加 Jpom 节点")]),s._v(" "),a("p",[s._v("节点列表还没有任何节点，我们需要将我们之前安装等插件端添加到服务端中来")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/build_node_release/node-list1.png",alt:"node-list1",loading:"lazy"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/build_node_release/add-node.png",alt:"add-node",loading:"lazy"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/build_node_release/add-node2.png",alt:"add-node2",loading:"lazy"}})]),s._v(" "),a("p",[s._v("图 3 中的节点密码为上面步骤中第四步中安装并启动插件端后控制台输出第账号和密码")]),s._v(" "),a("h2",{attrs:{id:"第七步-配置节点信息、创建节点项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第七步-配置节点信息、创建节点项目"}},[s._v("#")]),s._v(" 第七步：配置节点信息、创建节点项目")]),s._v(" "),a("ol",[a("li",[s._v("进入节点管理\n"),a("ol",[a("li",[a("img",{attrs:{src:"/images/tutorial/build_node_release/node-list2.png",alt:"node-list2",loading:"lazy"}})])])]),s._v(" "),a("li",[s._v("配置授权（白名单）信息\n"),a("ol",[a("li",[a("img",{attrs:{src:"/images/tutorial/build_node_release/node-conf1.png",alt:"node-conf1",loading:"lazy"}})]),s._v(" "),a("li",[a("img",{attrs:{src:"/images/tutorial/build_node_release/node-conf2.png",alt:"node-conf12",loading:"lazy"}})]),s._v(" "),a("li",[s._v("注意这里的项目路径是指，咋们节点项目允许所在的文件夹路径、nginx 路径是指咋们允许在线编辑的 nginx 配置文件的文件夹路径")]),s._v(" "),a("li",[s._v("nginx 配置建议使用 "),a("code",[s._v("include /etc/nginx/conf.d/*.conf")]),s._v(" 来管理")])])]),s._v(" "),a("li",[s._v("进入项目列表\n"),a("ol",[a("li",[a("img",{attrs:{src:"/images/tutorial/build_node_release/project-list1.png",alt:"project-list1",loading:"lazy"}})])])]),s._v(" "),a("li",[s._v("创建 "),a("code",[s._v("File 类型项目")]),s._v(" "),a("ol",[a("li",[a("img",{attrs:{src:"/images/tutorial/build_node_release/project-add.png",alt:"project-add",loading:"lazy"}})])])])]),s._v(" "),a("h2",{attrs:{id:"第八步-创建构建仓库、创建构建信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第八步-创建构建仓库、创建构建信息"}},[s._v("#")]),s._v(" 第八步：创建构建仓库、创建构建信息")]),s._v(" "),a("ol",[a("li",[s._v("添加仓库\n"),a("ol",[a("li",[a("img",{attrs:{src:"/images/tutorial/build_node_release/repository-list.png",alt:"repository-list",loading:"lazy"}})]),s._v(" "),a("li",[a("img",{attrs:{src:"/images/tutorial/build_node_release/repository-add1.png",alt:"repository-add1",loading:"lazy"}})]),s._v(" "),a("li",[a("img",{attrs:{src:"/images/tutorial/build_node_release/repository-add2.png",alt:"repository-add2",loading:"lazy"}})])])]),s._v(" "),a("li",[s._v("添加构建信息\n"),a("ol",[a("li",[a("img",{attrs:{src:"/images/tutorial/build_node_release/build-list.png",alt:"build-list",loading:"lazy"}})]),s._v(" "),a("li",[a("img",{attrs:{src:"/images/tutorial/build_node_release/build-add1.png",alt:"build-add1",loading:"lazy"}})]),s._v(" "),a("li",[a("img",{attrs:{src:"/images/tutorial/build_node_release/build-add2.png",alt:"build-add2",loading:"lazy"}})]),s._v(" "),a("li",[s._v("构建命令解释："),a("code",[s._v("cd antdv && npm i && npm run build")]),s._v(" 由于仓库是多模块项目的仓库，首先需要切换到对应到目录（如果项目存在仓库根路径则不需要切换到对应的目录），如果执行对应到构建命令，由于 node 项目构建都需要装包这里先执行 "),a("code",[s._v("npm i")]),s._v("装包再执行 "),a("code",[s._v("npm run build")]),s._v(" 多条命令用 && 拼接是为了保证上一条命令执行成功才执行下一条")]),s._v(" "),a("li",[s._v("产物目录解释："),a("code",[s._v("antdv/dist")]),s._v(" 由于当前项目存储到 antdv 目录中，构建完成将生成 dist 目录，那么这里需要填写："),a("code",[s._v("antdv/dist")]),s._v("，这里注意需要添加仓库路径下面到相对路径")])])]),s._v(" "),a("li",[s._v("执行构建\n"),a("ol",[a("li",[s._v("第一次构建可能需要较长时间，是因为需要安装依赖包。加快构建速度也可以考虑修改镜像源地址")]),s._v(" "),a("li",[s._v("构建中请注意执行构建命令过程中是否发生错误信息影响到没有达到预期到构建结果（没有对应到构建产物）")]),s._v(" "),a("li",[a("img",{attrs:{src:"/images/tutorial/build_node_release/build-release.png",alt:"build-release",loading:"lazy"}})])])])]),s._v(" "),a("h2",{attrs:{id:"第九步-检查项目文件夹是否正确、配置-nginx-访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第九步-检查项目文件夹是否正确、配置-nginx-访问"}},[s._v("#")]),s._v(" 第九步：检查项目文件夹是否正确、配置 nginx 访问")]),s._v(" "),a("ol",[a("li",[s._v("查看项目文件夹里面的文件\n"),a("ol",[a("li",[s._v("当前项目文件夹 "),a("code",[s._v("/home/test/vue")]),s._v(" 由所选的项目路径+添加的文件路径组成")]),s._v(" "),a("li",[a("img",{attrs:{src:"/images/tutorial/build_node_release/project-file.png",alt:"project-file",loading:"lazy"}})])])]),s._v(" "),a("li",[s._v("配置 nginx\n"),a("ol",[a("li",[a("img",{attrs:{src:"/images/tutorial/build_node_release/nginx-list.png",alt:"nginx-list",loading:"lazy"}})]),s._v(" "),a("li",[a("img",{attrs:{src:"/images/tutorial/build_node_release/nginx-edit.png",alt:"nginx-edit",loading:"lazy"}})])])])]),s._v(" "),a("h2",{attrs:{id:"第十步-愉快地使用前端项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第十步-愉快地使用前端项目"}},[s._v("#")]),s._v(" 第十步：愉快地使用前端项目")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/build_node_release/use.png",alt:"use",loading:"lazy"}})])])}),[],!1,null,null,null);a.default=r.exports},413:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("blockquote",[a("p",[s._v("本文主要介绍：\n如何从零开始使用 Jpom 中的本地构建+节点项目管理+脚本管理实现自定义管理 Python 项目（自定义启动项目，停止，查状态）")]),s._v(" "),a("p",[s._v("本文中服务端和插件端是安装在同一个服务器中的，实际操作时根据业务情况来安装")]),s._v(" "),a("p",[s._v("文中使用到的依赖环境版本仅供参考，实际使用中请根据业务情况来安装对应的版本")])]),s._v(" "),a("blockquote",[a("p",[s._v("注意：本文采用一键安装同时基于 2.8.8 版本讲解,系统为 ubuntu\n系统自带 python 环境不需要单独安装，教程中系统 python 版本 2.7.17")])]),s._v(" "),a("h2",{attrs:{id:"需要准备的环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需要准备的环境"}},[s._v("#")]),s._v(" 需要准备的环境")]),s._v(" "),a("ol",[a("li",[s._v("Jpom 服务端、Jpom 插件端（安装 jpom 需要 java 环境）")])]),s._v(" "),a("h2",{attrs:{id:"安装服务端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装服务端"}},[s._v("#")]),s._v(" 安装服务端")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 提前创建好文件夹 并且切换到对应到文件夹执行命令\nmkdir -p /home/jpom/server/\ncd /home/jpom/server/\napt-get install -y wget && wget -O install.sh https://jpom.top/docs/install.sh && bash install.sh Server jdk\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/install1.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/install2.png",alt:"install2",loading:"lazy"}})]),s._v(" "),a("h3",{attrs:{id:"初始化服务端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初始化服务端"}},[s._v("#")]),s._v(" 初始化服务端")]),s._v(" "),a("h4",{attrs:{id:"添加超级管理账号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加超级管理账号"}},[s._v("#")]),s._v(" 添加超级管理账号")]),s._v(" "),a("blockquote",[a("p",[s._v("添加一个超级管理员账号，请妥善保管此账号同时请设置安全度较强的密码")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/inits1.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("h4",{attrs:{id:"开启账号-mfa"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开启账号-mfa"}},[s._v("#")]),s._v(" 开启账号 MFA")]),s._v(" "),a("blockquote",[a("p",[s._v("为了系统安全，强烈建议超级管理员账号开启 MFA 两步验证")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/inits2.png",alt:"install2",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"安装插件端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装插件端"}},[s._v("#")]),s._v(" 安装插件端")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 提前创建好文件夹 并且切换到对应到文件夹执行命令\nmkdir -p /home/jpom/agent/\ncd /home/jpom/agent/\napt-get install -y wget && wget -O install.sh https://jpom.top/docs/install.sh && bash install.sh Agent jdk\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/install-agent1.png",alt:"install1",loading:"lazy"}}),s._v(" "),a("img",{attrs:{src:"/images/tutorial/project_dsl_java/install-agent2.png",alt:"install2",loading:"lazy"}})]),s._v(" "),a("h3",{attrs:{id:"添加节点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加节点"}},[s._v("#")]),s._v(" 添加节点")]),s._v(" "),a("p",[s._v("注意要填写端口号哟")]),s._v(" "),a("p",[s._v("这里的节点账号密码和超级管理员账号密码是两个东西哟")]),s._v(" "),a("p",[s._v("节点账号密码在安装启动成功后会输出到控制台，请根据输出到内容填写。如果自己修改了账号密码则填写修改后的")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/inita1.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("h3",{attrs:{id:"配置授权-白名单"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置授权-白名单"}},[s._v("#")]),s._v(" 配置授权（白名单）")]),s._v(" "),a("p",[s._v("项目授权（白名单）是为了防止随意配置目录，同时也为了保护系统目录")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/inita2.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"创建脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建脚本"}},[s._v("#")]),s._v(" 创建脚本")]),s._v(" "),a("p",[s._v("注意："),a("code",[s._v("Ubuntu/Debian")]),s._v(" 执行脚本如果出现错误\n"),a("code",[s._v('Syntax error: "(" unexpected')]),s._v("\n代码对于标准bash而言没有错，因为 "),a("code",[s._v("Ubuntu/Debian")]),s._v(" 为了加快开机速度，用dash代替了传统的bash，是dash在捣鬼。")]),s._v(" "),a("p",[s._v("解决方法: 就是取消"),a("code",[s._v("dash")])]),s._v(" "),a("p",[s._v("执行："),a("code",[s._v("sudo dpkg-reconfigure dash")]),s._v(" 在选择项中选No，搞定了！")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_python/edit-script1.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("p",[s._v("脚本内容：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('#!/bin/bash\nTag="Application_${PROJECT_ID}"\nLib="${PROJECT_PATH}"\nLog="${PROJECT_PATH}/run.log"\necho $Tag\nRETVAL="0"\n\n# See how we were called.\nfunction start() {\n    echo  $Log \n    if [ ! -f $Log ]; then\n        touch $Log\n    fi\n   \n   cd $Lib && nohup python -m SimpleHTTPServer 8000 $Tag > $Log 2>&1 &  \n\tsleep 5\n    head -n 10 $Log\n}\n\n\nfunction stop() {\n    pid=$(ps -ef | grep -v \'grep\' | egrep $Tag| awk \'{printf $2 " "}\')\n    if [ "$pid" != "" ]; then      \n        echo -n "boot ( pid $pid) is running" \n        echo \n        echo -n $"Shutting down boot: "\n        pid=$(ps -ef | grep -v \'grep\' | egrep $Tag| awk \'{printf $2 " "}\')\n        if [ "$pid" != "" ]; then\n            echo "kill boot process"\n            kill -9 "$pid"\n        fi\n        else \n             echo "boot is stopped" \n        fi\n\n    status\n}\n\nfunction status()\n{\n    pid=$(ps -ef | grep -v \'grep\' | egrep $Tag| awk \'{printf $2 " "}\')\n    #echo "$pid"\n    if [ "$pid" != "" ]; then\n        echo "running:$pid"\n    else\n        echo "boot is stopped"\n    fi\n}\n\n# See how we were called.\nRETVAL="0"\ncase "$1" in\n    start)\n        start\n        ;;\n    stop)\n        stop\n        ;;\n    status)\n        status\n        ;;\n    *)\n      usage\n      ;;\nesac\n\nexit $RETVAL\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br")])]),a("blockquote",[a("ol",[a("li",[a("p",[s._v("脚本里面至少需要实现的三件事："),a("strong",[s._v("启动")]),s._v("、"),a("strong",[s._v("停止")]),s._v("、"),a("strong",[s._v("查状态")])])]),s._v(" "),a("li",[a("p",[s._v("查状态输出最后一行需要是 "),a("code",[s._v("running:$pid")]),s._v(" $pid 必须为数字且表示当前项目的进程 id ，如果不匹配项目则显示未运行")])])])]),s._v(" "),a("p",[s._v("提供的示例里面将使用三个函数来实现：start、stop、status")]),s._v(" "),a("p",[s._v("里面的细节这里不过多的说明，可以自由发挥（给您足够的空间）")]),s._v(" "),a("p",[s._v("脚本里面支持的变量有：${PROJECT_ID}、${PROJECT_NAME}、${PROJECT_PATH}")]),s._v(" "),a("p",[s._v("如果多个项目管理方式相同，脚本模版可以重复使用奥（并非一个项目对应一个脚本模版）")]),s._v(" "),a("p",[s._v("更新脚本示例："),a("RouterLink",{attrs:{to:"/FQA/DSL.html"}},[s._v("✈️进入>>")])],1),s._v(" "),a("h2",{attrs:{id:"创建项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建项目"}},[s._v("#")]),s._v(" 创建项目")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_python/edit-project.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("p",[s._v("注意：")]),s._v(" "),a("ol",[a("li",[s._v("scriptArgs 为对应环节执行脚本传人的参数,这里可以使用空格隔空传人多个参数")]),s._v(" "),a("li",[s._v("scriptId 需要填写当前节点里面存在的脚本的 id,脚本ID 可以在编辑脚本弹窗里面查看，如下图")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_python/edit-script2.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"添加构建仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加构建仓库"}},[s._v("#")]),s._v(" 添加构建仓库")]),s._v(" "),a("p",[s._v("这里使用 jpom 演示的仓库中的 python")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_python/repo1.png",alt:"install1",loading:"lazy"}}),s._v(" "),a("img",{attrs:{src:"/images/tutorial/project_dsl_python/repo2.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"添加本地构建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加本地构建"}},[s._v("#")]),s._v(" 添加本地构建")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_python/build1.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("p",[s._v("这里需要注意构建产物目录：是指仓库下面的相对路径")]),s._v(" "),a("p",[s._v("发布项目需要选择节点再选择项目")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_python/build2.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("p",[s._v("构建")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_python/build3.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("p",[s._v("执行构建")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_python/build4.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("p",[s._v("看到最后输出上传成功并重启表示项目已经发布完成")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_python/build5.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"查看项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看项目"}},[s._v("#")]),s._v(" 查看项目")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_python/project-list.png",alt:"install1",loading:"lazy"}})])])}),[],!1,null,null,null);a.default=r.exports},418:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("blockquote",[a("p",[s._v("本文主要介绍：")]),s._v(" "),a("p",[s._v("如何使用 Jpom 中的在线构建来实现构建 docker 镜像并推送到远程仓库的流程")])]),s._v(" "),a("p",[s._v("需要使用到的功能有：")]),s._v(" "),a("ol",[a("li",[s._v("仓库管理")]),s._v(" "),a("li",[s._v("在线构建 -> 本地构建：将仓库代码打包出运行文件")]),s._v(" "),a("li",[s._v("docker 管理")]),s._v(" "),a("li",[s._v("在线构建发布到 docker 镜像并推送到远程仓库")])]),s._v(" "),a("blockquote",[a("p",[s._v("注意：本文采用一键安装同时基于 2.9.18 版本讲解,系统为 centos")])]),s._v(" "),a("h2",{attrs:{id:"需要准备的环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需要准备的环境"}},[s._v("#")]),s._v(" 需要准备的环境")]),s._v(" "),a("ol",[a("li",[s._v("Jpom 服务端（已经安装好、并且配置好了 maven 环境）")]),s._v(" "),a("li",[s._v("一个 Java 项目仓库 并且已经有 "),a("code",[s._v("DockerFile")]),s._v(" 文件")])]),s._v(" "),a("p",[s._v("本文就不再从零开始讲解安装教程，如果有不知道该如何安装的可以查看相关文档")]),s._v(" "),a("ul",[a("li",[a("RouterLink",{attrs:{to:"/pages/15b7a2/"}},[s._v("一键安装实践")])],1),s._v(" "),a("li",[a("RouterLink",{attrs:{to:"/pages/c846d3/"}},[s._v("Docker 容器安装")])],1),s._v(" "),a("li",[a("RouterLink",{attrs:{to:"/pages/af288b/"}},[s._v("离线安装")])],1)]),s._v(" "),a("p",[a("em",[s._v("本文使用物理机直接安装 Jpom 服务端的方式")])]),s._v(" "),a("p",[s._v("案例仓库地址："),a("a",{attrs:{href:"https://gitee.com/keepbx/Jpom-demo-case/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://gitee.com/keepbx/Jpom-demo-case/"),a("OutboundLink")],1),s._v(" -> "),a("a",{attrs:{href:"https://gitee.com/keepbx/Jpom-demo-case/tree/master/springboot-test-jar",target:"_blank",rel:"noopener noreferrer"}},[s._v("springboot-test-jar"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"操作指南"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作指南"}},[s._v("#")]),s._v(" 操作指南")]),s._v(" "),a("h3",{attrs:{id:"配置-docker-到-jpom"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-docker-到-jpom"}},[s._v("#")]),s._v(" 配置 docker 到 Jpom")]),s._v(" "),a("p",[s._v("这个步骤主要是在 Jpom 添加 docker 服务，这样可以使用 Jpom 来管理 docker")]),s._v(" "),a("p",[a("strong",[s._v("详细操作步骤："),a("RouterLink",{attrs:{to:"/pages/practice/docker-cli/"}},[s._v("操作文档>>")])],1),s._v(" (本文默认您已经配置好了)")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/build-docker-images/img_2.png",alt:"img_2.png",loading:"lazy"}})]),s._v(" "),a("p",[s._v("这里我们为 docker 添加一个标签值为："),a("code",[s._v("test")]),s._v(" （注意这个值后续会用到）")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/build-docker-images/img_1.png",alt:"img_1.png",loading:"lazy"}})]),s._v(" "),a("blockquote",[a("p",[s._v("如果服务端所在服务器中存在 docker 建议使用"),a("code",[s._v("自动探测")]),s._v("方式来添加")])]),s._v(" "),a("blockquote",[a("p",[s._v("本文因为服务端所在的服务器存在 docker，所以 docker 地址为："),a("code",[s._v("unix:///var/run/docker.sock")])])]),s._v(" "),a("h3",{attrs:{id:"配置-docker-仓库授权"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-docker-仓库授权"}},[s._v("#")]),s._v(" 配置 docker 仓库授权")]),s._v(" "),a("p",[s._v("本次采用阿里云容器镜像仓库为示例，其他 docker 仓库基本大同小异")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/build-docker-images-push/img.png",alt:"img.png",loading:"lazy"}})]),s._v(" "),a("h3",{attrs:{id:"配置项目仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置项目仓库"}},[s._v("#")]),s._v(" 配置项目仓库")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/build-docker-images/img.png",alt:"img.png",loading:"lazy"}})]),s._v(" "),a("p",[s._v("仓库目录截图")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/build-docker-images/img_4.png",alt:"img_4.png",loading:"lazy"}})]),s._v(" "),a("h3",{attrs:{id:"配置在线构建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置在线构建"}},[s._v("#")]),s._v(" 配置在线构建")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/build-docker-images-push/img_1.png",alt:"img_1.png",loading:"lazy"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/build-docker-images/img_3.png",alt:"img_3.png",loading:"lazy"}})]),s._v(" "),a("p",[s._v("仓库"),a("strong",[s._v("构建命令")]),s._v("："),a("code",[s._v("mvn clean package -DskipTests")]),s._v(" 您需要根据的项目来确定打包命令")]),s._v(" "),a("p",[s._v("仓库"),a("strong",[s._v("产物目录")]),s._v("："),a("code",[s._v("springboot-test-jar/target/springboot-test-jar-0.0.1-SNAPSHOT.jar")]),s._v(" 您需要根据的项目来确定产物目录（不了解产物目录该怎么填写的可以查看："),a("RouterLink",{attrs:{to:"/pages/0b946a/#产物目录"}},[s._v("说明文档")]),s._v("）")],1),s._v(" "),a("p",[a("strong",[s._v("执行容器")]),s._v("：这里填写在 Jpom 添加 docker 的标签值 ，我们前面为 docker 添加的标签值为 "),a("code",[s._v("test")]),s._v("，这里我们填它即可")]),s._v(" "),a("blockquote",[a("p",[s._v("执行容器指使用哪个 docker 构建,填写 docker 标签（ 标签在 docker 编辑页面配置） 默认查询可用的第一个,如果 tag 查询出多个将依次构建")])]),s._v(" "),a("p",[a("strong",[s._v("镜像 tag")]),s._v("："),a("code",[s._v("registry.cn-shanghai.aliyuncs.com/jpom-demo/jpomtestdocker:1.0")])]),s._v(" "),a("p",[s._v("这里注意：一定要写对命名空间不然没有办法正常推送到远程仓库")]),s._v(" "),a("p",[s._v("阿里云仓库可以参考页面提示")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/build-docker-images-push/img_2.png",alt:"img_2.png",loading:"lazy"}})]),s._v(" "),a("blockquote",[a("p",[s._v("容器标签,如：xxxx:latest 多个使用逗号隔开")]),s._v(" "),a("p",[s._v("这里根据您您的项目情况来填写您需要的镜像标签名，注意这里支持使用仓库目录下的变量文件替换变量来实现动态标签名（tag 名）")])]),s._v(" "),a("blockquote",[a("p",[s._v("在 2.9.19+ 版本 需要手动配置 "),a("code",[s._v("附加环境变量")]),s._v(" 来实现加载仓库目录下 .env 文件环境变量")])]),s._v(" "),a("blockquote",[a("p",[s._v("使用变量替换示例：xxxx:${VERSION}，添加 "),a("code",[s._v("附加环境变量")]),s._v(" .env 文件 后，如果 .env 文件存在 VERSION=1.2 那么替换后为：xxxx:1.2")])]),s._v(" "),a("p",[a("strong",[s._v("Dockerfile")]),s._v("：这里添加的 "),a("code",[s._v("springboot-test-jar:springboot-test-jar/Dockerfile")])]),s._v(" "),a("blockquote",[a("p",[s._v("指使用哪个仓库里面的哪个 Dockerfile 文件来执行构建操作,如果多文件夹查看可以指定二级目录如果 springboot-test-jar:springboot-test-jar/Dockerfile")])]),s._v(" "),a("blockquote",[a("p",[s._v("如果您的 Dockerfile 在仓库根路径，直接填写对应的文件名即可。这里支持二级目录的作用主要是用于指定到二级目录里面执行构建，因为部分 Dockerfile 里面 "),a("code",[s._v("ADD")]),s._v(" "),a("code",[s._v("COPY")]),s._v(" 指令是相对路径的情况")])]),s._v(" "),a("p",[a("strong",[s._v("版本递增")])]),s._v(" "),a("blockquote",[a("p",[s._v("开启 dockerTag 版本递增后将在每次构建时自动将版本号最后一位数字同步为构建序号ID")]),s._v(" "),a("p",[s._v("如：当前构建为第 100 次构建")]),s._v(" "),a("p",[s._v("testtag:1.0 -> testtag:1.100")]),s._v(" "),a("p",[s._v("testtag:1.0.release -> testtag:1.100.release")]),s._v(" "),a("p",[s._v("如果没有匹配到数字将忽略递增操作")])]),s._v(" "),a("h3",{attrs:{id:"执行构建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行构建"}},[s._v("#")]),s._v(" 执行构建")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/build-docker-images/img_5.png",alt:"img_5.png",loading:"lazy"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/build-docker-images-push/img_8.png",alt:"img.png",loading:"lazy"}})]),s._v(" "),a("p",[s._v("这里可以看到我们的镜像标签最终转换为："),a("code",[s._v("registry.cn-shanghai.aliyuncs.com/jpom-demo/jpomtestdocker:1.1")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/build-docker-images-push/img_3.png",alt:"img_3.png",loading:"lazy"}})]),s._v(" "),a("h3",{attrs:{id:"查看远程仓库中的镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看远程仓库中的镜像"}},[s._v("#")]),s._v(" 查看远程仓库中的镜像")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/build-docker-images-push/img_4.png",alt:"img_4.png",loading:"lazy"}})]),s._v(" "),a("p",[s._v("至此我们就可以通过 Jpom 来实现构建镜像并且可以推送到远程仓库了")]),s._v(" "),a("h2",{attrs:{id:"补充说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#补充说明"}},[s._v("#")]),s._v(" 补充说明")]),s._v(" "),a("p",[s._v("使用阿里云镜像仓库需要创建"),a("code",[s._v("命名空间")]),s._v("、"),a("code",[s._v("镜像仓库")]),s._v("，具体操作可以登录阿里云镜像仓库控制台查看")]),s._v(" "),a("h3",{attrs:{id:"命令空间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令空间"}},[s._v("#")]),s._v(" 命令空间")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/build-docker-images-push/img_5.png",alt:"img_5.png",loading:"lazy"}})]),s._v(" "),a("h3",{attrs:{id:"镜像仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像仓库"}},[s._v("#")]),s._v(" 镜像仓库")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/build-docker-images-push/img_6.png",alt:"img_6.png",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"附件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#附件"}},[s._v("#")]),s._v(" 附件")]),s._v(" "),a("p",[a("strong",[s._v("DockerFile")])]),s._v(" "),a("div",{staticClass:"language-dockerfile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" openjdk:8")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" WORK_PATH=/home/jpom-test/")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" RUN_LOG=/home/jpom-test-log/")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" JAR_NAME=springboot-test-jar-0.0.1-SNAPSHOT.jar")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" CODE_DIR="),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${WORK_PATH}")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WORKDIR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${WORK_PATH}")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ADD  ./target/ .")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" ./target "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${WORK_PATH}")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" ./script/run.sh "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${WORK_PATH}")]),s._v("/run.sh")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXPOSE")]),s._v(" 8084")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#ENTRYPOINT [ "java","-Djava.security.egd=file:/dev/./urandom", "-jar","/${jarName}"]')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENTRYPOINT")]),s._v(" ["),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/home/jpom-test/run.sh"')]),s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])])])}),[],!1,null,null,null);a.default=r.exports},426:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("p",[s._v("Jpom 中的项目监控是判断项目的运行状态，项目的非 DSL 模式的运行状态又是通过 jps 查找进程 id 来判断项目是否在运行中，这样在一些项目假死的情况是无法监控到的")]),s._v(" "),a("p",[s._v("但是如何能监控到项目的假死状态（假死一般是 CPU 满了，项目无法正常响应处理其他任务、死锁等），一般项目都可以通过是否能正常访问到接口来判断当前项目的状态或者项目的负载情况，以及接口里面可以自动判断条件来决定项目状态")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("本文主要介绍如果使用 DSL 模式的项目来实现接口探活管理项目运行状态并且监控到异常发送邮件通知")])]),s._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("😋")]),s._v(" "),a("p",[s._v("本文是基于"),a("RouterLink",{attrs:{to:"/pages/ac7b66/"}},[a("code",[s._v("DSL项目接口探活")])]),s._v("实践案例来介绍，查看当前案例前请查阅 "),a("RouterLink",{attrs:{to:"/pages/ac7b66/"}},[s._v("DSL项目接口探活")]),s._v(" 案例")],1)]),s._v(" "),a("h2",{attrs:{id:"需要准备的环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需要准备的环境"}},[s._v("#")]),s._v(" 需要准备的环境")]),s._v(" "),a("ol",[a("li",[s._v("Jpom 服务端\n"),a("ol",[a("li",[s._v("安装 jpom 需要 java 环境")]),s._v(" "),a("li",[s._v("构建需要 maven 环境")])])]),s._v(" "),a("li",[s._v("Jpom 插件端\n"),a("ol",[a("li",[s._v("安装 jpom 需要 java 环境")])])]),s._v(" "),a("li",[s._v("一个代码仓库（案例中使用 java 项目）")]),s._v(" "),a("li",[s._v("一个邮件发送账号")])]),s._v(" "),a("h2",{attrs:{id:"项目的初始化配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目的初始化配置"}},[s._v("#")]),s._v(" 项目的初始化配置")]),s._v(" "),a("p",[s._v("配置细节请参考："),a("RouterLink",{attrs:{to:"/pages/ac7b66/"}},[s._v("DSL项目接口探活")])],1),s._v(" "),a("h3",{attrs:{id:"dsl-脚本示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dsl-脚本示例"}},[s._v("#")]),s._v(" DSL 脚本示例")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Tag")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Application_'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${PROJECT_ID}")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MainClass")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"org.springframework.boot.loader.JarLauncher"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Lib")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${PROJECT_PATH}")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Log")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${PROJECT_PATH}")]),s._v('/run.log"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("JVM")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-server -Xms128m -Xmx128m -XX:PermSize=32M -XX:MaxNewSize=64m -XX:MaxPermSize=64m -Djava.awt.headless=true -XX:+CMSClassUnloadingEnabled -XX:+CMSPermGenSweepingEnabled"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TestUrl")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://127.0.0.1:8084/random-sleep?max=3"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Tag")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RETVAL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# See how we were called.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 先停止")]),s._v("\n    stop\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Log")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Log")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Log")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("java")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JVM")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Dappliction")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Tag")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Djava.ext.dirs")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Lib")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('":'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${JAVA_HOME}")]),s._v('/jre/lib/ext"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$MainClass")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Log")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("head")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$Log")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("stop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ef")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'grep'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("egrep")]),s._v(" $Tag"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{printf $2 \" \"}'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pid")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("      \n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"boot ( pid '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pid")]),s._v(') is running"')]),s._v(" \n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" \n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" $"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Shutting down boot: "')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ef")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'grep'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("egrep")]),s._v(" $Tag"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{printf $2 \" \"}'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pid")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kill boot process"')]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-9")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pid")]),s._v('"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" \n             "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"boot is stopped"')]),s._v(" \n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n    status\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("get_json_value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("json")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$2")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("value")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${json}")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-F")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[{,:}]"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{for(i=1;i<=NF;i++){if($i~\"'")]),s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\"){print $(i+1)}}}'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/\\\"//g'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${value}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("status")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  这里的端口或者url 路径需要跟进您的项目端口和获取项目状态的接口来定")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("result_msg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-X")]),s._v(" GET "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--header")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Accept: application/json'")]),s._v(" --connect-timeout "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" $TestUrl"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#echo $result_msg")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"running:'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("get_json_value "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${result_msg}")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"data"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# See how we were called.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RETVAL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n    start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        start\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    stop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        stop\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        status\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    *"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n      usage\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("esac")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$RETVAL")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br")])]),a("p",[s._v("说明：这里为了复现假死状态，特意模拟了休眠时间，并且将超时时间修改为 2 秒，实际使用中请修改为自己业务的端口和接口地址，以及超时时间")]),s._v(" "),a("blockquote",[a("p",[s._v("curl 请求超时时间不要过长，建议控制在 1 秒。因为获取项目状态是串行执行，如果单个项目 status 执行耗时过大会影响查看节点项目状态相关功能")])]),s._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("补充说明")]),s._v(" "),a("p",[s._v("在 Jpom 中，重启流程看下图。在一些极端情况下，可能出现已经无法监控到运行状态了，但是项目进程还存在。这样如果直接执行启动很大可能出现项目端口被占用的情况。目前建议在 DSL 脚本的 start 方法中手动调用一下 stop（后续版本会优化此流程）")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/restart-steps.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"配置邮件发送信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置邮件发送信息"}},[s._v("#")]),s._v(" 配置邮件发送信息")]),s._v(" "),a("h3",{attrs:{id:"配置邮件发件人"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置邮件发件人"}},[s._v("#")]),s._v(" 配置邮件发件人")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/monitor-notice/img15.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("p",[s._v("注意：密码一般为授权码并发邮件的登陆密码，这里使用 QQ 邮箱为例，不同平台获取邮箱授权码方式不一样，实际使用中可以在搜索引擎中搜索查看生成邮箱授权码方法")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/monitor-notice/img16.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"配置监控信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置监控信息"}},[s._v("#")]),s._v(" 配置监控信息")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/dsl_curl_java/2img.png",alt:"img.png",loading:"lazy"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/dsl_curl_java/2img_1.png",alt:"img_1.png",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"愉快使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#愉快使用"}},[s._v("#")]),s._v(" 愉快使用")]),s._v(" "),a("p",[s._v("这样就实现使用接口来探活监控项目状态并且可以邮件报警等，更多配置效果等您来发现！")])])}),[],!1,null,null,null);a.default=r.exports},427:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("blockquote",[a("p",[s._v("本文主要介绍：\n如何从零开始使用 Jpom 中的节点项目管理+脚本管理实现自定义管理 Java 项目（自定义启动项目，停止，查状态）")]),s._v(" "),a("p",[s._v("本文中服务端和插件端是安装在同一个服务器中的，实际操作时根据业务情况来安装")]),s._v(" "),a("p",[s._v("文中使用到的依赖环境版本仅供参考，实际使用中请根据业务情况来安装对应的版本")])]),s._v(" "),a("blockquote",[a("p",[s._v("注意：本文采用一键安装同时基于 2.8.8 版本讲解,系统为 ubuntu")])]),s._v(" "),a("h2",{attrs:{id:"需要准备的环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需要准备的环境"}},[s._v("#")]),s._v(" 需要准备的环境")]),s._v(" "),a("ol",[a("li",[s._v("Jpom 服务端、Jpom 插件端（安装 jpom 需要 java 环境）")])]),s._v(" "),a("h2",{attrs:{id:"安装服务端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装服务端"}},[s._v("#")]),s._v(" 安装服务端")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 提前创建好文件夹 并且切换到对应到文件夹执行命令\nmkdir -p /home/jpom/server/\ncd /home/jpom/server/\napt-get install -y wget && wget -O install.sh https://jpom.top/docs/install.sh && bash install.sh Server jdk\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/install1.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/install2.png",alt:"install2",loading:"lazy"}})]),s._v(" "),a("h3",{attrs:{id:"初始化服务端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初始化服务端"}},[s._v("#")]),s._v(" 初始化服务端")]),s._v(" "),a("h4",{attrs:{id:"添加超级管理账号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加超级管理账号"}},[s._v("#")]),s._v(" 添加超级管理账号")]),s._v(" "),a("blockquote",[a("p",[s._v("添加一个超级管理员账号，请妥善保管此账号同时请设置安全度较强的密码")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/inits1.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("h4",{attrs:{id:"开启账号-mfa"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开启账号-mfa"}},[s._v("#")]),s._v(" 开启账号 MFA")]),s._v(" "),a("blockquote",[a("p",[s._v("为了系统安全，强烈建议超级管理员账号开启 MFA 两步验证")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/inits2.png",alt:"install2",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"安装插件端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装插件端"}},[s._v("#")]),s._v(" 安装插件端")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 提前创建好文件夹 并且切换到对应到文件夹执行命令\nmkdir -p /home/jpom/agent/\ncd /home/jpom/agent/\napt-get install -y wget && wget -O install.sh https://jpom.top/docs/install.sh && bash install.sh Agent jdk\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/install-agent1.png",alt:"install1",loading:"lazy"}}),s._v(" "),a("img",{attrs:{src:"/images/tutorial/project_dsl_java/install-agent2.png",alt:"install2",loading:"lazy"}})]),s._v(" "),a("h3",{attrs:{id:"添加节点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加节点"}},[s._v("#")]),s._v(" 添加节点")]),s._v(" "),a("p",[s._v("注意要填写端口号哟")]),s._v(" "),a("p",[s._v("这里的节点账号密码和超级管理员账号密码是两个东西哟")]),s._v(" "),a("p",[s._v("节点账号密码在安装启动成功后会输出到控制台，请根据输出到内容填写。如果自己修改了账号密码则填写修改后的")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/inita1.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("h3",{attrs:{id:"配置授权-白名单"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置授权-白名单"}},[s._v("#")]),s._v(" 配置授权（白名单）")]),s._v(" "),a("p",[s._v("项目授权（白名单）是为了防止随意配置目录，同时也为了保护系统目录")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/inita2.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"创建脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建脚本"}},[s._v("#")]),s._v(" 创建脚本")]),s._v(" "),a("p",[s._v("注意："),a("code",[s._v("Ubuntu/Debian")]),s._v(" 执行脚本如果出现错误\n"),a("code",[s._v('Syntax error: "(" unexpected')]),s._v("\n代码对于标准bash而言没有错，因为 "),a("code",[s._v("Ubuntu/Debian")]),s._v(" 为了加快开机速度，用dash代替了传统的bash，是dash在捣鬼。")]),s._v(" "),a("p",[s._v("解决方法: 就是取消"),a("code",[s._v("dash")])]),s._v(" "),a("p",[s._v("执行："),a("code",[s._v("sudo dpkg-reconfigure dash")]),s._v(" 在选择项中选No，搞定了！")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/add-script1.png",alt:"install1",loading:"lazy"}}),s._v(" "),a("img",{attrs:{src:"/images/tutorial/project_dsl_java/add-script2.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("p",[s._v("脚本内容：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('#!/bin/bash\nTag="Application_${PROJECT_ID}"\nMainClass="org.springframework.boot.loader.JarLauncher"\nLib="${PROJECT_PATH}"\nLog="${PROJECT_PATH}/run.log"\nJVM="-server -Xms128m -Xmx128m -XX:PermSize=32M -XX:MaxNewSize=64m -XX:MaxPermSize=64m -Djava.awt.headless=true -XX:+CMSClassUnloadingEnabled -XX:+CMSPermGenSweepingEnabled"\necho $Tag\nRETVAL="0"\n\n# See how we were called.\nfunction start() {\n    echo  $Log \n    if [ ! -f $Log ]; then\n        touch $Log\n    fi\n    nohup java $JVM -Dappliction=$Tag -Djava.ext.dirs=$Lib":${JAVA_HOME}/jre/lib/ext" $MainClass > $Log 2>&1 &\n\tsleep 3\n    head -n 10 $Log\n}\n\n\nfunction stop() {\n    pid=$(ps -ef | grep -v \'grep\' | egrep $Tag| awk \'{printf $2 " "}\')\n    if [ "$pid" != "" ]; then      \n        echo -n "boot ( pid $pid) is running" \n        echo \n        echo -n $"Shutting down boot: "\n        pid=$(ps -ef | grep -v \'grep\' | egrep $Tag| awk \'{printf $2 " "}\')\n        if [ "$pid" != "" ]; then\n            echo "kill boot process"\n            kill -9 "$pid"\n        fi\n        else \n             echo "boot is stopped" \n        fi\n\n    status\n}\n\nfunction status()\n{\n    pid=$(ps -ef | grep -v \'grep\' | egrep $Tag| awk \'{printf $2 " "}\')\n    #echo "$pid"\n    if [ "$pid" != "" ]; then\n        echo "running:$pid"\n    else\n        echo "boot is stopped"\n    fi\n}\n\n# See how we were called.\nRETVAL="0"\ncase "$1" in\n    start)\n        start\n        ;;\n    stop)\n        stop\n        ;;\n    status)\n        status\n        ;;\n    *)\n      usage\n      ;;\nesac\n\nexit $RETVAL\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br")])]),a("blockquote",[a("ol",[a("li",[a("p",[s._v("脚本里面至少需要实现的三件事："),a("strong",[s._v("启动")]),s._v("、"),a("strong",[s._v("停止")]),s._v("、"),a("strong",[s._v("查状态")])])]),s._v(" "),a("li",[a("p",[s._v("查状态输出最后一行需要是 "),a("code",[s._v("running:$pid")]),s._v(" $pid 必须为数字且表示当前项目的进程 id ，如果不匹配项目则显示未运行")])])])]),s._v(" "),a("p",[s._v("提供的示例里面将使用三个函数来实现：start、stop、status")]),s._v(" "),a("p",[s._v("里面的细节这里不过多的说明，可以自由发挥（给您足够的空间）")]),s._v(" "),a("p",[s._v("脚本里面支持的变量有：${PROJECT_ID}、${PROJECT_NAME}、${PROJECT_PATH}")]),s._v(" "),a("p",[s._v("如果多个项目管理方式相同，脚本模版可以重复使用奥（并非一个项目对应一个脚本模版）")]),s._v(" "),a("p",[s._v("更多脚本示例："),a("RouterLink",{attrs:{to:"/FQA/DSL.html"}},[s._v("✈️进入>>")])],1),s._v(" "),a("h2",{attrs:{id:"创建项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建项目"}},[s._v("#")]),s._v(" 创建项目")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/add-project1.png",alt:"install1",loading:"lazy"}}),s._v(" "),a("img",{attrs:{src:"/images/tutorial/project_dsl_java/add-project2.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("p",[s._v("注意：")]),s._v(" "),a("ol",[a("li",[s._v("scriptArgs 为对应环节执行脚本传入的参数,这里可以使用空格隔空传入多个参数")]),s._v(" "),a("li",[s._v("scriptId 需要填写当前节点里面存在的脚本的 id,脚本ID 可以在编辑脚本弹窗里面查看，如下图")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/edit-script3.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("h3",{attrs:{id:"上传项目文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#上传项目文件"}},[s._v("#")]),s._v(" 上传项目文件")]),s._v(" "),a("blockquote",[a("p",[s._v("启动项目需要将文件上传到项目目录，这里我们上传一个简单的 SpringBoot 项目")]),s._v(" "),a("p",[s._v("注意：项目里面可以在脚本中 使用 "),a("code",[s._v("${PROJECT_PATH}")]),s._v(" 获取")])]),s._v(" "),a("blockquote",[a("p",[s._v("使用小技巧：上传项目文件非必要操作，这里根据脚本内容里面执行的细节来决定是否需要上传，当然您脚本里面可以使用其他目录只不过这个目录就没有跟随当前项目管理而已")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/upload-file1.png",alt:"install1",loading:"lazy"}}),s._v(" "),a("img",{attrs:{src:"/images/tutorial/project_dsl_java/upload-file2.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("h3",{attrs:{id:"启动项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动项目"}},[s._v("#")]),s._v(" 启动项目")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/console1.png",alt:"install1",loading:"lazy"}}),s._v(" "),a("img",{attrs:{src:"/images/tutorial/project_dsl_java/console2.png",alt:"install1",loading:"lazy"}}),s._v(" "),a("img",{attrs:{src:"/images/tutorial/project_dsl_java/contsole3.png",alt:"install1",loading:"lazy"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/project_dsl_java/project-list1.png",alt:"install1",loading:"lazy"}})])])}),[],!1,null,null,null);a.default=r.exports},430:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("blockquote",[a("p",[s._v("本文主要介绍：")]),s._v(" "),a("p",[s._v("如何使用 Jpom 中的节点脚本实现定时备份 docker 容器中的 mysql 数据到物理机中")]),s._v(" "),a("p",[s._v("文中使用到的依赖环境版本仅供参考，实际使用中请根据业务情况来安装对应的版本")])]),s._v(" "),a("blockquote",[a("p",[s._v("注意：本文默认已经认为您已经安装好 Jpom 服务端并且配置节点")])]),s._v(" "),a("h2",{attrs:{id:"需要准备的环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需要准备的环境"}},[s._v("#")]),s._v(" 需要准备的环境")]),s._v(" "),a("blockquote",[a("p",[s._v("环境准备请自行查阅 Jpom 安装相关文档准备奥")])]),s._v(" "),a("ol",[a("li",[s._v("Jpom 服务端、")]),s._v(" "),a("li",[s._v("Jpom 插件端")]),s._v(" "),a("li",[s._v("插件端所在到服务器中安装 docker 并且运行了 mysql 容器")])]),s._v(" "),a("h2",{attrs:{id:"创建脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建脚本"}},[s._v("#")]),s._v(" 创建脚本")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/node-script-backup-docker-mysql/img.png",alt:"img",loading:"lazy"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/node-script-backup-docker-mysql/img_1.png",alt:"img",loading:"lazy"}})]),s._v(" "),a("h3",{attrs:{id:"脚本内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#脚本内容"}},[s._v("#")]),s._v(" 脚本内容")]),s._v(" "),a("p",[s._v("注意：您需要根据自己的情况修改如下信息")]),s._v(" "),a("ul",[a("li",[s._v("sql 文件保存路径")]),s._v(" "),a("li",[s._v("mysql 容器名称")]),s._v(" "),a("li",[s._v("mysql 数据库密码")]),s._v(" "),a("li",[s._v("备份全部数据库还是指定数据库")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'开始备份数据'")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("now")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"+%Y%m%d_%H:%M:%S"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("backup_dir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/data/back_up"')]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#获取容器id")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mysqlid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-aqf")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name=xxx-mysql"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入mysql容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${mysqlid}")]),s._v(" bash"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'EOF'\n \n#mysqldump导出表结构和数据\nif [ ! -d \"/backup\" ]; then\n    mkdir -p /backup\nfi\n \nif [ -f \"/backup/db.sql\" ]; then\n    rm -rf /backup/db.sql\nfi\n \nmysqldump --single-transaction -u root -h 127.0.0.1 --password=xxxxx --all-databases > /backup/db.sql\n \necho '成功制作备份sql'\n \nif [ $? -ne 0 ]; then\n    echo 'mysqldump运行失败'\n    exit\n    EOF\nfi\n \nexit\n \nEOF")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#将容器内sql文件导出到服务器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${backup_dir}")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${backup_dir}")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${mysqlid}")]),s._v(":/backup/db.sql "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${backup_dir}")]),s._v("/db_"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${now}")]),s._v(".sql\n \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ne")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'docker cp文件失败'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'完成备份数据，压缩'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("filename")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"db_'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${now}")]),s._v('.sql"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("tarfilename")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"db_'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${now}")]),s._v('.sql.tar.gz"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("reulst")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--totals")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-czPf")]),s._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("backup_dir"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("/$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("tarfilename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("backup_dir"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("/$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"压缩完成：'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${reulst}")]),s._v('"')]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${backup_dir}")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${filename}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br")])]),a("h3",{attrs:{id:"脚本整体流程是"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#脚本整体流程是"}},[s._v("#")]),s._v(" 脚本整体流程是")]),s._v(" "),a("ol",[a("li",[s._v("进入容器 bash 终端")]),s._v(" "),a("li",[s._v("使用 mysqldump 导出数据")]),s._v(" "),a("li",[s._v("将导出到 sql 文件进行压缩")]),s._v(" "),a("li",[s._v("删除备份出到 sql 文件,保留 tar.gz 文件")])]),s._v(" "),a("p",[s._v("这里定时是一小时一次,具体可以跟进自己业务调整")]),s._v(" "),a("h2",{attrs:{id:"查看执行记录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看执行记录"}},[s._v("#")]),s._v(" 查看执行记录")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/node-script-backup-docker-mysql/img_2.png",alt:"img",loading:"lazy"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/tutorial/node-script-backup-docker-mysql/img_3.png",alt:"img",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"备份完成后想上传到其他地方"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#备份完成后想上传到其他地方"}},[s._v("#")]),s._v(" 备份完成后想上传到其他地方？")]),s._v(" "),a("p",[s._v("在到处 sql 文件后可以继续执行您想要的操作，如：使用 scp 上传到其他服务器中")]),s._v(" "),a("p",[s._v("命令示例：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'开始备份数据'")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("now")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"+%Y%m%d_%H:%M:%S"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("backup_dir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/data/back_up"')]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#获取容器id")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mysqlid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-aqf")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name=xxxx-mysql"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#进入mysql容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${mysqlid}")]),s._v(" bash"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'EOF'\n \n#mysqldump导出表结构和数据\nif [ ! -d \"/backup\" ]; then\n    mkdir -p /backup\nfi\n \nif [ -f \"/backup/db.sql\" ]; then\n    rm -rf /backup/db.sql\nfi\n \nmysqldump --single-transaction -u root -h 127.0.0.1 --password=xxxxx --all-databases > /backup/db.sql\n \necho '成功制作备份sql'\n \nif [ $? -ne 0 ]; then\n    echo 'mysqldump运行失败'\n    exit\n    EOF\nfi\n \nexit\n \nEOF")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#将容器内sql文件导出到服务器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${backup_dir}")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${backup_dir}")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${mysqlid}")]),s._v(":/backup/db.sql "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${backup_dir}")]),s._v("/db_"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${now}")]),s._v(".sql\n \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ne")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'docker cp文件失败'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'完成备份数据，压缩+开始转移服务器'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("filename")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"db_'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${now}")]),s._v('.sql"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("tarfilename")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"db_'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${now}")]),s._v('.sql.tar.gz"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("reulst")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--totals")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-czPf")]),s._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("backup_dir"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("/$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("tarfilename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("backup_dir"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("/$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"压缩完成：'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${reulst}")]),s._v('"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'scp to staring'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${backup_dir}")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${tarfilename}")]),s._v("   root@172.19.106.253:/data/mysql/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${tarfilename}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'scp to done'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${backup_dir}")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${filename}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${backup_dir}")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${tarfilename}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br")])]),a("p",[s._v("注意：您需要根据自己的情况修改如下信息")]),s._v(" "),a("ul",[a("li",[s._v("sql 文件保存路径")]),s._v(" "),a("li",[s._v("mysql 容器名称")]),s._v(" "),a("li",[s._v("mysql 数据库密码")]),s._v(" "),a("li",[s._v("备份全部数据库还是指定数据库")]),s._v(" "),a("li",[s._v("scp 到到服务器 IP （需要提前配置 SSH 信任链接）")])]),s._v(" "),a("h2",{attrs:{id:"完美实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#完美实现"}},[s._v("#")]),s._v(" 完美实现")]),s._v(" "),a("p",[s._v("节点脚本可以使用如下方式执行：")]),s._v(" "),a("ol",[a("li",[s._v("定时执行")]),s._v(" "),a("li",[s._v("手动执行")]),s._v(" "),a("li",[s._v("webhook 触发器（钩子）外部调用")])]),s._v(" "),a("p",[s._v("您可以根据您到业务需求来搭配不同方式执行")])])}),[],!1,null,null,null);a.default=r.exports},439:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){return(0,this._self._c)("ContentSlotsDistributor",{attrs:{"slot-key":this.$parent.slotKey}})}),[],!1,null,null,null);a.default=r.exports},445:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":this.$parent.slotKey}},[s("blockquote",[s("p",[this._v("选择进入指定年份")])])])}),[],!1,null,null,null);a.default=r.exports},474:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("p",[s._v("一键安装仅支持 linux 系统、并且需要安装的服务器有公网能力才行奥")]),s._v(" "),a("p",[s._v("如果您期望在安装过程中修改一部分配置或者自定义安装我们不建议您使用一键安装")]),s._v(" "),a("p",[s._v("一键安装脚本默认使用 Jpom 稳定版")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("p",[s._v("Server端和Agent端不可安装在同一目录下，因为两个程序数据目录会使用到同一个文件夹/文件会造成数据错乱")])]),s._v(" "),a("h2",{attrs:{id:"安装服务端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装服务端"}},[s._v("#")]),s._v(" 安装服务端")]),s._v(" "),a("h3",{attrs:{id:"默认安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#默认安装"}},[s._v("#")]),s._v(" 默认安装")]),s._v(" "),a("p",[s._v("默认安装是将服务端安装到默认位置："),a("code",[s._v("/usr/local/jpom-server/")])]),s._v(" "),a("h4",{attrs:{id:"有-jdk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#有-jdk"}},[s._v("#")]),s._v(" 有 JDK")]),s._v(" "),a("p",[s._v("系统中已经有 JDK 并且配置环境变量、使用默认路径安装（注意：需要有 sudo 权限、建议在 root 用户使用）")]),s._v(" "),a("p",[s._v("默认安装路径："),a("code",[s._v("/usr/local/jpom-server/")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-fsSL")]),s._v(" https://jpom.top/docs/install.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" Server default\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"无-jdk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#无-jdk"}},[s._v("#")]),s._v(" 无 JDK")]),s._v(" "),a("p",[s._v("系统中没有 JDK、期望自动安装 JDK8、使用默认路径安装（注意：服务器需要有公网下使用）")]),s._v(" "),a("p",[s._v("Jpom 服务端默认安装路径："),a("code",[s._v("/usr/local/jpom-server/")]),s._v("\nJDK 默认安装路径："),a("code",[s._v("/usr/java/xxxx")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-fsSL")]),s._v(" https://jpom.top/docs/install.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" Server jdk+default\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"自动安装服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自动安装服务"}},[s._v("#")]),s._v(" 自动安装服务")]),s._v(" "),a("p",[s._v("期望自动将服务端注册到系统服务中，来达到开机自启动或者用服务的方式来管理")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-fsSL")]),s._v(" https://jpom.top/docs/install.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" Server jdk+default+service\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("提醒")]),s._v(" "),a("p",[s._v("如果您安装的服务端没有 sudo 或者 root 权限我们不建议您使用默认安装方式来安装")])]),s._v(" "),a("h3",{attrs:{id:"自定义安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义安装"}},[s._v("#")]),s._v(" 自定义安装")]),s._v(" "),a("p",[s._v("自定义安装会在安装过程中询问您将软件按到指定目录")]),s._v(" "),a("h4",{attrs:{id:"有-jdk-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#有-jdk-2"}},[s._v("#")]),s._v(" 有 JDK")]),s._v(" "),a("p",[s._v("系统中已经有 JDK 并且配置环境变量")]),s._v(" "),a("code-group",[a("code-block",{attrs:{title:"centos",active:""}},[a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-O")]),s._v(" install.sh https://jpom.top/docs/install.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" install.sh Server\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("code-block",{attrs:{title:"ubuntu\\debian"}},[a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-O")]),s._v(" install.sh https://jpom.top/docs/install.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" install.sh Server\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])],1),s._v(" "),a("h4",{attrs:{id:"无-jdk-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#无-jdk-2"}},[s._v("#")]),s._v(" 无 JDK")]),s._v(" "),a("p",[s._v("系统中没有 JDK、期望自动安装 JDK8")]),s._v(" "),a("code-group",[a("code-block",{attrs:{title:"centos",active:""}},[a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-O")]),s._v(" install.sh https://jpom.top/docs/install.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" install.sh Server jdk\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("code-block",{attrs:{title:"ubuntu\\debian"}},[a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-O")]),s._v(" install.sh https://jpom.top/docs/install.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" install.sh Server jdk\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])],1),s._v(" "),a("h4",{attrs:{id:"自动安装服务-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自动安装服务-2"}},[s._v("#")]),s._v(" 自动安装服务")]),s._v(" "),a("p",[s._v("期望自动将 Jpom 服务端注册到系统服务中，来达到开机自启动或者用服务的方式来管理")]),s._v(" "),a("code-group",[a("code-block",{attrs:{title:"centos",active:""}},[a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-O")]),s._v(" install.sh https://jpom.top/docs/install.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" install.sh Server jdk+service\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("code-block",{attrs:{title:"ubuntu\\debian"}},[a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-O")]),s._v(" install.sh https://jpom.top/docs/install.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" install.sh Server jdk+service\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])],1),s._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("提醒")]),s._v(" "),a("p",[s._v("如果需要注册服务需要在 sudo 或者 root 条件下执行")])]),s._v(" "),a("h2",{attrs:{id:"插件端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插件端"}},[s._v("#")]),s._v(" 插件端")]),s._v(" "),a("h3",{attrs:{id:"默认安装-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#默认安装-2"}},[s._v("#")]),s._v(" 默认安装")]),s._v(" "),a("p",[s._v("默认安装是将插件端安装到默认位置："),a("code",[s._v("/usr/local/jpom-agent/")])]),s._v(" "),a("h4",{attrs:{id:"有-jdk-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#有-jdk-3"}},[s._v("#")]),s._v(" 有 JDK")]),s._v(" "),a("p",[s._v("系统中已经有 JDK 并且配置环境变量、使用默认路径安装（注意：需要有 sudo 权限、建议在 root 用户使用）")]),s._v(" "),a("p",[s._v("默认安装路径："),a("code",[s._v("/usr/local/jpom-agent/")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-fsSL")]),s._v(" https://jpom.top/docs/install.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" Agent default\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"无-jdk-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#无-jdk-3"}},[s._v("#")]),s._v(" 无 JDK")]),s._v(" "),a("p",[s._v("系统中没有 JDK、期望自动安装 JDK8、使用默认路径安装（注意：服务器需要有公网下使用）")]),s._v(" "),a("p",[s._v("Jpom 服务端默认安装路径："),a("code",[s._v("/usr/local/jpom-agent/")]),s._v("\nJDK 默认安装路径："),a("code",[s._v("/usr/java/xxxx")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-fsSL")]),s._v(" https://jpom.top/docs/install.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" Agent jdk+default\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"自动安装服务-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自动安装服务-3"}},[s._v("#")]),s._v(" 自动安装服务")]),s._v(" "),a("p",[s._v("期望自动将插件端注册到系统服务中，来达到开机自启动或者用服务的方式来管理")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-fsSL")]),s._v(" https://jpom.top/docs/install.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" Agent jdk+default+service\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("提醒")]),s._v(" "),a("p",[s._v("如果您安装的服务端没有 sudo 或者 root 权限我们不建议您使用默认安装方式来安装")])]),s._v(" "),a("h3",{attrs:{id:"自定义安装-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义安装-2"}},[s._v("#")]),s._v(" 自定义安装")]),s._v(" "),a("p",[s._v("自定义安装会在安装过程中询问您将软件按到指定目录")]),s._v(" "),a("h4",{attrs:{id:"有-jdk-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#有-jdk-4"}},[s._v("#")]),s._v(" 有 JDK")]),s._v(" "),a("p",[s._v("系统中已经有 JDK 并且配置环境变量")]),s._v(" "),a("code-group",[a("code-block",{attrs:{title:"centos",active:""}},[a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-O")]),s._v(" install.sh https://jpom.top/docs/install.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" install.sh Agent\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("code-block",{attrs:{title:"ubuntu\\debian"}},[a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-O")]),s._v(" install.sh https://jpom.top/docs/install.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" install.sh Agent\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])],1),s._v(" "),a("h4",{attrs:{id:"无-jdk-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#无-jdk-4"}},[s._v("#")]),s._v(" 无 JDK")]),s._v(" "),a("p",[s._v("系统中没有 JDK、期望自动安装 JDK8")]),s._v(" "),a("code-group",[a("code-block",{attrs:{title:"centos",active:""}},[a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-O")]),s._v(" install.sh https://jpom.top/docs/install.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" install.sh Agent jdk\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("code-block",{attrs:{title:"ubuntu\\debian"}},[a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-O")]),s._v(" install.sh https://jpom.top/docs/install.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" install.sh Agent jdk\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])],1),s._v(" "),a("h4",{attrs:{id:"自动安装服务-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自动安装服务-4"}},[s._v("#")]),s._v(" 自动安装服务")]),s._v(" "),a("p",[s._v("期望自动将 Jpom 服务端注册到系统服务中，来达到开机自启动或者用服务的方式来管理")]),s._v(" "),a("code-group",[a("code-block",{attrs:{title:"centos",active:""}},[a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-O")]),s._v(" install.sh https://jpom.top/docs/install.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" install.sh Agent jdk+service\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("code-block",{attrs:{title:"ubuntu\\debian"}},[a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-O")]),s._v(" install.sh https://jpom.top/docs/install.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" install.sh Agent jdk+service\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])],1),s._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("提醒")]),s._v(" "),a("p",[s._v("如果需要注册服务需要在 sudo 或者 root 条件下执行")])]),s._v(" "),a("h2",{attrs:{id:"温馨提示"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#温馨提示"}},[s._v("#")]),s._v(" 温馨提示")]),s._v(" "),a("p",[s._v("如果您使用了一键安装依赖插件："),a("code",[s._v("jdk")]),s._v("、"),a("code",[s._v("node")]),s._v("、"),a("code",[s._v("maven")]),s._v("。")]),s._v(" "),a("p",[s._v("安装成功后您在终端里面使用相应的命令是不生效的奥。")]),s._v(" "),a("p",[s._v("您需要手动 "),a("code",[s._v("source")]),s._v(" 一下或者退出终端重新登录进入即可。")])],1)}),[],!1,null,null,null);a.default=r.exports},475:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("p",[s._v("编译安装是需要有一定开发经验才能使用的方式奥，作为开源项目不能保证在您自己的环境中可以正常编译运行。")]),s._v(" "),a("p",[s._v("编译期间遇到问题请优先考虑自己环境问题")]),s._v(" "),a("h2",{attrs:{id:"编译安装-打包安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编译安装-打包安装"}},[s._v("#")]),s._v(" 编译安装（打包安装）")]),s._v(" "),a("blockquote",[a("p",[s._v("此方式为用户下载最新源码或者定制功能后编译打包安装的方式")])]),s._v(" "),a("ol",[a("li",[s._v("访问 "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom",target:"_blank",rel:"noopener noreferrer"}},[s._v("Jpom"),a("OutboundLink")],1),s._v(" 的码云主页,拉取最新完整代码(建议使用master分支)")]),s._v(" "),a("li",[s._v("切换到"),a("code",[s._v("web-vue")]),s._v("目录 执行"),a("code",[s._v("npm install")]),s._v(" (vue环境需要提前搭建和安装依赖包详情可以查看web-vue目录下README.md)")]),s._v(" "),a("li",[s._v("执行"),a("code",[s._v("npm run build")]),s._v("进行vue项目打包(vue环境需要提前搭建和安装依赖包详情可以查看web-vue目录下README.md)")]),s._v(" "),a("li",[s._v("切换到项目根目录执行:"),a("code",[s._v("mvn clean package")])]),s._v(" "),a("li",[s._v("查看插件端安装包 modules/agent/target/agent-x.x.x-release")]),s._v(" "),a("li",[s._v("查看插件端安装包 modules/server/target/server-x.x.x-release")])]),s._v(" "),a("p",[s._v("有安装包后请查看下载安装的说明安装到服务器中")]),s._v(" "),a("h2",{attrs:{id:"编译运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编译运行"}},[s._v("#")]),s._v(" 编译运行")]),s._v(" "),a("ol",[a("li",[s._v("访问 "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom",target:"_blank",rel:"noopener noreferrer"}},[s._v("Jpom"),a("OutboundLink")],1),s._v(" 的码云主页,拉取最新完整代码(建议使用master分支、如果想体验新功能请使用dev分支)")]),s._v(" "),a("li",[s._v("运行插件端\n"),a("ol",[a("li",[s._v("运行"),a("code",[s._v("org.dromara.jpom.JpomAgentApplication")])]),s._v(" "),a("li",[s._v("注意控制台打印的默认账号密码信息")]),s._v(" "),a("li",[s._v("默认运行端口："),a("code",[s._v("2123")])])])]),s._v(" "),a("li",[s._v("运行服务端\n"),a("ol",[a("li",[s._v("运行"),a("code",[s._v("org.dromara.jpom.JpomServerApplication")])]),s._v(" "),a("li",[s._v("默认运行端口："),a("code",[s._v("2122")])])])]),s._v(" "),a("li",[s._v("构建vue页面 切换到"),a("code",[s._v("web-vue")]),s._v("目录（前提需要本地开发环境有node、npm环境）")]),s._v(" "),a("li",[s._v("安装项目vue依赖 控制台执行 "),a("code",[s._v("npm install")])]),s._v(" "),a("li",[s._v("启动开发模式 控制台执行 "),a("code",[s._v("npm run dev")])]),s._v(" "),a("li",[s._v("根据控制台输出的地址访问前端页面 例如"),a("code",[s._v("http://127.0.0.1:3000/")])])])])}),[],!1,null,null,null);a.default=r.exports},477:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("p",[s._v("Jpom 为大家提供了 docker 镜像方便大家快速安装。使用容器前提是您已经会使用 docker 才可以进行容器化安装奥。")]),s._v(" "),a("p",[s._v("容器安装仅支持 Jpom 的服务端，插件端还是需要使用原生方式安装（由于容器和宿主机环境隔离，而导致插件端的很多功能无法正常使用，因此对插件端容器化意义不大。）")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("p",[s._v("容器安装的方式禁用了在线构建中的本地构建，请大家使用容器构建来构建项目。")])]),s._v(" "),a("p",[s._v("如果您还未安装 docker 可以查看我们："),a("RouterLink",{attrs:{to:"/pages/b63dc5/"}},[s._v("安装 docker 文档")])],1),s._v(" "),a("h2",{attrs:{id:"一键安装-不推荐"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一键安装-不推荐"}},[s._v("#")]),s._v(" 一键安装（不推荐）")]),s._v(" "),a("p",[s._v("一键安装未挂载数据目录，如果容器删除那么 Jpom 中的数据也将自动删除")]),s._v(" "),a("ol",[a("li",[s._v("阿里云仓库")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2122")]),s._v(":2122 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" jpom-server "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always registry.cn-chengdu.aliyuncs.com/jpomdocker/jpom\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("dockerhub 仓库")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2122")]),s._v(":2122 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" jpom-server "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always jpomdocker/jpom\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"挂载安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#挂载安装"}},[s._v("#")]),s._v(" 挂载安装")]),s._v(" "),a("p",[s._v("假设将 Jpom 的数据、日志、配置相关存储到："),a("code",[s._v("/home/jpom-server/")]),s._v(" 目录")]),s._v(" "),a("tabs",{attrs:{options:{useUrlFragment:!1}}},[a("tab",{attrs:{name:"linux"}},[a("p",[s._v("阿里云仓库")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2122")]),s._v(":2122 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" jpom-server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /etc/localtime:/etc/localtime:ro "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /home/jpom-server/logs:/usr/local/jpom-server/logs "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /home/jpom-server/data:/usr/local/jpom-server/data "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /home/jpom-server/conf:/usr/local/jpom-server/conf "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\tregistry.cn-chengdu.aliyuncs.com/jpomdocker/jpom\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("dockerhub 仓库")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2122")]),s._v(":2122 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" jpom-server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /etc/localtime:/etc/localtime:ro "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /home/jpom-server/logs:/usr/local/jpom-server/logs "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /home/jpom-server/data:/usr/local/jpom-server/data "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /home/jpom-server/conf:/usr/local/jpom-server/conf "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\tjpomdocker/jpom\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])]),s._v(" "),a("tab",{attrs:{name:"windows"}},[a("p",[s._v("阿里云仓库")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2122")]),s._v(":2122 ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" jpom-server ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" D:/etc/localtime:/etc/localtime:ro ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" D:/home/jpom-server/logs:/usr/local/jpom-server/logs ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" D:/home/jpom-server/data:/usr/local/jpom-server/data ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" D:/home/jpom-server/conf:/usr/local/jpom-server/conf ^\n\tregistry.cn-chengdu.aliyuncs.com/jpomdocker/jpom\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("dockerhub 仓库")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2122")]),s._v(":2122 ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" jpom-server ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" D:/etc/localtime:/etc/localtime:ro ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" D:/home/jpom-server/logs:/usr/local/jpom-server/logs ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" D:/home/jpom-server/data:/usr/local/jpom-server/data ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" D:/home/jpom-server/conf:/usr/local/jpom-server/conf ^\n\tjpomdocker/jpom\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])])],1),s._v(" "),a("h2",{attrs:{id:"卷安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#卷安装"}},[s._v("#")]),s._v(" 卷安装")]),s._v(" "),a("p",[s._v("假设将 Jpom 的数据、日志、配置相关存储到名称为："),a("code",[s._v("jpom-server-xxxx")]),s._v(" 的容器卷中")]),s._v(" "),a("tabs",{attrs:{options:{useUrlFragment:!1}}},[a("tab",{attrs:{name:"linux"}},[a("p",[s._v("阿里云仓库")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume create jpom-server-data\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume create jpom-server-logs\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume create jpom-server-conf\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2122")]),s._v(":2122 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" jpom-server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /etc/localtime:/etc/localtime:ro "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" jpom-server-data:/usr/local/jpom-server/data "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" jpom-server-logs:/usr/local/jpom-server/logs "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" jpom-server-conf:/usr/local/jpom-server/conf "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\tregistry.cn-chengdu.aliyuncs.com/jpomdocker/jpom\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("dockerhub 仓库")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume create jpom-server-data\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume create jpom-server-logs\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume create jpom-server-conf\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2122")]),s._v(":2122 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" jpom-server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /etc/localtime:/etc/localtime:ro "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" jpom-server-data:/usr/local/jpom-server/data "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" jpom-server-logs:/usr/local/jpom-server/logs "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" jpom-server-conf:/usr/local/jpom-server/conf "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\tjpomdocker/jpom\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])])]),s._v(" "),a("tab",{attrs:{name:"windows"}},[a("p",[s._v("阿里云仓库")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume create jpom-server-data\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume create jpom-server-logs\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume create jpom-server-conf\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2122")]),s._v(":2122 ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" jpom-server ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /etc/localtime:/etc/localtime:ro ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" jpom-server-data:/usr/local/jpom-server/data ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" jpom-server-logs:/usr/local/jpom-server/logs ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" jpom-server-conf:/usr/local/jpom-server/conf ^\n\tregistry.cn-chengdu.aliyuncs.com/jpomdocker/jpom\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("dockerhub 仓库")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume create jpom-server-data\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume create jpom-server-logs\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" volume create jpom-server-conf\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2122")]),s._v(":2122 ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" jpom-server ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /etc/localtime:/etc/localtime:ro ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" jpom-server-data:/usr/local/jpom-server/data ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" jpom-server-logs:/usr/local/jpom-server/logs ^\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" jpom-server-conf:/usr/local/jpom-server/conf ^\n\tjpomdocker/jpom\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])])])],1),s._v(" "),a("h2",{attrs:{id:"支持自动管理-docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#支持自动管理-docker"}},[s._v("#")]),s._v(" 支持自动管理 Docker")]),s._v(" "),a("p",[s._v("使用上述方式创建的容器，在Jpom 中不能自动监测到本地 docker 服务，需要手动开源 "),a("code",[s._v("2375")]),s._v("端口并添加 docker 服务来实现管理本地 docker")]),s._v(" "),a("p",[s._v("但是如果想快速使用本地 docker 可以实现如下方式来创建容器实现在 Jpom 中添加本地 docker 服务")]),s._v(" "),a("h3",{attrs:{id:"linux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux"}},[s._v("#")]),s._v(" linux")]),s._v(" "),a("p",[s._v("阿里云仓库")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2122")]),s._v(":2122 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" jpom-server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /etc/localtime:/etc/localtime:ro "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /usr/bin/docker:/usr/bin/docker "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /var/run/docker.sock:/var/run/docker.sock "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /home/jpom-server/logs:/usr/local/jpom-server/logs "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /home/jpom-server/data:/usr/local/jpom-server/data "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /home/jpom-server/conf:/usr/local/jpom-server/conf "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\tregistry.cn-chengdu.aliyuncs.com/jpomdocker/jpom\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("dockerhub 仓库")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2122")]),s._v(":2122 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" jpom-server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /etc/localtime:/etc/localtime:ro "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /usr/bin/docker:/usr/bin/docker "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /var/run/docker.sock:/var/run/docker.sock "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /home/jpom-server/logs:/usr/local/jpom-server/logs "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /home/jpom-server/data:/usr/local/jpom-server/data "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /home/jpom-server/conf:/usr/local/jpom-server/conf "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\tjpomdocker/jpom\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h2",{attrs:{id:"补充说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#补充说明"}},[s._v("#")]),s._v(" 补充说明")]),s._v(" "),a("p",[s._v("在低版本 docker 中运行可能出现 ls: cannot access'/usr/local/jpom-server/lib/': Operation not permitted 错误，此时需要添加 --privileged 参数")]),s._v(" "),a("p",[s._v("如：docker run -p 2122:2122 --name jpom-server --restart=always jpomdocker/jpom --privileged")])],1)}),[],!1,null,null,null);a.default=r.exports},482:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("p",[s._v("配置 Jpom 反向代理需要注意如下几点：")]),s._v(" "),a("ul",[a("li",[s._v("开启 websocket")]),s._v(" "),a("li",[s._v("配置文件上传大小")]),s._v(" "),a("li",[s._v("如果使用了二级路径，需要配置二级路径")])]),s._v(" "),a("h2",{attrs:{id:"http-相关配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-相关配置"}},[s._v("#")]),s._v(" Http 相关配置")]),s._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[s._v("server "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("charset koi8"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("r"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    access_log  "),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/var/log/nginx/jpom.log")]),s._v(" main"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    listen       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    server_name  jpom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("xxxxxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    \n    location "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("{")]),s._v("\n        proxy_pass   "),a("span",{pre:!0,attrs:{class:"token url"}},[s._v("http://127.0.0.1:2122/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        proxy_set_header Host      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("host"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        proxy_set_header X"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Real"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("IP "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("remote_addr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        proxy_set_header X"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Forwarded"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("For "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("proxy_add_x_forwarded_for"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" iframe 重定向\n        proxy_set_header X"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Forwarded"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Proto "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("scheme"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        proxy_set_header X"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Forwarded"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Port "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("server_port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" 上传文件大小\n        client_max_body_size  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50000m")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        client_body_buffer_size "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("128k")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("  websocket 配置\n        proxy_set_header Upgrade "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("http_upgrade"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        proxy_set_header Connection "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"upgrade"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("  代理的二级路径配置 值填写nginx 中location的值  如 location "),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/test-path/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("  proxy_set_header Jpom"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ProxyPath      "),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/test-path/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("h2",{attrs:{id:"https-推荐配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#https-推荐配置"}},[s._v("#")]),s._v(" Https 推荐配置")]),s._v(" "),a("p",[s._v("注意 https 证书需要您自己生成")]),s._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[s._v("server "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("{")]),s._v("\n    listen "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    server_name jpom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("xxxxxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    access_log  "),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/var/log/nginx/jpom.log")]),s._v(" main"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    ssl on"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    ssl_certificate   "),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/etc/nginx/ssl/jpom-xxxxxx.pem")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    ssl_certificate_key  "),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/etc/nginx/ssl/jpom-xxxxxx.key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    ssl_session_timeout "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5m")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    ssl_ciphers ECDHE"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("RSA"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("AES128"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("GCM"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("SHA256"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("ECDHE"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("ECDH"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("AES"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("HIGH"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("aNULL"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("MD5"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("ADH"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("RC4"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    ssl_protocols TLSv1 TLSv1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("1 TLSv1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("2"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    ssl_prefer_server_ciphers on"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    \n    location "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("{")]),s._v("\n        proxy_pass   "),a("span",{pre:!0,attrs:{class:"token url"}},[s._v("http://127.0.0.1:2122/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" 代理的二级路径配置 值填写nginx 中location的值  如 location "),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/test-path/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("}")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" proxy_set_header Jpom"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ProxyPath      "),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/test-path/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        proxy_set_header Host      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("host"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        proxy_set_header X"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Real"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("IP "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("remote_addr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        proxy_set_header X"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Forwarded"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("For "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("proxy_add_x_forwarded_for"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" iframe 重定向\n        proxy_set_header X"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Forwarded"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Proto "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("scheme"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        proxy_set_header X"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Forwarded"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Port "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("server_port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        client_max_body_size  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50000m")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        client_body_buffer_size "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("128k")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("\twebsocket 配置\n        proxy_set_header Upgrade "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("http_upgrade"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        proxy_set_header Connection "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"upgrade"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("}")]),s._v("\n\nserver "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("charset koi8"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("r"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    listen       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    server_name  jpom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("xxxxxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    rewrite "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token url"}},[s._v("https://$host$1")]),s._v(" permanent"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br")])]),a("h2",{attrs:{id:"二级路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二级路径"}},[s._v("#")]),s._v(" 二级路径")]),s._v(" "),a("p",[s._v("如果您需要使用二级路径，那么需要配置二级路径。")]),s._v(" "),a("p",[s._v("https://abc.xxxxxx.cn/jpom/")]),s._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[s._v("server "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("{")]),s._v("\n    listen "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    server_name abc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("xxxxxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cn"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    access_log  "),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/var/log/nginx/jpom.log")]),s._v(" main"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    ssl on"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    ssl_certificate   "),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/etc/nginx/ssl/jpom-xxxxxx.pem")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    ssl_certificate_key  "),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/etc/nginx/ssl/jpom-xxxxxx.key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    ssl_session_timeout "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5m")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    ssl_ciphers ECDHE"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("RSA"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("AES128"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("GCM"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("SHA256"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("ECDHE"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("ECDH"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("AES"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("HIGH"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("aNULL"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("MD5"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("ADH"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("RC4"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    ssl_protocols TLSv1 TLSv1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("1 TLSv1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("2"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    ssl_prefer_server_ciphers on"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    \n    location "),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/jpom/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("{")]),s._v("\n        proxy_pass   "),a("span",{pre:!0,attrs:{class:"token url"}},[s._v("http://127.0.0.1:2122/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        proxy_set_header Jpom"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ProxyPath      "),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/jpom/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        proxy_set_header Host      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("host"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        proxy_set_header X"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Real"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("IP "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("remote_addr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        proxy_set_header X"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Forwarded"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("For "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("proxy_add_x_forwarded_for"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v(" iframe 重定向\n        proxy_set_header X"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Forwarded"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Proto "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("scheme"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        proxy_set_header X"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Forwarded"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Port "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("server_port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        client_max_body_size  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50000m")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        client_body_buffer_size "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("128k")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("\twebsocket 配置\n        proxy_set_header Upgrade "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("$")]),s._v("http_upgrade"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n        proxy_set_header Connection "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"upgrade"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br")])])])}),[],!1,null,null,null);a.default=r.exports},485:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("p",[s._v("定期备份数据是一个良好的习惯，数据安全是防患于未然")]),s._v(" "),a("h2",{attrs:{id:"目录结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#目录结构"}},[s._v("#")]),s._v(" 目录结构")]),s._v(" "),a("p",[s._v("在您需要备份前需要了解到 Jpom 中目录结构能帮助您高效备份")]),s._v(" "),a("p",[s._v("这里列举的目录结构是当您已经正常使用 Jpom 并且没有修改数据目录的情况下，如果您手动修改过数据目录您可以直接备份对应目录，但是您仍然需要了解整个系统的完整目录结构")]),s._v(" "),a("h3",{attrs:{id:"服务端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务端"}},[s._v("#")]),s._v(" 服务端")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(".\n├── lib                                               程序安装包（jar）文件\n├───── server-x.x.x.jar\n├───── oldJars                                        升级成功后会将之前版本的安装包备份至此目录\n├───── run.bin                                        当 lib 下有多个安装包时，告知脚本应该使用哪个安装包\n├─── bin                                              管理脚本\n├───── Server.bat\n├───── Server.sh\n├───── BlockListener.sh\n├── conf                                              配置文件目录\n├───── application.yml\n├───── logback.xml\n├── logs                                              程序运行日志目录\n├───── server.log\n├───── stdout.log\n├── LICENSE\n├── tmp                                               程序临时目录（java.io.tmpdir）\n├── data\n├────── build =>                                      构建相关文件夹\n├──────────── a7edf3cff8d542d3bf5758f9ab9b9a32 =>     单个构建存储相关文件夹\n├──────────────── history =>                          需要执行的脚本\n├───────────────────── #1 =>                          单次执行记录相关文件夹\n├─────────────────────── info.log =>                  构建日志\n├─────────────────────── result =>                    构建产物存储文件夹\n├──────────────── source =>                           构建的仓库文件夹\n├────── script =>                                     服务端脚本文件夹\n├──────────── a7edf3cff8d542d3bf5758f9ab9b9a32 =>     脚本对应相关文件夹\n├──────────────── script.sh =>                        需要执行的脚本\n├──────────────── log =>                              执行日志\n├──────────── xxxx =>                                 其他脚本信息\n├────── command_log => ssh                            脚本执行记录\n├──────────── a7edf3cff8d542d3bf5758f9ab9b9a32 =>     单个脚本相关文件夹\n├──────────────── 004d320e00794d63831d63e3a5ed4344 => 脚本批量执行日志\n├──────────── ....... =>                              更多脚本文件\n├────── agent =>                                      服务端保留插件的 jar 包文件夹\n├────── INSTALL.json =>                               安装文件【非常重要，安装ID为集群ID】\n├────── docker =>                                     docker 相关文件\n├──────────── tls-cert =>                             docker tls 证书文件保存路径\n├────── file-storage =>                               文件中心存储路径\n├────── certificate =>                                证书中心存储路径\n├────── temp =>                                       临时文件，上传文件缓存目录，运行中产生\n├── db =>                                             服务端数据存储文件夹\n├────── backup =>                                     备份数据文件夹\n├──────────── 20220609120000.sql =>                   sql 文件\n├──────────── .......sql =>                           更多 sql 文件\n├────── recover_backup =>                             执行修复数据后的原数据库备份文件夹\n├──────────── 2022-06-10 09/16/38 =>                  单次备份文件夹\n├──────────────── Server.mv.db =>                     数据库文件\n├──────────────── Server.trace.db =>                  数据库文件\n├──────────── ...... =>                               单次备份文件夹\n├────── execute.init.sql.log  =>                      记录已经初始化过 sql hash,避免重复初始化数据库\n├────── Server.mv.db =>                               数据库文件\n└────── Server.trace.db =>                            数据库文件\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br")])]),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("重要目录列举")]),s._v(" "),a("ul",[a("li",[s._v("db/Server.mv.db")]),s._v(" "),a("li",[s._v("db/Server.trace.db")]),s._v(" "),a("li",[s._v("db/backup")]),s._v(" "),a("li",[s._v("data/INSTALL.json")]),s._v(" "),a("li",[s._v("data/file-storage")]),s._v(" "),a("li",[s._v("data/certificate")])]),s._v(" "),a("p",[s._v("说明：这里列举重要指非常重要如果丢失或者损坏系统无法正常运行或者您的数据丢失")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("未列举的举例说明")]),s._v(" "),a("ul",[a("li",[s._v("data/build")]),s._v(" "),a("li",[s._v("data/command_log")]),s._v(" "),a("li",[s._v("data/script")])]),s._v(" "),a("p",[s._v("这些均未运行和使用过程中产生的文件，次部分丢失不会造成系统无法使用。但是如果构建日志记录、脚本日志记录等日志相关丢失")])]),s._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("最后说明")]),s._v(" "),a("p",[s._v("当您选择备份时我们建议您备份 Jpom 整个目录才能保证系统数据完整性，如果条件有限或者精简备份可以先备份上述重要目录")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("声明：文档中可能并未完整列出所有目录使用说明，因为功能可能随着迭代时候变动")])]),s._v(" "),a("h3",{attrs:{id:"插件端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#插件端"}},[s._v("#")]),s._v(" 插件端")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(".\n├── lib                                               程序安装包（jar）文件\n├───── server-x.x.x.jar\n├───── oldJars                                        升级成功后会将之前版本的安装包备份至此目录\n├───── run.bin                                        当 lib 下有多个安装包时，告知脚本应该使用哪个安装包\n├─── bin                                              管理脚本\n├───── Server.bat\n├───── Server.sh\n├───── BlockListener.sh\n├── conf                                              配置文件目录\n├───── application.yml\n├───── logback.xml\n├── logs                                              程序运行日志目录\n├───── server.log\n├───── stdout.log\n├── LICENSE\n├── tmp                                               程序临时目录（java.io.tmpdir）\n├── data\n├────── script.json =>                                存储机器脚本相关数据\n├────── project.json =>                               存储机器项目相关数据\n├────── INSTALL.json =>                               安装记录【非常重要】\n├────── script =>                                     机器端脚本文件夹\n├──────────── a7edf3cff8d542d3bf5758f9ab9b9a32 =>     脚本对应相关文件夹\n├──────────────── script.sh =>                        需要执行的脚本\n├──────────────── log =>                              执行日志\n├──────────── xxxx =>                                 其他脚本信息\n├────── script_log.json =>                            临时记录脚本执行记录（服务端管控请勿手动修改）\n├────── whitelistDirectory.json =>                    授权（白名单）目录配置\n├────── workspace_env_var.json =>                     环境变量配置\n├────── nginx_conf.json =>                            nginx配置\n├────── temp =>                                       临时文件，上传文件缓存目录，运行中产生\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br")])]),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("说明")]),s._v(" "),a("p",[s._v("由于插件端数据较少，我们期望您在备份时候尽量全备份")]),s._v(" "),a("p",[s._v("如果需要选择备份或者轻量备份，您可以选择不备份脚本文件夹 和 temp文件夹")])]),s._v(" "),a("h2",{attrs:{id:"容器备份"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器备份"}},[s._v("#")]),s._v(" 容器备份")]),s._v(" "),a("p",[s._v("如果您的服务端是使用容器安装的，您需要判断您是否使用容器挂载或者卷方式来创建容器。")]),s._v(" "),a("h3",{attrs:{id:"挂载方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#挂载方式"}},[s._v("#")]),s._v(" 挂载方式")]),s._v(" "),a("p",[s._v("根据我们提供的文档我们推荐您挂载了")]),s._v(" "),a("ul",[a("li",[s._v("/usr/local/jpom-server/logs")]),s._v(" "),a("li",[s._v("/usr/local/jpom-server/data")]),s._v(" "),a("li",[s._v("/usr/local/jpom-server/conf")])]),s._v(" "),a("p",[s._v("备份时我们建议您备份：/usr/local/jpom-server/data、/usr/local/jpom-server/conf 两个目录挂载的宿主机目录")]),s._v(" "),a("h3",{attrs:{id:"卷方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#卷方式"}},[s._v("#")]),s._v(" 卷方式")]),s._v(" "),a("p",[s._v("请参考 docker 官方对卷进行备份的操作")]),s._v(" "),a("p",[a("code",[s._v("docker volume inspect xxxxx")])])])}),[],!1,null,null,null);a.default=r.exports},493:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#前言"}},[s._v("前言")]),a("ul",[a("li",[a("a",{attrs:{href:"#问-升级到-2-9-x-为什么要特殊处理"}},[s._v("问：升级到 2.9.x 为什么要特殊处理？")])]),a("li",[a("a",{attrs:{href:"#问-该漏洞出现了一段时间-为什么现在才发修复版"}},[s._v("问：该漏洞出现了一段时间，为什么现在才发修复版？")])])])]),a("li",[a("a",{attrs:{href:"#升级流程总览"}},[s._v("升级流程总览")])]),a("li",[a("a",{attrs:{href:"#相关问题说明"}},[s._v("相关问题说明")]),a("ul",[a("li",[a("a",{attrs:{href:"#问-必须先升级到-2-8-24"}},[s._v("问：必须先升级到 2.8.24+？")])]),a("li",[a("a",{attrs:{href:"#问-如何查看备份记录中的备份文件路径"}},[s._v("问：如何查看备份记录中的备份文件路径？")])]),a("li",[a("a",{attrs:{href:"#问-执行-bash-xxxx-server-sh-restart-15-backup-h2-不生效该怎么办"}},[s._v("问：执行 bash /xxxx/Server.sh restart -15 --backup-h2 不生效该怎么办？")])]),a("li",[a("a",{attrs:{href:"#问-官方是不是忘记还用-windows-用户啦"}},[s._v("问：官方是不是忘记还用 windows 用户啦？")])]),a("li",[a("a",{attrs:{href:"#问-不想通过管理脚本来操作-还有其他方法吗"}},[s._v("问：不想通过管理脚本来操作，还有其他方法吗？")])]),a("li",[a("a",{attrs:{href:"#问-容器安装的应该如何升级"}},[s._v("问：容器安装的应该如何升级？")])]),a("li",[a("a",{attrs:{href:"#问-升级服务端后需要将插件端也升级到-2-9-0-吗"}},[s._v("问：升级服务端后需要将插件端也升级到 2.9.0+ 吗？")])]),a("li",[a("a",{attrs:{href:"#问-哪里下载-2-8-24-安装包"}},[s._v("问：哪里下载 2.8.24+ 安装包？")])]),a("li",[a("a",{attrs:{href:"#问-插件端该如何升级到-2-9-0"}},[s._v("问：插件端该如何升级到 2.9.0+ ?")])]),a("li",[a("a",{attrs:{href:"#问-新版本导入-sql-报错-怎么办呀"}},[s._v("问：新版本导入 sql 报错，怎么办呀！！！！")])])])])])]),a("p"),s._v(" "),a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("h3",{attrs:{id:"问-升级到-2-9-x-为什么要特殊处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问-升级到-2-9-x-为什么要特殊处理"}},[s._v("#")]),s._v(" 问：升级到 2.9.x 为什么要特殊处理？")]),s._v(" "),a("p",[a("strong",[s._v("答")]),s._v(" ：因为 H2 在 "),a("code",[s._v("1.4.198, 2.0.202")]),s._v(" 版本间存在漏洞，漏洞编号为："),a("code",[s._v("CVE-2021-23463")]),s._v("，所以需要尽快升级到最新版本来避免该漏洞。\n但是 H2 的 1.4.x 升级到 2.0.x 是不兼容版本升级，不能直接无感升级。必须迁移旧数据到新版本中")]),s._v(" "),a("hr"),s._v(" "),a("h3",{attrs:{id:"问-该漏洞出现了一段时间-为什么现在才发修复版"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问-该漏洞出现了一段时间-为什么现在才发修复版"}},[s._v("#")]),s._v(" 问：该漏洞出现了一段时间，为什么现在才发修复版？")]),s._v(" "),a("p",[a("strong",[s._v("答")]),s._v("：当我们看到漏洞相关消息就开始准备方案，我们刚开始想的方案是如何避免过多的人为操作，尽量自动化完成。\n结果我们尝试发现没有办法很好的避免（准备出一个界面化的操作），最后采用命令行方式操作。（此处自动🐶）")]),s._v(" "),a("h2",{attrs:{id:"升级流程总览"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#升级流程总览"}},[s._v("#")]),s._v(" 升级流程总览")]),s._v(" "),a("ol",[a("li",[a("strong",[s._v("需要先升级到 2.8.24+")]),s._v(" "),a("RouterLink",{attrs:{to:"/pages/all-downloads/"}},[s._v("安装包下载地址")]),s._v(" "),a("ol",[a("li",[s._v("升级方法有：在线升级、手动上传 jar 包等方式升级")])])],1),s._v(" "),a("li",[s._v("检查 "),a("code",[s._v("Server.sh")]),s._v(" 脚本中 "),a("code",[s._v("ARGS")]),s._v(" 变量最后是否存在 "),a("code",[s._v("$@")]),s._v(" 字符\n"),a("ol",[a("li",[s._v("如果不存在则需要手动添加")]),s._v(" "),a("li",[a("code",[s._v("ARGS")]),s._v(" 变量完整示例："),a("code",[s._v('ARGS="--jpom.applicationTag=${Tag} --spring.profiles.active=pro --server.port=2122 --jpom.log=${Path}log $@"')])])])]),s._v(" "),a("li",[a("strong",[s._v("为了数据安全避免升级出现异常造成数据丢失，请手动备份一下 "),a("code",[s._v("db")]),s._v(" 目录")]),s._v(" "),a("ol",[a("li",[s._v("备份前一定要先关闭服务器程序，否则会出现数据库异常情况或者数据丢失等异常")]),s._v(" "),a("li",[s._v("关闭方式："),a("code",[s._v("bash /xxxx/Server.sh stop")])]),s._v(" "),a("li",[s._v("备份 db 目录方式："),a("code",[s._v("cp -r /xxxx/jpom-server/db /xxxx/jpom-server/db_backup")])])])]),s._v(" "),a("li",[s._v("通过命令行的方式创建数据备份\n"),a("ol",[a("li",[s._v("启动程序参数里面添加 --backup-h2")]),s._v(" "),a("li",[s._v("linux 环境举例："),a("code",[s._v("bash /xxxx/Server.sh restart -15 --backup-h2")])]),s._v(" "),a("li",[s._v("当控制台输出 "),a("code",[s._v("Complete the backup database, save the path as /xxx/xxx/db/backup/xxxx.sql")]),s._v(" 字样表示备份成功")])])]),s._v(" "),a("li",[s._v("手动替换 jar\n"),a("ol",[a("li",[s._v("将 lib 目录下面的 "),a("code",[s._v("Server-2.8.x.jar")]),s._v(" 替换为最新的 "),a("code",[s._v("Server-2.9.x.jar")])]),s._v(" "),a("li",[s._v("注意可能需要修改 "),a("code",[s._v("Server.sh")]),s._v(" 脚本里面的 "),a("code",[s._v("RUNJAR")]),s._v(" 变量值为您上传新 jar 的文件名，如："),a("code",[s._v("Server-2.9.x.jar")])])])]),s._v(" "),a("li",[s._v("通过指定 sql 文件方式启动\n"),a("ol",[a("li",[s._v("启动程序参数里面添加 "),a("code",[s._v("--replace-import-h2-sql=/xxxx.sql --transform-sql")]),s._v(" (路径需要替换为第二步控制台输出的 sql 文件保存路径)")]),s._v(" "),a("li",[s._v("linux 环境举例："),a("code",[s._v("bash /xxxx/Server.sh restart -15 --replace-import-h2-sql=/xxxx.sql --transform-sql")])])])]),s._v(" "),a("li",[s._v("观察控制输出内容\n"),a("ol",[a("li",[s._v("当控制台输出 "),a("code",[s._v("Import successfully according to sql,/xxx/xxx/db/backup/xxxx.sql")]),s._v(" 字样表示升级成功并自动启动程序")]),s._v(" "),a("li",[s._v("如果出现异常信息可以先尝试在搜索引擎搜索看看是否有解决办法")]),s._v(" "),a("li",[s._v("联系官方协助排查")])])]),s._v(" "),a("li",[a("strong",[s._v("补充步骤：")]),s._v(" "),a("code",[s._v("2.9.0")]),s._v(" 版本操作完成后基本功能使用正常，但是 SSH 相关功能会出现数据库异常（缺少字段）\n"),a("ol",[a("li",[s._v("需要重新初始化数据："),a("code",[s._v("bash /xxxx/Server.sh restart -15 --rest:load_init_db")])]),s._v(" "),a("li",[s._v("执行这个操作需要使用 2.9.1+ 版本（2.9.0 存在问题，此处自动🐶）")])])]),s._v(" "),a("li",[s._v("愉快的使用 Jpom 2.9.x")])]),s._v(" "),a("h2",{attrs:{id:"相关问题说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相关问题说明"}},[s._v("#")]),s._v(" 相关问题说明")]),s._v(" "),a("h3",{attrs:{id:"问-必须先升级到-2-8-24"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问-必须先升级到-2-8-24"}},[s._v("#")]),s._v(" 问：必须先升级到 2.8.24+？")]),s._v(" "),a("p",[a("strong",[s._v("答")]),s._v("：非必须，因为 2.8.24+ 新增了命令行方式备份数据，这样在程序未启动前就将所有数据备份导出为 sql 保证导出的数据是最新并且完整的。\n如果您不想升级到 2.8.24+ 再升级到 2.9.x 那么可以先用管理身份登录进入系统进入：【系统管理 -> 数据库备份】页面里面去创建一个全量备份记住备份文件完成路径")]),s._v(" "),a("p",[a("strong",[s._v("注意")]),s._v("："),a("code",[s._v("不通过命令行备份不能保证导出的备份数据一定是最新的奥，因为程序在运行中随时会产生新数据或者数据更新情况")])]),s._v(" "),a("hr"),s._v(" "),a("h3",{attrs:{id:"问-如何查看备份记录中的备份文件路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问-如何查看备份记录中的备份文件路径"}},[s._v("#")]),s._v(" 问：如何查看备份记录中的备份文件路径？")]),s._v(" "),a("p",[a("strong",[s._v("答")]),s._v("：备份列表中状态列后面有一个复制按钮，点击一下就复制到粘贴板啦")]),s._v(" "),a("hr"),s._v(" "),a("h3",{attrs:{id:"问-执行-bash-xxxx-server-sh-restart-15-backup-h2-不生效该怎么办"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问-执行-bash-xxxx-server-sh-restart-15-backup-h2-不生效该怎么办"}},[s._v("#")]),s._v(" 问：执行 "),a("code",[s._v("bash /xxxx/Server.sh restart -15 --backup-h2")]),s._v(" 不生效该怎么办？")]),s._v(" "),a("p",[a("strong",[s._v("答")]),s._v("：如果您是从很早就使用了 Jpom 那么您现在管理服务端当脚本不是最新当，最新的管理脚本里面将执行命令的其他参数也传入了启动程序里面")]),s._v(" "),a("p",[s._v("解决办法有：")]),s._v(" "),a("ol",[a("li",[s._v("替换为最新的管理脚本文件 "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/blob/master/modules/server/script/Server.sh",target:"_blank",rel:"noopener noreferrer"}},[s._v("Server.sh"),a("OutboundLink")],1)]),s._v(" "),a("li",[s._v("手动修改管理脚本，在脚本中 "),a("code",[s._v("ARGS")]),s._v(" 变量最后添加一个 "),a("code",[s._v("$@")]),s._v(" 即可\n"),a("ol",[a("li",[s._v("完整示例："),a("code",[s._v('ARGS="--jpom.applicationTag=${Tag} --spring.profiles.active=pro --server.port=2122 --jpom.log=${Path}log $@"')])])])])]),s._v(" "),a("hr"),s._v(" "),a("h3",{attrs:{id:"问-官方是不是忘记还用-windows-用户啦"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问-官方是不是忘记还用-windows-用户啦"}},[s._v("#")]),s._v(" 问：官方是不是忘记还用 windows 用户啦？")]),s._v(" "),a("p",[a("strong",[s._v("答")]),s._v("：没有的，因为 linux 用户偏多，所以拿 linux 举例。windows 处理办法类似")]),s._v(" "),a("p",[s._v("可以按照 "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/blob/master/modules/server/script/Server.bat",target:"_blank",rel:"noopener noreferrer"}},[s._v("Server.bat"),a("OutboundLink")],1),s._v(" 中 if 判断继续扩展")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" /p "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nIF "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"!ID!"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v(" call:start\nIF "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"!ID!"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2"')]),s._v(" call:stop\nIF "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"!ID!"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3"')]),s._v(" call:status\nIF "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"!ID!"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"4"')]),s._v(" call:restart\nIF "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"!ID!"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5"')]),s._v(" call:use\nIF "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"!ID!"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6"')]),s._v(" call:restart "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--rest:ip_config")]),s._v("\nIF "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"!ID!"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7"')]),s._v(" call:restart "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--rest:load_init_db")]),s._v("\nIF "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"!ID!"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8"')]),s._v(" call:restart "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--rest:super_user_pwd")]),s._v("\nIF "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"!ID!"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v(" EXIT\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("思路添加 IF,比如：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" /p "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nIF "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"!ID!"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v(" call:start\nIF "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"!ID!"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2"')]),s._v(" call:stop\nIF "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"!ID!"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"3"')]),s._v(" call:status\nIF "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"!ID!"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"4"')]),s._v(" call:restart\nIF "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"!ID!"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5"')]),s._v(" call:use\nIF "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"!ID!"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6"')]),s._v(" call:restart "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--rest:ip_config")]),s._v("\nIF "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"!ID!"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7"')]),s._v(" call:restart "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--rest:load_init_db")]),s._v("\nIF "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"!ID!"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8"')]),s._v(" call:restart "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--rest:super_user_pwd")]),s._v("\nIF "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"!ID!"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"9"')]),s._v(" call:restart --backup-h2\nIF "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"!ID!"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10"')]),s._v(" call:restart --replace-import-h2-sql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/xxxx.sql --transform-sql\nIF "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"!ID!"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v(" EXIT\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[a("code",[s._v("注意要修改 sql 路径")])]),s._v(" "),a("hr"),s._v(" "),a("h3",{attrs:{id:"问-不想通过管理脚本来操作-还有其他方法吗"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问-不想通过管理脚本来操作-还有其他方法吗"}},[s._v("#")]),s._v(" 问：不想通过管理脚本来操作，还有其他方法吗？")]),s._v(" "),a("p",[a("strong",[s._v("答")]),s._v("：有")]),s._v(" "),a("ol",[a("li",[s._v("备份数据")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("java")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-jar")]),s._v(" server-2.8.24.jar "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--spring.profiles.active")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("pro --backup-h2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("导入数据")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("java")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-jar")]),s._v(" server-2.9.0.jar "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--spring.profiles.active")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("pro --replace-import-h2-sql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/xxxx.sql --transform-sql\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("更新管理脚本中的："),a("code",[s._v("RUNJAR")]),s._v(" 变量值为："),a("code",[s._v("server-2.9.0.jar")])])]),s._v(" "),a("p",[a("strong",[s._v("注意")]),s._v("：")]),s._v(" "),a("ol",[a("li",[s._v("通过次方式一定要在原目录操作")]),s._v(" "),a("li",[s._v("操作顺序一定是要先使用旧包备份数据，再通过新包导入数据")])]),s._v(" "),a("hr"),s._v(" "),a("h3",{attrs:{id:"问-容器安装的应该如何升级"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问-容器安装的应该如何升级"}},[s._v("#")]),s._v(" 问：容器安装的应该如何升级？")]),s._v(" "),a("p",[a("strong",[s._v("答")]),s._v("：升级流程和 Linux 流程基本一致，需要注意的就是上传文件的方式需要先上传到宿主机，再通过 "),a("code",[s._v("docker cp")]),s._v(" 方式将文件复制到容器中。")]),s._v(" "),a("p",[s._v("下面以从 2.8.24 升级到 2.9.0 为例：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意：从 2.8.24 版本开始新增数据库备份的参数命令，建议先升级到 2.8.24")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 备份低版本数据库")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" jpom-server /bin/bash /usr/local/jpom-server/Server.sh restart "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-15")]),s._v(" --backup-h2\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行完后看到【Need to log out manually: Ctrl+C/Control+C】用 Ctrl + C 手动退出")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 替换脚本命令中为新版 Jar 包")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" jpom-server "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'/^RUNJAR="/s@.*@RUNJAR="Server-2.9.0.jar"@g\'')]),s._v(" /usr/local/jpom-server/Server.sh "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker cp 本地文件路径 容器ID/容器NAME:容器内路径")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /root/Server-2.9.0.jar jpom-server:/usr/local/jpom-server/lib/Server-2.9.0.jar\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入容器内部")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" jpom-server /bin/bash\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将低版本的数据库导入到新版本中")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("backupFile")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" /usr/local/jpom-server/data/db/backup/ "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("head")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-1")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n/bin/bash /usr/local/jpom-server/Server.sh restart "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-15")]),s._v(" --replace-import-h2-sql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/jpom-server/data/db/backup/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$backupFile")]),s._v(" --transform-sql\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动完成后，输入 Ctrl + C 退出。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退出容器，回到宿主机")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("h3",{attrs:{id:"问-升级服务端后需要将插件端也升级到-2-9-0-吗"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问-升级服务端后需要将插件端也升级到-2-9-0-吗"}},[s._v("#")]),s._v(" 问：升级服务端后需要将插件端也升级到 2.9.0+ 吗？")]),s._v(" "),a("p",[a("strong",[s._v("答")]),s._v("：我们建议服务端和插件端的版本一致，可以同步升级到 2.9.0。")]),s._v(" "),a("p",[s._v("只要您在使用过程中没有发现部分功能异常，无法使用，接口 404 等情况下，插件端不及时更新也是没有太多问题的。")]),s._v(" "),a("p",[s._v("插件端和服务端版本差异请尽量一致或者缩小，避免出现部分功能调整后关联影响。")]),s._v(" "),a("h3",{attrs:{id:"问-哪里下载-2-8-24-安装包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问-哪里下载-2-8-24-安装包"}},[s._v("#")]),s._v(" 问：哪里下载 2.8.24+ 安装包？")]),s._v(" "),a("p",[a("strong",[s._v("答")]),s._v("："),a("RouterLink",{attrs:{to:"/pages/all-downloads/"}},[s._v("下载中心")])],1),s._v(" "),a("h3",{attrs:{id:"问-插件端该如何升级到-2-9-0"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问-插件端该如何升级到-2-9-0"}},[s._v("#")]),s._v(" 问：插件端该如何升级到 2.9.0+ ?")]),s._v(" "),a("p",[a("strong",[s._v("答")]),s._v("：插件端还是可以使用以前的方式：手动上传 jar，在线升级等。推荐使用在线升级，可以在服务端页面批量升级插件端版本")]),s._v(" "),a("h3",{attrs:{id:"问-新版本导入-sql-报错-怎么办呀"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问-新版本导入-sql-报错-怎么办呀"}},[s._v("#")]),s._v(" 问：新版本导入 sql 报错，怎么办呀！！！！")]),s._v(" "),a("p",[a("strong",[s._v("答")]),s._v("： 如果出现如下错误\n"),a("img",{attrs:{src:"/images/tutorial/h2-console/img2.8.x-error.png",alt:"img.png",loading:"lazy"}})]),s._v(" "),a("p",[s._v("可以检查执行的命令测试是否包含了："),a("code",[s._v("--transform-sql")]),s._v(" 或者 "),a("code",[s._v("--transform-sql=true")])]),s._v(" "),a("p",[s._v("如果包含了还是不能解决，您可以手动修改对应的 sql 文件")]),s._v(" "),a("p",[s._v("将")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" SYSTEM_LOB_STREAM_PRIMARY_KEY "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" SYSTEM_LOB_STREAM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" PART"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这一行删除即可")])])}),[],!1,null,null,null);a.default=r.exports},494:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("p",[s._v("由于各种因素我们时常需要对 Jpom 进行数据迁移，当您需要迁移时请先仔细阅读该文档帮助您避坑")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提醒")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("本文涉及到流程和说明较多，为来您的数据安全建议您先全部阅读后再进行操作")])]),s._v(" "),a("li",[a("p",[s._v("迁移数据有风险请提前做好数据备份")])])])]),s._v(" "),a("h2",{attrs:{id:"情况判断"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#情况判断"}},[s._v("#")]),s._v(" 情况判断")]),s._v(" "),a("p",[s._v("迁移数据根据实际情况又分为几种")]),s._v(" "),a("ul",[a("li",[s._v("完整迁移")]),s._v(" "),a("li",[s._v("部分迁移")]),s._v(" "),a("li",[s._v("数据还原/导入")])]),s._v(" "),a("p",[s._v("同时根据您的安装方式又分为"),a("code",[s._v("原生本地安装")]),s._v("、"),a("code",[s._v("容器安装")])])])}),[],!1,null,null,null);a.default=r.exports},498:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("p",[s._v("在 Jpom 中使用了工作空间来代替权限控制的一些基础功能，在您想用到权限相关的请您先理解到本系统中的工作空间概念")]),s._v(" "),a("h2",{attrs:{id:"权限说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#权限说明"}},[s._v("#")]),s._v(" 权限说明")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("一句话概况")]),s._v(" "),a("p",[s._v("用工作空间来划分数据权限，功能权限绑定在工作空间，给用户授权工作空间来实现权限管理")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("2.8.0+")]),s._v(" 使用工作空间取代角色来实现用户权限控制。")]),s._v(" "),a("li",[a("code",[s._v("2.9.7+")]),s._v(" 新增权限组来实现批量管理用户权限（工作空间）。")])]),s._v(" "),a("p",[s._v("Jpom 中权限数据均绑定到具体的工作空间，用户需要有工作空间的权限才能查看、管理对应的数据。")]),s._v(" "),a("h2",{attrs:{id:"推荐用法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#推荐用法"}},[s._v("#")]),s._v(" 推荐用法")]),s._v(" "),a("ul",[a("li",[s._v("Jpom 中使用工作空间代替角色来控制数据权限\n"),a("ul",[a("li",[s._v("一个账号可以绑定多个权限组")]),s._v(" "),a("li",[s._v("权限组可以授权多个工作空间")]),s._v(" "),a("li",[s._v("权限组并且可以设置单个工作空间的功能权限")])])]),s._v(" "),a("li",[s._v("Jpom 中主要使用工作空间隔离数据权限，建议在实际部署中使用工作空间来隔离权限。")])]),s._v(" "),a("blockquote",[a("p",[s._v("温馨提示：一个物理节点可以添加在多个工作空间")])]),s._v(" "),a("p",[s._v("如：")]),s._v(" "),a("ol",[a("li",[s._v("测试环境")]),s._v(" "),a("li",[s._v("线上环境")]),s._v(" "),a("li",[s._v("...")])]),s._v(" "),a("p",[s._v("如：")]),s._v(" "),a("ol",[a("li",[s._v("前端开发")]),s._v(" "),a("li",[s._v("后端开发")]),s._v(" "),a("li",[s._v("...")])]),s._v(" "),a("h2",{attrs:{id:"工作空间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#工作空间"}},[s._v("#")]),s._v(" 工作空间")]),s._v(" "),a("p",[s._v("系统中所有数据均绑定到具体的工作空间，用户需要有工作空间的权限才能查看、管理对应的数据。")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提醒")]),s._v(" "),a("p",[s._v("系统没有针对单条数据授权的功能，如果授权指定工作空间那么对应用户既有对应工作空间所有数据的管理权限")])]),s._v(" "),a("h2",{attrs:{id:"用户分类如下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用户分类如下"}},[s._v("#")]),s._v(" 用户分类如下")]),s._v(" "),a("ul",[a("li",[s._v("超级管理员\n"),a("ul",[a("li",[s._v("初始化系统创建的账号即为超级管理员")])])]),s._v(" "),a("li",[s._v("服务端管理员\n"),a("ul",[a("li",[s._v("指定用户授权（用户编辑页面配置）")])])]),s._v(" "),a("li",[s._v("节点管理员\n"),a("ul",[a("li",[s._v("指定工作空间中是否存在节点管理员权限")])])]),s._v(" "),a("li",[s._v("普通用户\n"),a("ul",[a("li",[s._v("所有用户均包含普通用户权限")])])])]),s._v(" "),a("h2",{attrs:{id:"数据层级"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据层级"}},[s._v("#")]),s._v(" 数据层级")]),s._v(" "),a("p",[s._v("Jpom 服务端中的数据可以大概分为如下层级：用户数据、资产数据、其他（系统）数据、工作空间数据")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/data-tree.png",alt:"数据层级",loading:"lazy"}})]),s._v(" "),a("p",[s._v("如图所示：")]),s._v(" "),a("p",[a("strong",[s._v("可共享")]),s._v("：是指可以跨工作空间使用的数据")]),s._v(" "),a("p",[a("strong",[s._v("需分配")]),s._v("：数据默认是在系统级别，可以将数据分配到需要使用的工作空间来供其他用户使用")]),s._v(" "),a("p",[a("strong",[s._v("普通用户")]),s._v("：仅能使用和管理授权工作空间下的数据")]),s._v(" "),a("p",[a("strong",[s._v("超级管理员")]),s._v("：可以使用系统中的所有数据")]),s._v(" "),a("p",[a("strong",[s._v("服务端管理员")]),s._v("：可以使用授权工作空间下的数据、资产数据、部分系统数据")]),s._v(" "),a("h3",{attrs:{id:"权限类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#权限类型"}},[s._v("#")]),s._v(" 权限类型")]),s._v(" "),a("ul",[a("li",[s._v("查看权限\n"),a("ul",[a("li",[s._v("只要有工作空间权限就有对应工作空间下数据的查看权限")])])]),s._v(" "),a("li",[s._v("操作权限\n"),a("ul",[a("li",[s._v("根据权限组中配置的对应工作空间具体操作权限")])])])]),s._v(" "),a("h2",{attrs:{id:"操作权限包含"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作权限包含"}},[s._v("#")]),s._v(" 操作权限包含")]),s._v(" "),a("ul",[a("li",[s._v("修改、添加数据")]),s._v(" "),a("li",[s._v("删除数据")]),s._v(" "),a("li",[s._v("下载")]),s._v(" "),a("li",[s._v("上传")]),s._v(" "),a("li",[s._v("执行")]),s._v(" "),a("li",[s._v("下载远程文件")]),s._v(" "),a("li",[s._v("节点管理员")]),s._v(" "),a("li",[s._v("SSH 终端命令无限制")])]),s._v(" "),a("h2",{attrs:{id:"如何控制菜单权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何控制菜单权限"}},[s._v("#")]),s._v(" 如何控制菜单权限？")]),s._v(" "),a("p",[s._v("Jpom 中严格说没有菜单权限，仅有工作空间的数据权限。只要有这个工作空间均有这个工作空间下面的所有菜单（功能）权限。")]),s._v(" "),a("p",[a("strong",[s._v("Q:")]),s._v(" 但是有些场景需求是在不同工作空间有不同的功能权限改怎么实现呢？")]),s._v(" "),a("p",[a("strong",[s._v("答：")]),s._v(" 隐藏对应工作空间的菜单，在：系统管理 > 系统配置 > 菜单配置")]),s._v(" "),a("h2",{attrs:{id:"权限组的禁用时段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#权限组的禁用时段"}},[s._v("#")]),s._v(" 权限组的禁用时段")]),s._v(" "),a("p",[s._v("用于控制当前权限组在指定时间段不能使用对应的管理功能。")]),s._v(" "),a("p",[s._v("比如：节假日禁止发布、特殊时间段禁止人员上线等")]),s._v(" "),a("h2",{attrs:{id:"权限组的允许时段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#权限组的允许时段"}},[s._v("#")]),s._v(" 权限组的允许时段")]),s._v(" "),a("p",[s._v("用户控制当前权限组只能在指定时间段才能使用对应的功能")]),s._v(" "),a("p",[s._v("比如： 周一~周五 早上 9:00 ~ 18:00 才发布上线等")]),s._v(" "),a("h2",{attrs:{id:"权限组页面截图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#权限组页面截图"}},[s._v("#")]),s._v(" 权限组页面截图")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/user/fa8b789b336b4dfaaaea453a786a0c0f.png",alt:"权限组",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"数据权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据权限"}},[s._v("#")]),s._v(" 数据权限")]),s._v(" "),a("p",[s._v("Jpom 目前不会考虑做数据权限，如果您想控制数据权限请合理的将数据分配到对应工作空间并使用权限组来控制即可")])])}),[],!1,null,null,null);a.default=r.exports},508:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("h3",{attrs:{id:"登录日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#登录日志"}},[s._v("#")]),s._v(" 登录日志")]),s._v(" "),a("p",[s._v("在用户每次登录均会记录日志，方便日后查看登录记录或者异常 IP 登录")]),s._v(" "),a("h3",{attrs:{id:"操作日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作日志"}},[s._v("#")]),s._v(" 操作日志")]),s._v(" "),a("p",[s._v("在用户每次操作均会记录日志，方便日后查看操作记录以及回溯操作流程")]),s._v(" "),a("h2",{attrs:{id:"操作日志-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作日志-2"}},[s._v("#")]),s._v(" 操作日志")]),s._v(" "),a("h3",{attrs:{id:"查看系统用户操作日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看系统用户操作日志"}},[s._v("#")]),s._v(" 查看系统用户操作日志")]),s._v(" "),a("p",[s._v("如果账号拥有服务端管理权限，则可以到【系统管理】-> 【用户管理】->【操作日志】中查看")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/user/aabac9f9b29c40dead7584496a5cdbc6.png",alt:"操作日志",loading:"lazy"}})]),s._v(" "),a("h3",{attrs:{id:"查看自己操作日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看自己操作日志"}},[s._v("#")]),s._v(" 查看自己操作日志")]),s._v(" "),a("p",[s._v("【点击昵称下拉处】->【操作日志】->【操作日志】")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/user/0a1072ef8a7d4b49bbd6405eb5f1de73.png",alt:"查看自己的操作日志",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"登录日志-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#登录日志-2"}},[s._v("#")]),s._v(" 登录日志")]),s._v(" "),a("h3",{attrs:{id:"查看系统用户登录日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看系统用户登录日志"}},[s._v("#")]),s._v(" 查看系统用户登录日志")]),s._v(" "),a("p",[s._v("如果账号拥有服务端管理权限，则可以到【系统管理】-> 【用户管理】->【登录日志】中查看")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/user/9347c0b2945a4edf927178228cdb3e4d.png",alt:"登录记录",loading:"lazy"}})]),s._v(" "),a("h3",{attrs:{id:"查看自己登录日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看自己登录日志"}},[s._v("#")]),s._v(" 查看自己登录日志")]),s._v(" "),a("p",[s._v("【点击昵称下拉处】->【操作日志】->【登录日志】")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/user/4c381eef954047f691fbc194263a8bed.png",alt:"查看自己登录日志",loading:"lazy"}})])])}),[],!1,null,null,null);a.default=r.exports},509:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("p",[s._v("Jpom 支持为用户开启两步验证（MFA、数字令牌）来保障用户安全")]),s._v(" "),a("h2",{attrs:{id:"开启-mfa-两步验证"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开启-mfa-两步验证"}},[s._v("#")]),s._v(" 开启 MFA 两步验证")]),s._v(" "),a("ul",[a("li",[s._v("登录 Jpom，点击昵称下拉处，选择【安全管理】")]),s._v(" "),a("li",[s._v("选择【两步验证】")]),s._v(" "),a("li",[s._v("点击【开启 MFA】")]),s._v(" "),a("li",[s._v("安装两步验证应用")]),s._v(" "),a("li",[s._v("扫描二维码或者输入 KEY")]),s._v(" "),a("li",[s._v("获取验证码")]),s._v(" "),a("li",[s._v("将验证码填入 Jpom 系统")]),s._v(" "),a("li",[s._v("确认绑定")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/user/99b6a9646a634b0aba02eeb050400d53.png",alt:"两步验证示例",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"推荐两步验证的应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#推荐两步验证的应用"}},[s._v("#")]),s._v(" 推荐两步验证的应用")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("【推荐】微信小程序搜索 数盾OTP")])]),s._v(" "),a("li",[a("strong",[s._v("【推荐】腾讯身份验证码")]),s._v(" 简单好用 "),a("a",{attrs:{href:"https://a.app.qq.com/o/simple.jsp?pkgname=com.tencent.authenticator",target:"_blank",rel:"noopener noreferrer"}},[s._v("Android"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("strong",[s._v("Authy")]),s._v(" 功能丰富 专为两步验证码 "),a("a",{attrs:{href:"https://authy.com/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("iOS/Android/Windows/Mac/Linux"),a("OutboundLink")],1),a("a",{attrs:{href:"https://chrome.google.com/webstore/detail/authy/gaedmjdfmmahhbjefcbgaolhhanlaolb?hl=cn",target:"_blank",rel:"noopener noreferrer"}},[s._v("Chrome 扩展"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("strong",[s._v("Google Authenticator")]),s._v(" 简单易用，但不支持密钥导出备份 "),a("a",{attrs:{href:"https://apps.apple.com/us/app/google-authenticator/id388497605",target:"_blank",rel:"noopener noreferrer"}},[s._v("iOS"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=cn",target:"_blank",rel:"noopener noreferrer"}},[s._v("Android"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("strong",[s._v("Microsoft Authenticator")]),s._v(" 使用微软全家桶的推荐 "),a("a",{attrs:{href:"https://www.microsoft.com/zh-cn/account/authenticator",target:"_blank",rel:"noopener noreferrer"}},[s._v("iOS/Android"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("strong",[s._v("1Password")]),s._v(" 强大安全的密码管理付费应用 "),a("a",{attrs:{href:"https://1password.com/zh-cn/downloads/",target:"_blank",rel:"noopener noreferrer"}},[s._v("iOS/Android/Windows/Mac/Linux/ChromeOS"),a("OutboundLink")],1)])]),s._v(" "),a("h2",{attrs:{id:"关闭-mfa-两步验证"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关闭-mfa-两步验证"}},[s._v("#")]),s._v(" 关闭 MFA 两步验证")]),s._v(" "),a("ul",[a("li",[s._v("登录 Jpom，点击昵称下拉处，选择【安全管理】")]),s._v(" "),a("li",[s._v("选择【两步验证】")]),s._v(" "),a("li",[s._v("获取最新验证码")]),s._v(" "),a("li",[s._v("将验证码填入 Jpom 系统")]),s._v(" "),a("li",[s._v("点击【确认关闭】")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/user/3f550608dab3409f9d20f3d8884b3c60.png",alt:"确认关闭",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"mfa、数字令牌、两步验证丢失"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mfa、数字令牌、两步验证丢失"}},[s._v("#")]),s._v(" MFA、数字令牌、两步验证丢失")]),s._v(" "),a("ul",[a("li",[s._v("用户在登录时，如果开启 MFA 两步验证，那么用户需要输入 MFA 令牌才能登录")]),s._v(" "),a("li",[s._v("如果用户忘记 MFA 令牌，那么需要用户关闭本次的 MFA 两步验证，重新开启 MFA 两步验证")])]),s._v(" "),a("h3",{attrs:{id:"非超级管理员"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#非超级管理员"}},[s._v("#")]),s._v(" 非超级管理员")]),s._v(" "),a("p",[s._v("联系操作管理员手动关闭")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/user/f6227e31c05c4d10acddf0c0c6b72ded.png",alt:"关闭MFA",loading:"lazy"}})]),s._v(" "),a("p",[s._v("注意：如果未开启 MFA 此按钮是禁用状态")]),s._v(" "),a("h3",{attrs:{id:"超级管理员"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#超级管理员"}},[s._v("#")]),s._v(" 超级管理员")]),s._v(" "),a("h4",{attrs:{id:"linux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux"}},[s._v("#")]),s._v(" linux")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" /xxxx/Server.sh restart "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-15")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--close:super_user_mfa")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"windows"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows"}},[s._v("#")]),s._v(" windows")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("Server.bat restart "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--close:super_user_mfa")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"提醒用户开启-mfa"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#提醒用户开启-mfa"}},[s._v("#")]),s._v(" 提醒用户开启 MFA")]),s._v(" "),a("p",[s._v("如果您对系统安全有一定要求，期望用户均开启 MFA 两步验证，那么您可以开启提醒功能，提醒用户开启 MFA 两步验证。")]),s._v(" "),a("p",[s._v("开启方式：修改配置【jpom.user.force-mfa】为 true")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/user/4e1cc51bbd8247b992905fa0240eea39.png",alt:"修改MFA提醒配置",loading:"lazy"}})]),s._v(" "),a("p",[s._v("开启后用户打开系统，如果未开启 MFA 两步验证，那么系统会提醒用户开启 MFA 两步验证。")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/user/1509a55858254496b46ee4a89b5cbd92.png",alt:"提醒开启MFA",loading:"lazy"}})])])}),[],!1,null,null,null);a.default=r.exports},511:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("p",[s._v("Jpom 服务端执行集群化管理和部署，但是注意是是逻辑集群来实现的（可能和您认为的集群稍微有一点差异）")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("一句话总结")]),s._v(" "),a("p",[s._v("搭建多个服务端并且指向同一个数据库使用分组来实现逻辑区分和管控")])]),s._v(" "),a("p",[s._v("整个架构图如下：")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/cluster-tree.png",alt:"集群架构图",loading:"lazy"}})]),s._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("说明")]),s._v(" "),a("p",[s._v("插件端自身没有必要做集群，请您不要问出如何对插件端集群化。如果您真需要那么您应该了解服务端中的"),a("code",[s._v("节点分发")]),s._v("功能")])]),s._v(" "),a("h2",{attrs:{id:"为啥要集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为啥要集群"}},[s._v("#")]),s._v(" 为啥要集群？")]),s._v(" "),a("p",[s._v("其实在我们日常使用绝大多数情况是无需集群化的，因为单体服务端基本够用，如果不够那么"),a("strong",[s._v("加钱？（扩容服务器）")])]),s._v(" "),a("p",[s._v("但是您的诉求就是需要对服务端进行集群化来实现资源隔离使用，那么也是可以实现的。")]),s._v(" "),a("h3",{attrs:{id:"痛点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#痛点"}},[s._v("#")]),s._v(" 痛点")]),s._v(" "),a("p",[s._v("首先您要知道 Jpom 服务端本身消耗资源的痛点在哪里，因为您集群化无非就是需要对服务器资源消耗进行把控和隔离。")]),s._v(" "),a("p",[s._v("服务端资源消耗的痛点在："),a("code",[s._v("在线构建")]),s._v(" 即项目打包部署，尤其是 node 项目在打包是资源消耗高。")]),s._v(" "),a("p",[s._v("理论上服务端除去"),a("code",[s._v("在线构建")]),s._v("功能之外其他功能均不会消耗过多资源，当您理解到痛点后我们继续看如何解决痛点。")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("补充说明")]),s._v(" "),a("ul",[a("li",[s._v("在线构建消耗资源的原因不在于 jpom 服务端本身，而已调用相关插件而引起的资源消耗")]),s._v(" "),a("li",[s._v("不同构建方式使用到到依赖插件不同消耗资源也不同，同时资源消耗和您项目本身大小有一定关系")])])]),s._v(" "),a("h3",{attrs:{id:"如何解决"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何解决"}},[s._v("#")]),s._v(" 如何解决？")]),s._v(" "),a("p",[s._v("既然在线构建消耗资源，那么我们应该想法扩容服务器或者分散服务器来执行构建。")]),s._v(" "),a("ol",[a("li",[s._v("扩容最简单也是最有效的来。")]),s._v(" "),a("li",[s._v("分散服务器，使用多个服务器来构建项目（复杂度高）")])]),s._v(" "),a("p",[s._v("本文主要从分散服务器的方式来说明")]),s._v(" "),a("h2",{attrs:{id:"前提条件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前提条件"}},[s._v("#")]),s._v(" 前提条件")]),s._v(" "),a("p",[s._v("需要使用集群您需要先满足如下条件才更快的帮助您配置集群")]),s._v(" "),a("h3",{attrs:{id:"数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据库"}},[s._v("#")]),s._v(" 数据库")]),s._v(" "),a("p",[s._v("如果您需要集群化部署那么您服务端的数据库必须使用或者提前迁移到 mysql 中。")]),s._v(" "),a("h3",{attrs:{id:"工作空间准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#工作空间准备"}},[s._v("#")]),s._v(" 工作空间准备")]),s._v(" "),a("p",[s._v("jpom 中的工作空间我相信您已经了解或者已经会使用了("),a("strong",[s._v("如果不会请看文档")]),s._v(")，如果需要集群的话则需要您提前将期望"),a("code",[s._v("存放/归属")]),s._v("不同集群的数据使用工作空间来划分。")]),s._v(" "),a("p",[s._v("因为 Jpom 中的逻辑集群绑定到不同的工作空间来实现数据切换或者资源使用。")]),s._v(" "),a("p",[s._v("并且您还需要对您的资产进行分组配置来指定对应的资产应该归属到哪个集群中来管理。")]),s._v(" "),a("h3",{attrs:{id:"集群网络互通"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集群网络互通"}},[s._v("#")]),s._v(" 集群网络互通")]),s._v(" "),a("p",[s._v("这里是一个大前提奥。")]),s._v(" "),a("p",[s._v("您需要保证您的服务端 A 能连接到您的数据同时服务端 B 也能连接到您的数据库。")]),s._v(" "),a("p",[s._v("集群配置好后:")]),s._v(" "),a("ul",[a("li",[s._v("服务端 A 也等同于集群 A")]),s._v(" "),a("li",[s._v("服务端 B 也等同于集群 B")])]),s._v(" "),a("p",[s._v("单个集群中的资产信息也需要保证网络互通。")]),s._v(" "),a("h2",{attrs:{id:"集群创建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集群创建"}},[s._v("#")]),s._v(" 集群创建")]),s._v(" "),a("p",[s._v("您想在服务端中创建集群，那么当您服务端的数据库已经使用 mysql 后，您只需要在您新机器上安装一个全新的服务端，并且配置数据库信息为之前服务端相同的即可。")]),s._v(" "),a("p",[s._v("成功后操作路径：【系统管理】->【服务端配置】->【工作空间&集群】-> [集群管理选项卡]")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/databases/847801ba8e85efda498c4a0ca26c33ce.png",alt:"集群管理列表",loading:"lazy"}})]),s._v(" "),a("p",[s._v("可以看到已经有一条新的集群记录啦")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("规则说明")]),s._v(" "),a("p",[s._v("服务端中集群是使用"),a("code",[s._v("安装 id")]),s._v("来区分的，因为您全新安装时会自动生成一个新的"),a("code",[s._v("安装 id")])])]),s._v(" "),a("h3",{attrs:{id:"集群安装-id"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集群安装-id"}},[s._v("#")]),s._v(" 集群安装 ID")]),s._v(" "),a("p",[s._v("集群安装 ID 创建规则：当服务端在启动时候会自动检查数据目录中是否存在："),a("code",[s._v("INSTALL.json")]),s._v(" 文件，如果不存在则进行自动创建")]),s._v(" "),a("p",[s._v("文件数据示例：")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"installTime"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2021-03-16 17:05:32"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"installId"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"91c653b3e17c4021b486416e33d014c8"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"desc"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"请勿删除此文件,服务端安装id和插件端互通关联"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("其中的 "),a("code",[s._v("installId")]),s._v(" 为当前集群 id,并且集群数据会自动写入到数据库中，集群安装 id 生成规则是 "),a("code",[s._v("uuid")])]),s._v(" "),a("p",[s._v("程序会检查到当前程序的集群安装 id 在数据库中未存在则自动创建一条新记录。")]),s._v(" "),a("h2",{attrs:{id:"配置集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置集群"}},[s._v("#")]),s._v(" 配置集群")]),s._v(" "),a("p",[s._v("在您配置集群前您需要对您集群进行以下配置：")]),s._v(" "),a("ul",[a("li",[s._v("修改集群 ID")]),s._v(" "),a("li",[s._v("已经存在的资产信息进行分组")])]),s._v(" "),a("h3",{attrs:{id:"修改集群-id"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改集群-id"}},[s._v("#")]),s._v(" 修改集群 ID")]),s._v(" "),a("p",[s._v("系统默认的集群 ID 值为："),a("code",[s._v("DEFAULT")])]),s._v(" "),a("p",[s._v("在同一个系统中不同的集群 ID 需要配置为不同的值才能正常使用，反之您在服务端控制台（系统日志）将看到如下错误信息：")]),s._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[s._v("DEFAULT 集群ID冲突："),a("span",{pre:!0,attrs:{class:"token hash constant"}},[s._v("7a175577b0d042c79c1a56b70de4996c")]),s._v(" 默认集群\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("修改集群 id 路径：【服务端管理】->【服务端配置】->【系统配置】->【服务端系统配置】")]),s._v(" "),a("p",[a("code",[s._v("jpom.cluster.id")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/cluster/6a89d7af8e69908538962eda70151af2.png",alt:"修改集群ID",loading:"lazy"}})]),s._v(" "),a("h3",{attrs:{id:"资产分组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#资产分组"}},[s._v("#")]),s._v(" 资产分组")]),s._v(" "),a("p",[s._v("在您配置集群前您需要对您已经存在的资产信息进行分组")]),s._v(" "),a("p",[s._v("资产分组的目的是实现您不同集群下的资产监控和调度")]),s._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("温馨提醒")]),s._v(" "),a("p",[s._v("当您在使用集群功能时，发现资产状态监控不正确，但是您的资产的确在线那么您就需要检查一下对应资产分组绑定的集群是否正常")])]),s._v(" "),a("p",[s._v("需要分组的资产有：")]),s._v(" "),a("ul",[a("li",[s._v("机器数据")]),s._v(" "),a("li",[s._v("SSH 数据")]),s._v(" "),a("li",[s._v("Docker 数据")])]),s._v(" "),a("p",[s._v("配置路径：【系统管理】->【资产管理】->(【机器管理】、【SSH管理】【Docker管理】)")]),s._v(" "),a("h3",{attrs:{id:"未绑定集群的分组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#未绑定集群的分组"}},[s._v("#")]),s._v(" 未绑定集群的分组")]),s._v(" "),a("p",[s._v("如果您在集群页面里面发现存在未绑定集群的分组数据时，您需要检查对应分组中的资产数据应该绑定到哪个集群分组然后进行配置绑定")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/cluster/98bdeee98d70e918658a82e1f962aa0b.png",alt:"集群分组提示",loading:"lazy"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/cluster/2aa65dc93c74a7944a92dc70bbb9a142.png",alt:"编辑集群",loading:"lazy"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/cluster/a6cfd04f4bdf7356f6bc94c4ebb75954.png",alt:"编辑集群页面状态",loading:"lazy"}})]),s._v(" "),a("h3",{attrs:{id:"集群地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集群地址"}},[s._v("#")]),s._v(" 集群地址")]),s._v(" "),a("p",[s._v("因为在 jpom 中实际是安装来多个服务端，如果您需要使用到对应的集群下面的工作空间数据，您还需要访问对应集群的真实地址来达到管理控制对应服务端（集群）。")]),s._v(" "),a("p",[s._v("所以集群地址，请填写对应集群的真实访问地址（可以是反向代理后的）")]),s._v(" "),a("h3",{attrs:{id:"工作空间绑定集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#工作空间绑定集群"}},[s._v("#")]),s._v(" 工作空间绑定集群")]),s._v(" "),a("p",[s._v("当您上次操作均完成后您还有最后一步就是给对应工作空间绑定一个集群来实现工作空间和集群关系能一一对应。")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/cluster/ed64da307fd296738380b3d7bb63daf7.png",alt:"工作空间绑定集群",loading:"lazy"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/cluster/057e74f1ffeca162e0c0151fc903390d.png",alt:"工作空间绑定集群2",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"切换集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#切换集群"}},[s._v("#")]),s._v(" 切换集群")]),s._v(" "),a("p",[s._v("当您为所有集群都配置来访问地址时您可以在【右上角昵称】->【下拉处】切换")]),s._v(" "),a("p",[s._v("如果您未配置集群的访问地址可以看到集群名，但是切换按钮是禁用状态。")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/cluster/3cea7b54a228c319207d3fce6734afe0.png",alt:"无非切换集群",loading:"lazy"}})]),s._v(" "),a("p",[s._v("您配置正确的地址后按钮即可用：")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/cluster/190c77c9475e3ed370442ae3904c1681.png",alt:"正常切换集群",loading:"lazy"}})]),s._v(" "),a("p",[s._v("点击您想要切换到的集群后即可跳转到对应集群，当然您也可以手动在浏览器输入集群地址访问。")]),s._v(" "),a("h2",{attrs:{id:"删除集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除集群"}},[s._v("#")]),s._v(" 删除集群")]),s._v(" "),a("p",[s._v("当您想删除某个集群流程比较简单")]),s._v(" "),a("ol",[a("li",[s._v("停止对应集群服务端并卸载")]),s._v(" "),a("li",[s._v("解绑工作空间和集群关系")]),s._v(" "),a("li",[s._v("资产分组解绑\n"),a("ol",[a("li",[s._v("将需要删除集群绑定的资产分组重新分配到新集群")])])]),s._v(" "),a("li",[s._v("删除集群")])]),s._v(" "),a("p",[s._v("如果您在删除中提示："),a("strong",[s._v("不能删除在线的集群")]),s._v(" 那么说明您选错要删除集群了")]),s._v(" "),a("p",[s._v("系统中如果当前集群还在心跳（在线）是不能删除的，心跳机制是 "),a("code",[s._v("30 秒")]),s._v("一次")]),s._v(" "),a("p",[s._v("如果您在删除中提示："),a("strong",[s._v("当前集群还被工作空间绑定不能删除")]),s._v(" 那么说明您未解绑集群和工作空间关系。")]),s._v(" "),a("h2",{attrs:{id:"修改集群心跳"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改集群心跳"}},[s._v("#")]),s._v(" 修改集群心跳")]),s._v(" "),a("p",[s._v("心跳默认 30 秒检查集群在线状态，前提是已经配置集群地址后。")]),s._v(" "),a("p",[s._v("您可以自定义检查集群状态时间：")]),s._v(" "),a("p",[s._v("修改集群心跳路径：【服务端管理】->【服务端配置】->【系统配置】->【服务端系统配置】")]),s._v(" "),a("p",[a("code",[s._v("jpom.cluster.heart-second")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/cluster/6a89d7af8e69908538962eda70151af2.png",alt:"修改集群心跳",loading:"lazy"}})])])}),[],!1,null,null,null);a.default=r.exports},521:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":this.$parent.slotKey}},[s("p",[this._v("文档努力编写中。。。敬请期待。。。")])])}),[],!1,null,null,null);a.default=r.exports},522:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":this.$parent.slotKey}},[s("p",[this._v("文档努力编写中。。。敬请期待。。。")])])}),[],!1,null,null,null);a.default=r.exports},523:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":this.$parent.slotKey}},[s("p",[this._v("文档努力编写中。。。敬请期待。。。")])])}),[],!1,null,null,null);a.default=r.exports},524:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":this.$parent.slotKey}},[s("p",[this._v("文档努力编写中。。。敬请期待。。。")])])}),[],!1,null,null,null);a.default=r.exports},528:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"完整的容器构建-dsl-示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#完整的容器构建-dsl-示例"}},[s._v("#")]),s._v(" 完整的容器构建 dsl 示例")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 基础镜像 目前仅支持 ubuntu-latest\nrunsOn: ubuntu-latest\n# 这里标明使用工作空间的docker管理列表的哪个 docker 构建,填写 docker 标签 默认查询可用的第一个,如果 tag 查询出多个也选择第一个结果\nfromTag: xxx\nsteps:\n  - uses: java\n    version: 8\n  - uses: maven\n    version: 3.8.5\n  - uses: node\n    version: 16.3.0\n# 将容器中的文件缓存到 docker 卷中\n  - uses: cache\n    path: /root/.m2\n  - run: npm config set registry https://registry.npmmirror.com\n# 内置变量 ${JPOM_WORKING_DIR} ${JPOM_BUILD_ID}\n  - run: cd  ${JPOM_WORKING_DIR}/web-vue && npm i && npm run build\n  - run: cd ${JPOM_WORKING_DIR} && mvn package -s script/settings.xml\n# 宿主机目录和容器目录挂载 /host:/container:ro\n# binds:\n#  - /Users/user/.m2/settings.xml:/root/.m2/\n# 宿主机文件上传到容器 /host:/container:true\n# dirChildrenOnly = true will create /var/data/titi and /var/data/tata dirChildrenOnly = false will create /var/data/root/titi and /var/data/root/tata\n# copy:\n#  - /Users/user/.m2/settings.xml:/root/.m2/:false\n# 给容器添加环境变量\nenv:\n  NODE_OPTIONS: --max-old-space-size=900\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br")])])])}),[],!1,null,null,null);a.default=r.exports},541:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"用户属性会包含"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用户属性会包含"}},[s._v("#")]),s._v(" 用户属性会包含")]),s._v(" "),a("ol",[a("li",[s._v("登录名")]),s._v(" "),a("li",[s._v("昵称")]),s._v(" "),a("li",[s._v("密码")]),s._v(" "),a("li",[s._v("用户资料")])]),s._v(" "),a("h3",{attrs:{id:"设置用户资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置用户资料"}},[s._v("#")]),s._v(" 设置用户资料")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("用户登录，打开用户资料")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/user/user.png",alt:"用户资料",loading:"lazy"}})])]),s._v(" "),a("li",[a("p",[s._v("设置通知地址")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/user/info.png",alt:"通知地址",loading:"lazy"}})])])]),s._v(" "),a("blockquote",[a("p",[s._v("设置通知邮箱需先配置发件邮箱。请先到服务端后台系统管理-邮箱配置中设置，详情请查看"),a("RouterLink",{attrs:{to:"/文档/9999.历史文档/0010.用户管理/系统管理/邮箱配置.html"}},[s._v("邮箱配置")])],1)]),s._v(" "),a("blockquote",[a("p",[s._v("钉钉群")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("获取自定义机器人webhook\n在机器人管理页面选择“自定义”机器人，输入机器人名字并选择要发送消息的群。如果需要的话，可以为机器人设置一个头像。点击“完成添加”，完成后会生成Hook地址，如下图：\n点击“复制”按钮，即可获得这个机器人对应的Webhook地址，其格式如下：\n    https://oapi.dingtalk.com/robot/send?access_token=xxxxxxxx\n")])])]),a("p",[a("img",{attrs:{src:"/images/Get_ding_hook.jpg",alt:"输入图片说明",title:"屏幕截图.png",loading:"lazy"}})]),s._v(" "),a("h2",{attrs:{id:"操作日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作日志"}},[s._v("#")]),s._v(" 操作日志")]),s._v(" "),a("blockquote",[a("p",[s._v("操作日志是记录所有用户对系统的一些操作记录")])]),s._v(" "),a("blockquote",[a("p",[s._v("所有人都可以看到登录日志")])]),s._v(" "),a("p",[s._v("会记录：")]),s._v(" "),a("ol",[a("li",[s._v("操作用户的登录名")]),s._v(" "),a("li",[s._v("操作人的IP")]),s._v(" "),a("li",[s._v("所属节点Id")]),s._v(" "),a("li",[s._v("数据Id(请求参数的ID字段)")]),s._v(" "),a("li",[s._v("操作类型，不同的操作是不同的类型"),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cn.keepbx.jpom.model.log.UserOperateLogV1.OptType\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[s._v("执行结果")]),s._v(" "),a("li",[s._v("操作时间")])]),s._v(" "),a("blockquote",[a("p",[s._v("点击详情可以查看更多信息")])]),s._v(" "),a("ol",[a("li",[s._v("浏览器标识")]),s._v(" "),a("li",[s._v("请求的所有参数")]),s._v(" "),a("li",[s._v("响应结果")])])])}),[],!1,null,null,null);a.default=r.exports},544:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"jpom-的参数配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jpom-的参数配置"}},[s._v("#")]),s._v(" Jpom 的参数配置")]),s._v(" "),a("p",[s._v("在项目运行的根路径下的"),a("code",[s._v("extConfig.yml")]),s._v("文件")]),s._v(" "),a("ol",[a("li",[s._v("插件端示例："),a("code",[s._v("extConfig.yml")])]),s._v(" "),a("li",[s._v("服务端示例："),a("code",[s._v("extConfig.yml")])])]),s._v(" "),a("h2",{attrs:{id:"如何修改程序运行端口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何修改程序运行端口"}},[s._v("#")]),s._v(" 如何修改程序运行端口")]),s._v(" "),a("blockquote",[a("p",[s._v("修改管理程序命令文件中 --server.port=2122")])]),s._v(" "),a("h2",{attrs:{id:"如何指定jpom运行jvm内存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何指定jpom运行jvm内存"}},[s._v("#")]),s._v(" 如何指定Jpom运行jvm内存")]),s._v(" "),a("blockquote",[a("p",[s._v("修改管理程序命令文件中 JVM 变量添加 -Xms512m -Xmx1024m")])]),s._v(" "),a("h2",{attrs:{id:"如何修改程序日志路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何修改程序日志路径"}},[s._v("#")]),s._v(" 如何修改程序日志路径")]),s._v(" "),a("blockquote",[a("p",[s._v("修改管理程序命令文件中 --jpom.log=/jpom/log/")])]),s._v(" "),a("h2",{attrs:{id:"如何修改会话超时时长"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何修改会话超时时长"}},[s._v("#")]),s._v(" 如何修改会话超时时长")]),s._v(" "),a("blockquote",[a("p",[s._v("在管理程序命令文件中 ARGS 变量添加 --tomcat.sessionTimeOut=1800")])]),s._v(" "),a("h2",{attrs:{id:"如何修改-jpom-自身控制台日志级别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何修改-jpom-自身控制台日志级别"}},[s._v("#")]),s._v(" 如何修改 Jpom 自身控制台日志级别")]),s._v(" "),a("blockquote",[a("p",[s._v("修改管理程序命令文件中"),a("code",[s._v("--spring.profiles.active=")]),s._v("属性值"),a("code",[s._v("pro/dev")])])]),s._v(" "),a("h2",{attrs:{id:"如何修改-jpom-数据存储目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何修改-jpom-数据存储目录"}},[s._v("#")]),s._v(" 如何修改 Jpom 数据存储目录")]),s._v(" "),a("blockquote",[a("p",[s._v("修改外部配置文件"),a("code",[s._v("extConfig.yml")]),s._v("中的 jpom.path 属性")])]),s._v(" "),a("h2",{attrs:{id:"如何修改-jpom-插件端账户-密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何修改-jpom-插件端账户-密码"}},[s._v("#")]),s._v(" 如何修改 Jpom 插件端账户/密码")]),s._v(" "),a("blockquote",[a("p",[s._v("修改插件端外部配置文件"),a("code",[s._v("extConfig.yml")]),s._v("中的 jpom.authorize.agentName 和 jpom.authorize.agentPwd 属性")])])])}),[],!1,null,null,null);a.default=r.exports},547:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){return(0,this._self._c)("ContentSlotsDistributor",{attrs:{"slot-key":this.$parent.slotKey}})}),[],!1,null,null,null);a.default=r.exports},553:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h3",{attrs:{id:"文件缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件缓存"}},[s._v("#")]),s._v(" 文件缓存")]),s._v(" "),a("blockquote",[a("p",[s._v("用户上传文件临时的缓存文件夹")])]),s._v(" "),a("h3",{attrs:{id:"进程名缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进程名缓存"}},[s._v("#")]),s._v(" 进程名缓存")]),s._v(" "),a("blockquote",[a("p",[s._v("Jpom在解析进程为Jpom项目，会进行缓存加快解析速度")])]),s._v(" "),a("h3",{attrs:{id:"进程端口缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进程端口缓存"}},[s._v("#")]),s._v(" 进程端口缓存")]),s._v(" "),a("blockquote",[a("p",[s._v("Jpom在解析进程端口时，会进行缓存加快解析速度")])]),s._v(" "),a("h3",{attrs:{id:"在读取的日志文件数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在读取的日志文件数"}},[s._v("#")]),s._v(" 在读取的日志文件数")]),s._v(" "),a("blockquote",[a("p",[s._v("正在实时查看日志的文件的数据量")])])])}),[],!1,null,null,null);a.default=r.exports},555:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"ssh管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh管理"}},[s._v("#")]),s._v(" SSH管理")]),s._v(" "),a("h4",{attrs:{id:"功能介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#功能介绍"}},[s._v("#")]),s._v(" 功能介绍")]),s._v(" "),a("p",[s._v("配置和管理通过SSH渠道远程控制访问的服务器列表和文件管理功能入口，SSH管理模块所有功能不依赖于插件端")]),s._v(" "),a("h4",{attrs:{id:"添加ssh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加ssh"}},[s._v("#")]),s._v(" 添加SSH")]),s._v(" "),a("p",[s._v("编辑ssh配置信息"),a("br"),a("br")]),s._v(" "),a("p",[a("img",{attrs:{src:"/images/node/server_sshedit.png",alt:"sshedite",loading:"lazy"}}),a("br"),a("br")]),s._v(" "),a("p",[a("code",[s._v("SSH名称:")]),s._v("当前SSH连接名称，建议使用IP/域名/hostname命名"),a("br"),a("br"),s._v(" "),a("code",[s._v("Hostname:")]),s._v("当前SSH连接服务器的IP "),a("code",[s._v("Port:")]),s._v("当前SSH端口，默认22，请填22"),a("br"),a("br"),s._v(" "),a("code",[s._v("Username:")]),s._v("当前服务器登陆账户"),a("br"),a("br"),s._v(" "),a("code",[s._v("Password:")]),s._v("服务器登陆密码，或者证书密钥"),a("br"),a("br"),s._v(" "),a("code",[s._v("认证方式:")]),s._v("可选择 PASS 或者 PUBKEY"),a("br"),a("br"),s._v(" "),a("code",[s._v("编码方式:")]),s._v("可选择SSH控制台字符集编码，编码请您根据服务器编码设置"),a("br"),a("br"),s._v(" "),a("code",[s._v("文件目录:")]),s._v("授权可直接访问的目录，多目录回车换行即可"),a("br"),a("br")]),s._v(" "),a("h4",{attrs:{id:"ssh列表展示"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh列表展示"}},[s._v("#")]),s._v(" SSH列表展示")]),s._v(" "),a("p",[s._v("展示当前已配置正确的SSH列表信息"),a("br"),a("br"),s._v(" "),a("img",{attrs:{src:"/images/node/server_sshlist.png",alt:"sshlist",loading:"lazy"}}),a("br"),a("br"),s._v(" "),a("code",[s._v("名称:")]),s._v("SSH的名称 "),a("code",[s._v("host:")]),s._v("SSH的IP"),a("code",[s._v("user:")]),s._v("登陆用户"),a("code",[s._v("port")]),s._v("SSH端口"),a("br"),a("br"),s._v("\n*"),a("code",[s._v("关联节点:")]),s._v("若已当前SSH对应管理的服务器上已安装插件端，可在添加节点配置时候关联SSH，成功关联后，当前SSH列表\n信息的"),a("code",[s._v("关联节点")]),s._v("字段展示的将会是被关联节点的名称，可通过该名称快速跳转管理节点功能相关页面"),a("br"),a("br"),s._v(" "),a("img",{attrs:{src:"/images/node/server_sshlistinstall.png",alt:"sshlistinstall",loading:"lazy"}}),a("br"),a("br")]),s._v(" "),a("p",[s._v("若当前SSH对应管理的服务器上未安装插件端，即节点列表尚未配置相关服务器节点信息时。"),a("code",[s._v("关联节点")]),s._v("字段展示的将会是\n"),a("code",[s._v("安装")]),s._v("按钮控件，可通过此按钮快速安装当前服务器插件端和配置当前服务器的节点信息，详情请查阅下文**【SSH快捷安装配置插件端】**"),a("br"),a("br"),s._v(" "),a("img",{attrs:{src:"/images/node/server_sshlistnoinstall.png",alt:"sshlistnoinstall",loading:"lazy"}}),a("br"),a("br")]),s._v(" "),a("p",[a("code",[s._v("操作:")]),s._v("提供当前SSH支持的三种功能入口"),a("br"),a("br"),s._v("\n1. "),a("code",[s._v("编辑:")]),s._v("编辑SSH配置信息"),a("br"),a("br"),s._v("\n2. "),a("code",[s._v("终端:")]),s._v("打开当前SSH渠道的远程访问控制台"),a("br"),a("br"),s._v(" "),a("img",{attrs:{src:"/images/node/server_sshterm.png",alt:"sshterm",loading:"lazy"}}),a("br"),a("br"),s._v("\n3. "),a("code",[s._v("文件管理:")]),s._v("基于JSCH的文件管理工具，详情请查阅下文**【SSH文件管理】**")]),s._v(" "),a("h4",{attrs:{id:"ssh快捷安装配置插件端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh快捷安装配置插件端"}},[s._v("#")]),s._v(" SSH快捷安装配置插件端")]),s._v(" "),a("p",[s._v("快速安装SSH对应服务器的插件端并快速配置节点信息"),a("br"),a("br")]),s._v(" "),a("p",[s._v("点击"),a("code",[s._v("安装")]),s._v("控件，打开安装插件端"),a("br"),a("br"),s._v(" "),a("img",{attrs:{src:"/images/node/server_sshinstalledit.png",alt:"sshinstalledit",loading:"lazy"}}),a("br"),a("br")]),s._v(" "),a("p",[a("code",[s._v("节点ID:")]),s._v("遵守唯一性约束,首次创建成功后"),a("code",[s._v("不可再次修改")]),a("br"),a("br"),s._v(" "),a("code",[s._v("节点名称:")]),s._v("当前节点名称描述,不限定 建议以服务器"),a("code",[s._v("域名/IP/hostname")]),s._v("命名"),a("br"),a("br"),s._v(" "),a("code",[s._v("节点协议:")]),s._v("支持http/https"),a("code",[s._v("节点地址:")]),s._v("插件端服务的ip+port(或者域名),非url"),a("code",[s._v("不带协议")]),a("br")]),s._v(" "),a("blockquote",[a("p",[s._v("注意：如上即为"),a("RouterLink",{attrs:{to:"/节点管理/添加节点.html"}},[s._v("创建节点配置参数")]),s._v("的简化配置信息，安装成功后将按照如上所配置快速创建\n默认分组、默认启用节点和默认不开启监控的节点**【节点管理列表可见可二次修改】**")],1)]),s._v(" "),a("p",[a("code",[s._v("安装路径:")]),s._v("远程安装插件端的安装目录**【目录必须在授权目录层级之下，目录不存在会自动创建，注意对存在目录的覆盖情况】**"),a("br"),a("br"),s._v(" "),a("code",[s._v("上传zip包:")]),s._v("上传插件端安装包（agent-x.x.x-release.zip）")]),s._v(" "),a("blockquote",[a("p",[s._v("注意：安装包"),a("strong",[s._v("必须")]),s._v("是Jpom官方发布结构类型的插件包"),a("code",[s._v("agent-x.x.x-release.zip")]),a("br"),s._v("\n可自行解压修改相关启动参数，请参阅"),a("RouterLink",{attrs:{to:"/安装使用/启动参数.html"}},[s._v("启动参数")]),a("br"),s._v("\n修改完请"),a("strong",[s._v("必须")]),s._v("按照Jpom官方发布的结构类型压缩回插件包"),a("br"),s._v("\n若不自定义修改官方发布的Jpom插件包（agent-x.x.x-release.zip），则将以默认参数方式安装，详情请查阅"),a("RouterLink",{attrs:{to:"/安装使用/开始安装.html"}},[s._v("开始安装-简易安装流程")])],1)]),s._v(" "),a("h4",{attrs:{id:"ssh文件管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh文件管理"}},[s._v("#")]),s._v(" SSH文件管理")]),s._v(" "),a("p",[s._v("使用JSCH不依赖于插件端的文件管理系统，点击"),a("code",[s._v("文件")]),s._v("进入SSH授权目录起的文件目录"),a("br"),a("br"),s._v(" "),a("img",{attrs:{src:"/images/node/wjgl_list.png",alt:"wjgllist",loading:"lazy"}}),a("br"),a("br")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("点击文件路径下子目录可快速跳转到对应目录")])]),s._v(" "),a("li",[a("p",[s._v("点击表格中文件类型的行即可进入该目录下")])]),s._v(" "),a("li",[a("p",[s._v("上传的文件会采用SFTP协议并自动保存到与文件路径对应的目录中")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("文件夹")]),s._v("显示文件类型为文件夹，可进行"),a("strong",[s._v("删除")]),s._v("操作")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("压缩包")]),s._v("可进行"),a("strong",[s._v("删除")]),s._v("、"),a("strong",[s._v("解压")]),s._v("和"),a("strong",[s._v("下载")]),s._v("操作")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("普通文件")]),s._v("可进行"),a("strong",[s._v("删除")]),s._v("、"),a("strong",[s._v("终端（查看）"),a("strong",[s._v("和")]),s._v("下载")]),s._v("操作")])])])])}),[],!1,null,null,null);a.default=r.exports},559:function(s,a,t){"use strict";t.r(a);var e=t(7),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"_2-10-47-2023-12-25"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-47-2023-12-25"}},[s._v("#")]),s._v(" 2.10.47 (2023-12-25)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 容器构建支持自定义插件（感谢"),a("a",{attrs:{href:"https://gitee.com/WaHaHaqqww",target:"_blank",rel:"noopener noreferrer"}},[s._v("@远方"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I8PEWI",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I8PEWI"),a("OutboundLink")],1),s._v("）")]),s._v(" "),a("li",[s._v("【server】新增 容器管理新增导出、导入镜像")]),s._v(" "),a("li",[s._v("【server】新增 环境变量支持触发器获取、修改")]),s._v(" "),a("li",[s._v("【server】优化 容器日志、集群任务日志支持下载（感谢@在时间里流浪）")]),s._v(" "),a("li",[s._v("【all】新增 部分项目支持迁移工作空间和逻辑节点（感谢@奇奇）")]),s._v(" "),a("li",[s._v("【server】优化 资产管理 SSH 支持配置禁用监控（避免频繁登录）"),a("code",[s._v("jpom.assets.ssh.disable-monitor-group-name")]),s._v("（感谢@Again...）")]),s._v(" "),a("li",[s._v("【server】优化 资产管理 SSH 支持配置监控周期："),a("code",[s._v("jpom.assets.ssh.monitor-cron")])])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】升级 数据库 h2 、mwiede、web axios 版本")]),s._v(" "),a("li",[s._v("【server】修复 构建事件脚本未修改执行状态和退出码问题")]),s._v(" "),a("li",[s._v("【server】优化 构建事件脚本支持多选（顺序执行其中有一个中断将结束执行后续脚本）（感谢@loyal）")]),s._v(" "),a("li",[s._v("【server】优化 服务端脚本触发类型新增构建事件")]),s._v(" "),a("li",[s._v("【agent】删除 项目副本中弃用兼容字段 "),a("code",[s._v("parendId")])]),s._v(" "),a("li",[s._v("【server】优化 Docker 集群任务日志支持筛选行数、是否显示时间戳（感谢@在时间里流浪）")]),s._v(" "),a("li",[s._v("【server】优化 项目控制台日志输出 N 人查看改为 N 个会话（@冬）")]),s._v(" "),a("li",[s._v("【server】优化 添加超级管理员账号提醒勿使用常用账号")]),s._v(" "),a("li",[s._v("【server】优化 逻辑节点节目取消全局 loading（感谢@小菜鸡）")]),s._v(" "),a("li",[s._v("【server】优化 新增个性化配置全屏打开日志弹窗（构建、SSH、脚本、Docker等日志）（感谢@张飞鸿）")]),s._v(" "),a("li",[s._v("【server】修复 项目副本无法保存（修改中不能删除副本集、请到副本集中删除）")]),s._v(" "),a("li",[s._v("【server】优化 服务端中可以支持创建编辑项目、创建节点脚本啦！！！")]),s._v(" "),a("li",[s._v("【server】优化 项目列表支持删除项目、自动刷新项目")]),s._v(" "),a("li",[s._v("【server】优化 仓库支持查看关联的构建")]),s._v(" "),a("li",[s._v("【server】修复 删除服务端脚本日志如果脚本不存在不能删除")]),s._v(" "),a("li",[s._v("【server】优化 资产机器卡片试图部分场景未对齐问题")]),s._v(" "),a("li",[s._v("【server】优化 部分页面在小屏兼容（资产 Docker、节点分发）")]),s._v(" "),a("li",[s._v("【server】优化 节点脚本支持解绑（避免无非使用的服务器无非删除脚本）")]),s._v(" "),a("li",[s._v("【server】优化 白名单配置提示 nginx、证书功能将下线")]),s._v(" "),a("li",[s._v("【all】移除 插件端配置远程下载 host 输入框")]),s._v(" "),a("li",[s._v("【server】优化 导入 SSH、项目 CSV 数据自动识别编码格式")]),s._v(" "),a("li",[s._v("【server】优化 执行 SSH 脚本获取流异常：getInputStream() should be called before connect()")])]),s._v(" "),a("h3",{attrs:{id:"⚠️-注意"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-注意"}},[s._v("#")]),s._v(" ⚠️ 注意")]),s._v(" "),a("p",[s._v("新增容器构建自定义插件说明：")]),s._v(" "),a("ol",[a("li",[s._v("到 【系统管理】->【配置管理】->【系统配置目录】 中找到 "),a("code",[s._v("docker/uses")]),s._v(" 目录")]),s._v(" "),a("li",[s._v("添加插件配置文件 "),a("code",[s._v("/docker/uses/java8/install.sh")]),s._v(" 其中 "),a("code",[s._v("java8")]),s._v(" 为新增的插件名")]),s._v(" "),a("li",[s._v("注意脚本中需要自行控制插件相关依赖的文件，需要将最新的文件保持到 "),a("code",[s._v("/opt/${name}/")]),s._v(" 目录下，其中 ${name} 为插件名")]),s._v(" "),a("li",[s._v("辅助说明1：插件支持自定义环境变量")]),s._v(" "),a("li",[s._v("辅助说明2：自定义环境变量中需要引用插件目录请使用 "),a("code",[s._v("${JPOM_PLUGIN_PATH}")])]),s._v(" "),a("li",[s._v("系统默认集成了："),a("code",[s._v("java")]),s._v("、"),a("code",[s._v("maven")]),s._v("、"),a("code",[s._v("node")]),s._v("、"),a("code",[s._v("go")]),s._v("、"),a("code",[s._v("python3")]),s._v("、"),a("code",[s._v("gradle")]),s._v("、"),a("code",[s._v("cache")]),s._v(" 默认插件有依赖版本检查如果您的网络不通建议自行创建插件来规避默认检查")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-46-2023-12-18"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-46-2023-12-18"}},[s._v("#")]),s._v(" 2.10.46 (2023-12-18)")]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-2"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 容器构建下载产物未关闭文件流占用句柄问题（感谢@在时间里流浪）")]),s._v(" "),a("li",[s._v("【all】优化 ConcurrentHashMap 修改为线程安全的 hutoll[SafeConcurrentHashMap]（感谢@在时间里流浪）")]),s._v(" "),a("li",[s._v("【all】升级 mwiede.jsch、oshi、fastjson、hutool、spring-boot、docker-java")]),s._v(" "),a("li",[s._v("【server】优化 SSH 脚本在部分场景阻塞卡死（ChannelType.EXEC 不添加超时时间）")]),s._v(" "),a("li",[s._v("【server】优化 SSH 脚本执行输出退出码")]),s._v(" "),a("li",[s._v("【server】优化 解决构建流程,环境变量env里出现value==null出现null报错\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/NineAsk",target:"_blank",rel:"noopener noreferrer"}},[s._v("@周冰"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/pulls/197",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee pr 197"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】优化 SSH 脚本执行记录退出码")]),s._v(" "),a("li",[s._v("【server】优化 服务端脚本执行记录新增执行状态和退出码")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-45-2023-10-17"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-45-2023-10-17"}},[s._v("#")]),s._v(" 2.10.45 (2023-10-17)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-2"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 SSH 新增独立管理面板（感谢"),a("a",{attrs:{href:"https://gitee.com/chao_a",target:"_blank",rel:"noopener noreferrer"}},[s._v("@超人那个超i"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I7UFEX",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I7UFEX"),a("OutboundLink")],1),s._v("）")]),s._v(" "),a("li",[s._v("【agent】新增 DSL 项目支持配置脚本环境变量（感谢"),a("a",{attrs:{href:"https://gitee.com/chenxu8989",target:"_blank",rel:"noopener noreferrer"}},[s._v("@陈旭"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I80PTK",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I80PTK"),a("OutboundLink")],1),s._v("）")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-3"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】优化 构建产物同步到文件中心支持独立配置保留天数（感谢"),a("a",{attrs:{href:"https://gitee.com/zhangxin1229",target:"_blank",rel:"noopener noreferrer"}},[s._v("@zhangxin2477"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I82G2F",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I82G2F"),a("OutboundLink")],1),s._v("）")]),s._v(" "),a("li",[s._v("【server】优化 不能删除超级管理员账号")]),s._v(" "),a("li",[s._v("【agent】修复 Agent.sh 脚本的缺少方法问题（感谢"),a("a",{attrs:{href:"https://github.com/yusiwen",target:"_blank",rel:"noopener noreferrer"}},[s._v("@Siwen Yu"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://github.com/dromara/Jpom/issues/64",target:"_blank",rel:"noopener noreferrer"}},[s._v("Github issues 64"),a("OutboundLink")],1),s._v("）")]),s._v(" "),a("li",[s._v("【server】优化 系统管理查看操作日志显示全部工作空间")]),s._v(" "),a("li",[s._v("【server】优化 容器构建判断构建异常（严格模式异常中断构建）（感谢@在时间里流浪）")]),s._v(" "),a("li",[s._v("【server】修复 构建流程中断触发 success 事件（感谢@在时间里流浪）")]),s._v(" "),a("li",[s._v("【server】优化 SSH 独立管理面板支持快捷使用文件管理")]),s._v(" "),a("li",[s._v("【server】优化 构建详情页面支持快捷回滚、查看构建日志（感谢"),a("a",{attrs:{href:"https://gitee.com/taochach",target:"_blank",rel:"noopener noreferrer"}},[s._v("@縁來只爲伱"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I7YSNH",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I7YSNH"),a("OutboundLink")],1),s._v("）")]),s._v(" "),a("li",[s._v("【all】升级 hutool、commons-compress")]),s._v(" "),a("li",[s._v("【agent】修复 重启项目偶发 NPE（监听日志关闭事件）（感谢"),a("a",{attrs:{href:"https://gitee.com/caiqiaoyu",target:"_blank",rel:"noopener noreferrer"}},[s._v("@caiqy"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I7Z2U6",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I7Z2U6"),a("OutboundLink")],1),s._v("）")]),s._v(" "),a("li",[s._v("【server】优化 构建支持配置环境变量实现产物打包为 "),a("code",[s._v("tar.gz")]),s._v(" ("),a("strong",[s._v("USE_TAR_GZ=1")]),s._v(")")]),s._v(" "),a("li",[s._v("【server】修复 文件管理偶发无法查看发片下载地址")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-44-2023-09-06"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-44-2023-09-06"}},[s._v("#")]),s._v(" 2.10.44 (2023-09-06)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-3"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 支持 git submodules\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/Croce",target:"_blank",rel:"noopener noreferrer"}},[s._v("@Croce"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/pulls/195",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee pr 195"),a("OutboundLink")],1),s._v(" ）")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-4"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 资产管理共享仓库新建归属到工作空间问题（感谢@沈钊）")]),s._v(" "),a("li",[s._v("【server】升级 springboot 、oshi、docker-java、jgit")]),s._v(" "),a("li",[s._v("【server】升级 mwiede.jsch 版本")]),s._v(" "),a("li",[s._v("【server】优化 构建回滚创建新的构建记录（感谢"),a("a",{attrs:{href:"https://gitee.com/autools",target:"_blank",rel:"noopener noreferrer"}},[s._v("@Smith"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I7VEJA",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I7VEJA"),a("OutboundLink")],1),s._v("）")]),s._v(" "),a("li",[s._v("【server】修复 新增资产无法正常监控问题（感谢@乔、@MichelleChung、@Pluto）")]),s._v(" "),a("li",[s._v("【server】优化 编辑集群地址不验证，调整到心跳检测验证（感谢@黄纲）")]),s._v(" "),a("li",[s._v("【server】优化 构建新增环境变量：BUILD_ORIGINAL_RESULT_DIR_FILE、BUILD_RESULT_DIR_FILE（发布流程）(感谢@黄纲)")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-43-2023-08-25"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-43-2023-08-25"}},[s._v("#")]),s._v(" 2.10.43 (2023-08-25)")]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-5"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 未配置集群地址时无法切换工作空间（感谢@黄纲）")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-42-2023-08-24"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-42-2023-08-24"}},[s._v("#")]),s._v(" 2.10.42 (2023-08-24)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-4"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 集群化管理工作空间（感谢@定格、"),a("a",{attrs:{href:"https://gitee.com/iniushi",target:"_blank",rel:"noopener noreferrer"}},[s._v("@paobu"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I7UG5V",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I7UG5V"),a("OutboundLink")],1),s._v("）")]),s._v(" "),a("li",[s._v("【server】优化 ssh 相关功能支持 openssh8+\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/gclm",target:"_blank",rel:"noopener noreferrer"}},[s._v("@孤城落寞"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/pulls/193",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee pr 193"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】新增 SSH\n文件管理修改文件权限功能（感谢 "),a("a",{attrs:{href:"https://gitee.com/michelle1028",target:"_blank",rel:"noopener noreferrer"}},[s._v("@MichelleChung"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6VDXS",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6VDXS"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】新增 Docker 容器重建功能，即删除原有的容器，重新创建一个新的容器")]),s._v(" "),a("li",[s._v("【server】新增 Docker 管理增加 SSH 连接")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-6"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 资产管理 SSH 管理系统名称显示未知问题（感谢@勤思·）")]),s._v(" "),a("li",[s._v("【server】优化 资产管理 Docker 管理支持配置分组")]),s._v(" "),a("li",[s._v("【server】优化 仓库管理支持配置分组")]),s._v(" "),a("li",[s._v("【server】优化 SSH 文件夹支持前端排序（感谢@勤思·）")]),s._v(" "),a("li",[s._v("【server】优化 仓库账号、 SSH 证书密码支持选择环境变量")]),s._v(" "),a("li",[s._v("【all】升级 commons-compress、fastjson、hutool 版本")]),s._v(" "),a("li",[s._v("【server】优化 maven 依赖冲突")]),s._v(" "),a("li",[s._v("【server】优化 文件发布-节点发布文件名使用真实名称（感谢@勤思·）")]),s._v(" "),a("li",[s._v("【server】优化 文件发布-ssh发布新增变量：FILE_NAME、FILE_EXT_NAME")]),s._v(" "),a("li",[s._v("【server】升级 h2、SpringBoot 版本")]),s._v(" "),a("li",[s._v("【server】使用系统git时，无法克隆tag问题优化 （感谢@唐明）")]),s._v(" "),a("li",[s._v("【server】优化 SSH 和 代码仓库的密码从工作空间变量中读取")]),s._v(" "),a("li",[s._v("【server】优化\n删除工作空间前预检查关联数据存在情况（感谢 "),a("a",{attrs:{href:"https://gitee.com/chenxu8989",target:"_blank",rel:"noopener noreferrer"}},[s._v("@陈旭"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I7F0ZN",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I7F0ZN"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】优化\n退出登录支持彻底退出、切换账号退出（感谢 "),a("a",{attrs:{href:"https://gitee.com/wangfubiao",target:"_blank",rel:"noopener noreferrer"}},[s._v("@wangfubiao"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I7GA5Q",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I7GA5Q"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】优化 IP 白名单验证忽略 IPV6 情况")]),s._v(" "),a("li",[s._v("【server】优化 服务端缓存管理支持查看黑名单 IP 详细信息（感谢@酱总）")]),s._v(" "),a("li",[s._v("【server】修复 SSH\n编辑输入框出现部分关键词时保持报错（感谢 "),a("a",{attrs:{href:"https://gitee.com/hjdyzy",target:"_blank",rel:"noopener noreferrer"}},[s._v("@一只羊"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I7E3UG",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I7E3UG"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】优化 日志组件支持显示 \\t 制表符、清空缓冲区滚动到顶部")]),s._v(" "),a("li",[s._v("【server】修复 彻底删除节点分发时未自动删除关联日志（感谢@ccx2480）")]),s._v(" "),a("li",[s._v("【server】修复\n节点管理中脚本模板翻页无效（感谢 "),a("a",{attrs:{href:"https://gitee.com/wangfubiao",target:"_blank",rel:"noopener noreferrer"}},[s._v("@wangfubiao"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I7F0RS",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I7F0RS"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】优化\n工作空间配置页面中新增节点分发白名单配置入口（感谢 "),a("a",{attrs:{href:"https://gitee.com/chenxu8989",target:"_blank",rel:"noopener noreferrer"}},[s._v("@陈旭"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I7F0W0",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I7F0W0"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】优化 构建附加环境变量支持解析 URL 参数格式\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/qiqi513_admin",target:"_blank",rel:"noopener noreferrer"}},[s._v("@爱琳琳真是太好了"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I7FROG",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I7FROG"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】优化 构建支持单个配置保留天数和保留个数\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/VampireAchao",target:"_blank",rel:"noopener noreferrer"}},[s._v("@阿超"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I7FOG2",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I7FOG2"),a("OutboundLink")],1),s._v(" ）")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-41-2023-06-16"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-41-2023-06-16"}},[s._v("#")]),s._v(" 2.10.41 (2023-06-16)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-5"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 SSH 列表支持显示 docker 版本信息")]),s._v(" "),a("li",[s._v("【server】优化 Docker 镜像增加批量删除（已经被容器使用的镜像不会删除）")]),s._v(" "),a("li",[s._v("【server】优化 启用 Jpom 新版专属 logo")]),s._v(" "),a("li",[s._v("【server】新增 工作空间新增分组字段（存在多个分组时页面切换将使用二级选择）（感谢@酱总）")]),s._v(" "),a("li",[s._v("【server】新增 仓库支持导入导出")]),s._v(" "),a("li",[s._v("【server】新增 镜像创建容器支持配置 hostname、集群服务支持配置 hostname（感谢@心光）")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-7"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 查看 docker 容器日志 web socket 线程被阻塞问题")]),s._v(" "),a("li",[s._v("【server】优化 日志组件显示高亮、滚动条样式优化")]),s._v(" "),a("li",[s._v("【server】优化 web socket 会话关闭显示分类")]),s._v(" "),a("li",[s._v("【server】优化 页面滚动条样式")]),s._v(" "),a("li",[s._v("【server】优化 编辑关联分发，选择项目下拉框不能显示项目全名称（tooltip）（感谢@LYY）")]),s._v(" "),a("li",[s._v("【server】优化 监听页面关闭事件，主动关闭 websocket")]),s._v(" "),a("li",[s._v("【server】修复 批量构建触发器无法正常使用（感谢 "),a("a",{attrs:{href:"https://github.com/cheakin",target:"_blank",rel:"noopener noreferrer"}},[s._v("@botboy"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://github.com/dromara/Jpom/issues/48",target:"_blank",rel:"noopener noreferrer"}},[s._v("Github issues 48"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】修复 页面关闭 docker 终端未主动关闭后台终端进程问题")]),s._v(" "),a("li",[s._v("【server】优化 docker 终端页面缓冲区大小自动适应")]),s._v(" "),a("li",[s._v("【server】优化 项目列表可以查看项目日志（避免控制台卡顿无法操作下载日志）(感谢@阿超)")]),s._v(" "),a("li",[s._v("【server】优化 日志组件采用虚拟滚动渲染，避免日志过多浏览器卡死")]),s._v(" "),a("li",[s._v("【server】优化 资产管理支持管理共享仓库")]),s._v(" "),a("li",[s._v("【server】优化 增大验证码检测功能异常捕捉范围")]),s._v(" "),a("li",[s._v("【server】修复 令牌导入仓库令牌长度不足问题（感谢 "),a("a",{attrs:{href:"https://github.com/yeliulee",target:"_blank",rel:"noopener noreferrer"}},[s._v("@Sherman Chu"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://github.com/dromara/Jpom/issues/45",target:"_blank",rel:"noopener noreferrer"}},[s._v("Github issues 45"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】修复 分发列表配置功能无法使用（感谢 "),a("a",{attrs:{href:"https://gitee.com/fjlyy321",target:"_blank",rel:"noopener noreferrer"}},[s._v("@Free"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I716UI",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I716UI"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】修复 构建卡片布局、构建详情中构建方式显示不正确（感谢@A）")])]),s._v(" "),a("h3",{attrs:{id:"⚠️-注意-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-注意-2"}},[s._v("#")]),s._v(" ⚠️ 注意")]),s._v(" "),a("ol",[a("li",[s._v("如果自定义过 SSH 监控脚本需要自行同步获取 docker 信息脚本")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-40-2023-04-19"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-40-2023-04-19"}},[s._v("#")]),s._v(" 2.10.40 (2023-04-19)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-6"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 容器构建中对 gradle 插件的支持（感谢 "),a("a",{attrs:{href:"https://gitee.com/XiaoZhiGongChengShi",target:"_blank",rel:"noopener noreferrer"}},[s._v("@xiaozhi"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/pulls/188",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee pr 188"),a("OutboundLink")],1),s._v(" ）")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-8"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 日志搜索控制台无法正常使用（感谢@左手生活，右手浪漫）")]),s._v(" "),a("li",[s._v("【server】修复 项目文件跟踪控制台无法正常使用（感谢@左手生活，右手浪漫）")]),s._v(" "),a("li",[s._v("【server】修复 插件端日志无法正常差异")]),s._v(" "),a("li",[s._v("【server】修复 docker 拉取镜像不能识别私有仓库地址（@章强）")]),s._v(" "),a("li",[s._v("【server】优化 编辑构建无法重置已经选择的事件脚本 （感谢@左手生活，右手浪漫）")]),s._v(" "),a("li",[s._v("【server】优化 登录页面切换验证码自动清空验证码输入框（感谢@TrouBles）")]),s._v(" "),a("li",[s._v("【server】修复 docker 集群日志查看后未自动关闭造成日志文件继续增长的问题（@无味。）")]),s._v(" "),a("li",[s._v("【server】优化 服务端缓存项目信息的创建时间和修改时间同步为节点中的数据创建、修改时间")]),s._v(" "),a("li",[s._v("【server】优化 文件管理支持批量删除（感谢@左手生活，右手浪漫）")]),s._v(" "),a("li",[s._v("【agent】优化 取消 hutool-cache 包依赖")]),s._v(" "),a("li",[s._v("【server】优化 JustAuth fastjson 依赖配置为 fastjson2")]),s._v(" "),a("li",[s._v("【agent】修复 获取项目状态部分情况出现 NPE （感谢@酱总）")]),s._v(" "),a("li",[s._v("【server】修复 清空浏览器缓存未跳转到登录页面")]),s._v(" "),a("li",[s._v("【server】优化 构建拉取 git 仓库支持使用服务器中的 git 插件，实现配置克隆深度参数")]),s._v(" "),a("li",[s._v("【server】修复 删除节点脚本报错（感谢 "),a("a",{attrs:{href:"https://gitee.com/XiaoZhiGongChengShi",target:"_blank",rel:"noopener noreferrer"}},[s._v("@xiaozhi"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6USMY",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6USMY"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】优化 构建 SSH 发布命令支持 "),a("code",[s._v("SSH_RELEASE_PATH")]),s._v(" 环境变量（感谢@定格）")]),s._v(" "),a("li",[s._v("【server】修复 全屏终端无法打开文件管理（感谢@Pluto）")]),s._v(" "),a("li",[s._v("【server】优化 自动探测服务端登录验证码是否可用")]),s._v(" "),a("li",[s._v("【all】优化 文件编辑后缀识别支持配置文件名或者正则表达式（感谢@MichelleChung）")]),s._v(" "),a("li",[s._v("【server】优化 支持自动执行触发器清理")]),s._v(" "),a("li",[s._v("【server】优化 重新登录未加载管理员菜单（@A）")]),s._v(" "),a("li",[s._v("【server】修复 第三方登录跳转测试丢失")]),s._v(" "),a("li",[s._v("【server】修复 仓库编辑清除密码按钮弹窗层级问题（感谢 "),a("a",{attrs:{href:"https://gitee.com/xuanyuandoudou",target:"_blank",rel:"noopener noreferrer"}},[s._v("@轩辕豆豆"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6VSCR",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6VSCR"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】修复 优化构建列表卡片布局存在未构建数据布局错乱问题（感谢 "),a("a",{attrs:{href:"https://gitee.com/lin_yeqi",target:"_blank",rel:"noopener noreferrer"}},[s._v("@lin_yeqi"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6VUB7",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6VUB7"),a("OutboundLink")],1),s._v(" ）")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-39-2023-04-04"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-39-2023-04-04"}},[s._v("#")]),s._v(" 2.10.39 (2023-04-04)")]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-9"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-9"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 资产管理机器管理单个分配工作空间无法正常使用（感谢@咻咻咻秀啊）")]),s._v(" "),a("li",[s._v("【server】修复 资产管理相关权限、操作日志无法记录问题（感谢@咻咻咻秀啊）")]),s._v(" "),a("li",[s._v("【server】修复 docker 控制台 、日志无法正常使用")]),s._v(" "),a("li",[s._v("【server】优化 docker 控制台页面布局优化，支持单独查看 docker-compose")]),s._v(" "),a("li",[s._v("【server】优化 docker 实时查看日志支持配置是否显示时间戳")]),s._v(" "),a("li",[s._v("【server】修复 查看文件发布详情节点名称未显示")]),s._v(" "),a("li",[s._v("【server】优化 发布记录重建不能选中节点")]),s._v(" "),a("li",[s._v("【server】修复 构建同步到文件管理中心失败（感谢@破冰）")]),s._v(" "),a("li",[s._v("【server】优化 登录成功主动刷新菜单缓存、切换账号登录工作空间无权限页面白屏（感谢@A、@零壹）")]),s._v(" "),a("li",[s._v("【all】更名 变更包名为 "),a("code",[s._v("org.dromara.jpom")])]),s._v(" "),a("li",[s._v("【server】修复 编辑 docker 导入证书弹窗无法正常显示问题（感谢@左手生活，右手浪漫）")]),s._v(" "),a("li",[s._v("【server】修复 工作空间中资产管理相关页面搜索无数据时出现操作引导提示（感谢@酱总）")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-38-2023-03-31"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-38-2023-03-31"}},[s._v("#")]),s._v(" 2.10.38 (2023-03-31)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-7"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 证书管理全部迁移到服务端统一导入 （感谢@.）")]),s._v(" "),a("li",[s._v("【server】新增 节点项目支持导入，导出（感谢@酱总）")]),s._v(" "),a("li",[s._v("【server】新增 支持 oauth2 登录（maxkey、gitee、github） （感谢 "),a("a",{attrs:{href:"https://gitee.com/maxkeytop_admin",target:"_blank",rel:"noopener noreferrer"}},[s._v("@MaxKeyTop"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/pulls/183",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee pr 183"),a("OutboundLink")],1),s._v(" 、@A）")]),s._v(" "),a("li",[s._v("【all】新增 文件管理发布支持发布到节点指定目录")]),s._v(" "),a("li",[s._v("【server】新增 构建新增配置排除发布目录表达式（感谢@毛毛虫）")]),s._v(" "),a("li",[s._v("【all】新增 节点脚本支持全局共享（感谢@奇奇）")]),s._v(" "),a("li",[s._v("【server】新增 构建状态新增队列等待，用于标记当前构建存于线程排队中（感谢@酱总）")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-10"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-10"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】优化 清理单项构建历史保留个数只判断（构建结束、发布中、发布失败、发布失败）有效构建状态，避免无法保留有效构建历史（感谢@张飞鸿）")]),s._v(" "),a("li",[s._v("【server】优化 节点监控超时时间调整为 30 秒（避免 windows 服务器频繁超时）（感谢@波比）")]),s._v(" "),a("li",[s._v("【server】优化 打开节点管理页面不刷新节点列表")]),s._v(" "),a("li",[s._v("【agent】修复 未配置节点白名单时直接创建分发项目报错（感谢@奋起的大牛）")]),s._v(" "),a("li",[s._v("【server】修复 SSH 关联工作空间的授权目录无法取消")]),s._v(" "),a("li",[s._v("【server】优化 查看分发项目状态取消折叠 table，调整为独立页面")]),s._v(" "),a("li",[s._v("【server】优化 逻辑节点没有显示快速安装按钮问题（感谢@酱总）")]),s._v(" "),a("li",[s._v("【server】优化 docker TLS 证书全部迁移到证书管理，配置证书支持快捷选择 （感谢@.）")]),s._v(" "),a("li",[s._v("【server】修复 仓库 ssh 协议配置超时时间无法正常拉取代码（感谢@毛毛虫）")]),s._v(" "),a("li",[s._v("【server】优化 环境管理页面支持查看间隔任务统计信息")]),s._v(" "),a("li",[s._v("【server】优化 令牌导入仓库模块统一调整为模板配置（部分方式不支持搜索）（感谢@魏宏斌）")]),s._v(" "),a("li",[s._v("【agent】优化 DSL 项目报警内容添加状态消息（感谢@核桃）")]),s._v(" "),a("li",[s._v("【server】优化 服务端脚本支持配置全局共享（感谢@酱总）")]),s._v(" "),a("li",[s._v("【server】优化 删除管理脚本中的 "),a("code",[s._v("-XX:+AggressiveOpts")]),s._v(" 参数\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/niuxiaozu",target:"_blank",rel:"noopener noreferrer"}},[s._v("@牛孝祖"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6PUNM",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6PUNM"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【all】升级 springboot、hutool、fastjson2、svnkit 版本")]),s._v(" "),a("li",[s._v("【server】修复 资产管理 ssh 分组不生效问题（感谢@A）")]),s._v(" "),a("li",[s._v("【server】优化 构建详情页面布局（构建触发器、查看构建历史）")]),s._v(" "),a("li",[s._v("【server】优化 新增构建状态描述来记录构建异常信息")]),s._v(" "),a("li",[s._v("【server】优化 构建页面新增卡片布局方式")]),s._v(" "),a("li",[s._v("【server】修复 SSH 分组无法正常搜索、排序异常（感谢@A）")]),s._v(" "),a("li",[s._v("【server】优化 构建命令支持引用脚本模板内容（便于复杂构建命令管理）（感谢@毛毛虫）")]),s._v(" "),a("li",[s._v("【server】新增 构建状态新增"),a("code",[s._v("队列等待")]),s._v("，用于标记当前构建存于线程排队中（感谢@酱总）")]),s._v(" "),a("li",[s._v("【server】修复 创建构建选择命令模板无法修改（感谢@定格）")]),s._v(" "),a("li",[s._v("【server】优化 构建新增配置是否发布隐藏文件属性（感谢@简单）")])]),s._v(" "),a("h3",{attrs:{id:"⚠️-注意-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-注意-3"}},[s._v("#")]),s._v(" ⚠️ 注意")]),s._v(" "),a("ol",[a("li",[s._v("如果节点已经配置过项目文件下载远程地址白名单需要统一配置到服务端的工作空间的白名单。")]),s._v(" "),a("li",[s._v("已经配置节点项目远程下载白名单将保留只读，不做实际判断")]),s._v(" "),a("li",[s._v("构建触发器变动，发生异常时 type 为 error,并且新增：statusMsg 字段")])]),s._v(" "),a("h3",{attrs:{id:"❌-不兼容功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#❌-不兼容功能"}},[s._v("#")]),s._v(" ❌ 不兼容功能")]),s._v(" "),a("ol",[a("li",[s._v("【agent】取消 节点管理证书管理取消上传编辑功能（保留查询删除功能）")]),s._v(" "),a("li",[s._v("【agent】取消 节点白名单配置取消 ssl 证书路径配置")]),s._v(" "),a("li",[s._v("【agent】取消 节点项目文件下载远程文件白名单统一调整到服务端白名单配置")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-37-2023-03-21"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-37-2023-03-21"}},[s._v("#")]),s._v(" 2.10.37 (2023-03-21)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-8"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 文件中心添加别名码来为文件进行分类下载，构建添加别名码可以同步到文件中心\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/linjianhui",target:"_blank",rel:"noopener noreferrer"}},[s._v("@大灰灰大"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6OUC8",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6OUC8"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】新增 服务端在线升级支持配置 beta 计划（”妈妈“再也不用担心没有稳定版了）（感谢@罗俊）")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-11"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-11"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】优化 容器构建 maven 插件版本错误提示可用版本号，如果构建容器已经存在则忽略远程版本（感谢@大灰灰）")]),s._v(" "),a("li",[s._v("【server】优化 脚本列表显示脚本 ID，方便快速查看复制\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/linjianhui",target:"_blank",rel:"noopener noreferrer"}},[s._v("@大灰灰大"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6OUDT",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6OUDT"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】优化 文件管理列表显示，小屏幕部分字段被隐藏（感谢@tinsang）")]),s._v(" "),a("li",[s._v("【server】优化 docker 拉取镜像自动解析 tag，避免拉取所有镜像，如果没有配置 tag 默认使用 latest（感谢@Again...                       .）")]),s._v(" "),a("li",[s._v("【server】修复 数据库迁移到 mysql 报错（字段不存在）（感谢@轩辕豆豆）")]),s._v(" "),a("li",[s._v("【server】修复 节点统计页面错乱问题\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/xuanyuandoudou",target:"_blank",rel:"noopener noreferrer"}},[s._v("@轩辕豆豆"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6OYSU",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6OYSU"),a("OutboundLink")],1),s._v(" ）")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-36-2023-03-20"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-36-2023-03-20"}},[s._v("#")]),s._v(" 2.10.36 (2023-03-20)")]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-12"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-12"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【all】优化 缓存管理统一全局任务刷新")]),s._v(" "),a("li",[s._v("【server】优化 修复数据关联的工作空间ID sql（避免 '' 或者 'null' 无法修复）")]),s._v(" "),a("li",[s._v("【server】优化 支持手动清理错误工作空间 ID 的数据")]),s._v(" "),a("li",[s._v("【server】修复 构建 git 仓库无法正常获取问题（感谢@小翼哥）")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-35-2023-03-20"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-35-2023-03-20"}},[s._v("#")]),s._v(" 2.10.35 (2023-03-20)")]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-13"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-13"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 mysql 数据库无法正常加载")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-34-2023-03-20"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-34-2023-03-20"}},[s._v("#")]),s._v(" 2.10.34 (2023-03-20)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-9"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-9"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 资产管理 SSH 管理支持导入导出数据（感谢@吃葫芦娃的土拨鼠）")]),s._v(" "),a("li",[s._v("【server】新增 文件管理中心（用于统一存储管理公共文件）")]),s._v(" "),a("li",[s._v("【server】新增 仓库令牌导入支持 gogs （gogs 和 gitea 标准一致）\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/qiqi513_admin",target:"_blank",rel:"noopener noreferrer"}},[s._v("@爱琳琳真是太好了"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6CRPS",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6CRPS"),a("OutboundLink")],1),s._v(" ）")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-14"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-14"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】优化 构建 SSH 发布上传文件执行输出上传进度")]),s._v(" "),a("li",[s._v("【server】优化 在线构建产物支持同步到文件管理中心")]),s._v(" "),a("li",[s._v("【server】优化 节点分发、在线构建 webhook 添加 "),a("code",[s._v("triggerUser")]),s._v(" 参数（感谢@酱总）")]),s._v(" "),a("li",[s._v("【server】优化 SSH 文件夹管理支持重命名文件夹（感谢@零壹）")]),s._v(" "),a("li",[s._v("【server】优化 机器名称和 hostname、SSH 机器名称和 hostname 限制字段长度")]),s._v(" "),a("li",[s._v("【server】优化 DSL 项目支持解析多 PID ："),a("code",[s._v("running:109,205:8080,8082")]),s._v("（感谢@酱总）")]),s._v(" "),a("li",[s._v("【server】优化 缓存管理页面支持查看运行中的线程同步器、正在构建的ID")]),s._v(" "),a("li",[s._v("【server】优化 SSH 脚本批量执行采用线程同步器执行（避免线程数大于 CPU 核心数）")]),s._v(" "),a("li",[s._v("【server】优化 构建 SSH 发布命令响应方式调整为逐行（避免长时间没有任何信息输出）")]),s._v(" "),a("li",[s._v("【server】优化 资产管理支持批量分配到工作空间")])]),s._v(" "),a("h3",{attrs:{id:"⚠️-注意-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-注意-4"}},[s._v("#")]),s._v(" ⚠️ 注意")]),s._v(" "),a("ol",[a("li",[s._v("【server】节点管理和项目管理菜单合并到一个菜单")]),s._v(" "),a("li",[s._v("【server】节点统计页面合并到逻辑节点中不同视图模式查看")])]),s._v(" "),a("h3",{attrs:{id:"❌-不兼容功能-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#❌-不兼容功能-2"}},[s._v("#")]),s._v(" ❌ 不兼容功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】取消 低版本（2.9.x 及其以下）的构建触发器 token 自动同步为新版本")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-33-2023-03-16"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-33-2023-03-16"}},[s._v("#")]),s._v(" 2.10.33 (2023-03-16)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-10"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-10"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 ssh 基础信息监控（非报警监控）")]),s._v(" "),a("li",[s._v("【agent】新增 DSL 项目支持解析端口号："),a("code",[s._v("running:109:8080,8082")]),s._v("\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/linjianhui",target:"_blank",rel:"noopener noreferrer"}},[s._v("@大灰灰大"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6N35H",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6N35H"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】新增 用户支持自定义工作空间名，排序 （感谢@酱总）")]),s._v(" "),a("li",[s._v("【server】新增 节点分发项目支持排序，设置项目启用/禁用状态（感谢@酱总）")]),s._v(" "),a("li",[s._v("【server】新增 节点分发支持手动释放删除指定项目")]),s._v(" "),a("li",[s._v("【server】新增 docker 镜像创建容器新增 runtime 参数")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-15"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-15"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 插件端在线升级页面无法正常使用（调用到服务端在线升级接口）")]),s._v(" "),a("li",[s._v("【server】优化 节点在线升级统一管理避免出现 null")]),s._v(" "),a("li",[s._v("【server】修复 节点信息编码在部分接口出现 NPE （感谢@酱总）")]),s._v(" "),a("li",[s._v("【server】优化 工作空间中不存在资产管理相关的数据添加默认缺省页（仅管理员显示）")]),s._v(" "),a("li",[s._v("【server】优化 支持手动释放节点项目的分发属性")])]),s._v(" "),a("h3",{attrs:{id:"❌-不兼容功能-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#❌-不兼容功能-3"}},[s._v("#")]),s._v(" ❌ 不兼容功能")]),s._v(" "),a("ol",[a("li",[s._v("【agent】取消 节点进程列表显示 jpom 项目名")])]),s._v(" "),a("h3",{attrs:{id:"⚠️-注意-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-注意-5"}},[s._v("#")]),s._v(" ⚠️ 注意")]),s._v(" "),a("ol",[a("li",[s._v("【server】优化 在线工具菜单更名为其他管理")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-32-2023-03-14"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-32-2023-03-14"}},[s._v("#")]),s._v(" 2.10.32 (2023-03-14)")]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-16"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-16"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 mysql 数据库因为字段长度问题初始化失败（感谢@xuejun）")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-31-2023-03-14"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-31-2023-03-14"}},[s._v("#")]),s._v(" 2.10.31 (2023-03-14)")]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-17"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-17"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 未配置节点编码方式无法正常保存问题（感谢@初凡 ³）")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-30-2023-03-14"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-30-2023-03-14"}},[s._v("#")]),s._v(" 2.10.30 (2023-03-14)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-11"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-11"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【all】新增 插件端支持配置发送请求消息编码方式（编码、混淆明文、规避防火墙）\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/Mr_loyal",target:"_blank",rel:"noopener noreferrer"}},[s._v("@Mr_loyal"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/pulls/179",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee pr 179"),a("OutboundLink")],1),s._v(" ）")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-18"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-18"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 导入 gitea 仓库搜索、分页无法正常使用问题\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/autools",target:"_blank",rel:"noopener noreferrer"}},[s._v("@Smith"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/pulls/175",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee pr 175"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/pulls/174",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee pr 174"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】优化 镜像启动容器不填写运行命令行导致容器启动失败（部分低版本）\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/marmotgo",target:"_blank",rel:"noopener noreferrer"}},[s._v("@失落的世界"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/pulls/176",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee pr 176"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】修复 节点分发 webhook 输入框的错别字（感谢 @大灰灰 ）")]),s._v(" "),a("li",[s._v("【server】修复 工作空间环境变量操作日志记录错误问题")]),s._v(" "),a("li",[s._v("【all】更新 fastjson2 版本")]),s._v(" "),a("li",[s._v("【all】优化 SSH 命令脚本、服务端脚本、插件端脚本执行参数优化\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/linjianhui",target:"_blank",rel:"noopener noreferrer"}},[s._v("@大灰灰大"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6IPDY",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6IPDY"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】优化 导入仓库页面提示信息错乱（感谢@零壹）")]),s._v(" "),a("li",[s._v("【agent】修复 项目修改路径为子目录时 mv 文件触发死循环（感谢@D¹⁹⁹¹）")]),s._v(" "),a("li",[s._v("【server】修复 查询构建日志可能出现 NPE 问题\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/meiMingle",target:"_blank",rel:"noopener noreferrer"}},[s._v("@Tom Xin"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6MX9G",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6MX9G"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】优化 系统缓存页面显示当前服务器时间、时区信息")]),s._v(" "),a("li",[s._v("【server】修复 还原数据后备份状态错误问题\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/lin_yeqi",target:"_blank",rel:"noopener noreferrer"}},[s._v("@lin_yeqi"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6MVL7",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6MVL7"),a("OutboundLink")],1),s._v(" ）")])]),s._v(" "),a("h3",{attrs:{id:"❌-不兼容功能-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#❌-不兼容功能-4"}},[s._v("#")]),s._v(" ❌ 不兼容功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】删除 COMMAND_INFO 表 type 字段")])]),s._v(" "),a("h3",{attrs:{id:"⚠️-注意-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-注意-6"}},[s._v("#")]),s._v(" ⚠️ 注意")]),s._v(" "),a("p",[s._v("SSH 命令脚本、服务端脚本、插件端脚本默认参数规则变化：参数描述将必填，默认参数在手动执行时无法删除并且可以查看对应参数描述")]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-29-2023-03-10"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-29-2023-03-10"}},[s._v("#")]),s._v(" 2.10.29 (2023-03-10)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-12"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-12"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 导入仓库支持 "),a("code",[s._v("gitea")]),s._v(" 系统\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/autools",target:"_blank",rel:"noopener noreferrer"}},[s._v("@Smith"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/pulls/173",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee pr 173"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】新增 用户登录日志（取消用户登录生成操作日志的执行日志）")]),s._v(" "),a("li",[s._v("【server】新增 在线工具验证 cron 表达式 （感谢@奇奇）")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-19"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-19"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 SSH 并发执行脚本引起脚本丢失错误（感谢@墨汁）")]),s._v(" "),a("li",[s._v("【server】优化 docker 编辑无法连接提示异常详情信息（感谢@章强）")]),s._v(" "),a("li",[s._v("【agent】优化 节点分发配置白名单到插件端需要验证合法性")]),s._v(" "),a("li",[s._v("【server】优化 docker 创建容器忽略未配置存储选项参数（感谢@D¹⁹⁹¹）")]),s._v(" "),a("li",[s._v("【server】优化 docker 管理裁剪功能独立菜单")]),s._v(" "),a("li",[s._v("【server】修复 资产管理未记录操作日志的问题")]),s._v(" "),a("li",[s._v("【server】优化 操作日志存储用户名、工作空间名字段")]),s._v(" "),a("li",[s._v("【server】优化 容器构建查询可用标签容器相关提示")]),s._v(" "),a("li",[s._v("【server】优化 构建历史列表页面在小屏幕数据显示不全\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/hjdyzy",target:"_blank",rel:"noopener noreferrer"}},[s._v("@一只羊"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6LLA0",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6LLA0"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】修复 在线构建发布到集群无法正常选择集群服务（感谢@心光）")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-28-2023-03-08"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-28-2023-03-08"}},[s._v("#")]),s._v(" 2.10.28 (2023-03-08)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-13"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-13"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【agent】新增 项目触发器新增 fileChange 事件（文件变动对应触发点：上传、删除、远程下载、编辑、新增目录或者文件、重命名）\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/pig_home",target:"_blank",rel:"noopener noreferrer"}},[s._v("@胡明"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6KKEK",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6KKEK"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】新增 镜像创建容器支持配置存储选项（感谢@topsuder、@章强）")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-20"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-20"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 新增 docker 无法使用在线构建功能\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/marmotgo",target:"_blank",rel:"noopener noreferrer"}},[s._v("@失落的世界"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6KTLQ",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6KTLQ"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】优化 项目文件列表支持前端排序（文件大小、修改时间）")]),s._v(" "),a("li",[s._v("【server】优化 关闭程序时依次关闭线程池")]),s._v(" "),a("li",[s._v("【server】优化 工作空间环境变量开放给普通用户编辑")])]),s._v(" "),a("h3",{attrs:{id:"⚠️-注意-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-注意-7"}},[s._v("#")]),s._v(" ⚠️ 注意")]),s._v(" "),a("p",[s._v("插件端需要同步升级，否则项目文件列表排序无法正常使用")]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-27-2023-03-06"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-27-2023-03-06"}},[s._v("#")]),s._v(" 2.10.27 (2023-03-06)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-14"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-14"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 资产管理新增 docker 、集群管理")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-21"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-21"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【all】升级 springboot 版本")]),s._v(" "),a("li",[s._v("【server】优化 系统自动同步 docker 已经安装的集群信息")]),s._v(" "),a("li",[s._v("【server】更新 mysql maven 坐标："),a("code",[s._v("mysql-connector-j")])]),s._v(" "),a("li",[s._v("【server】修复 构建产物模糊匹配二级剔除配置 "),a("code",[s._v("/")]),s._v(" 无效")])]),s._v(" "),a("h3",{attrs:{id:"⚠️-注意-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-注意-8"}},[s._v("#")]),s._v(" ⚠️ 注意")]),s._v(" "),a("p",[s._v("新增 docker 资产管理,系统会自动将已经存在的 docker 信息根据 host 去重同步到资产管理中（如果 host 存在多个工作空间将根据最后更新时间排序使用最新的一条数据）")]),s._v(" "),a("p",[s._v("更新后 docker、集群列表中状态如果出现："),a("code",[s._v("信息丢失")]),s._v(" 表示关联数据存在异常不能正常使用，需要删除对应数据重新关联")]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-26-2023-03-03"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-26-2023-03-03"}},[s._v("#")]),s._v(" 2.10.26 (2023-03-03)")]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-22"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-22"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 初始化数据库未删除完整问题（感谢@酱总）")]),s._v(" "),a("li",[s._v("【server】优化 日志阅读选项卡 tab 名称添加项目名称（感谢@tinsang）")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-25-2023-03-03"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-25-2023-03-03"}},[s._v("#")]),s._v(" 2.10.25 (2023-03-03)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-15"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-15"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 构建历史新增产物文件大小")]),s._v(" "),a("li",[s._v("【all】新增 机器安装 ID 文件（请勿删除数据目录 "),a("code",[s._v("INSTALL.json")]),s._v(" 文件）")]),s._v(" "),a("li",[s._v("【agent】新增 插件端新增虚拟内存和交互内存监控趋势")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-23"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-23"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】优化 构建发布完成，自动删除压缩包文件（节省空间占用大小）（感谢@轩辕豆豆）")]),s._v(" "),a("li",[s._v("【server】修复 更新构建历史环境变量失败")]),s._v(" "),a("li",[s._v("【server】取消 SSH 脚本命令参数描述（避免误导用户）\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/linjianhui",target:"_blank",rel:"noopener noreferrer"}},[s._v("@大灰灰大"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6IPDY",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6IPDY"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】优化 编辑项目文件回显错乱问题")]),s._v(" "),a("li",[s._v("【server】优化 日志阅读菜单更名日志搜索")]),s._v(" "),a("li",[s._v("【server】优化 差异构建时，触发取消构建标记构建状态为"),a("code",[s._v("构建中断")]),s._v(" （感谢@张飞鸿）")])]),s._v(" "),a("h3",{attrs:{id:"❌-不兼容功能-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#❌-不兼容功能-5"}},[s._v("#")]),s._v(" ❌ 不兼容功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】删除 弃用表 NODE_STAT")]),s._v(" "),a("li",[s._v("【server】删除 弃用表 SYSTEMMONITORLOG")]),s._v(" "),a("li",[s._v("【server】删除 相关表中的 strike 字段")])]),s._v(" "),a("h2",{attrs:{id:"_2-10-24-2023-03-01"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-24-2023-03-01"}},[s._v("#")]),s._v(" 2.10.24 (2023-03-01)")]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-24"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-24"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】优化 在线构建容器镜像构建参数和镜像标签支持解析环境变量")]),s._v(" "),a("li",[s._v("【server】优化 替换环境变量，支持 $xxx ${xxx} （感谢@大锅饭集团）")]),s._v(" "),a("li",[s._v("【server】修复 配置节点分发白名单报错 （感谢@酱总）")]),s._v(" "),a("li",[s._v("【server】优化 节点分发配置【配置管理-白名单配置】菜单移动到功能管理中【项目管理-分发白名单】")]),s._v(" "),a("li",[s._v("【server】修复 非管理员无法使用 SSH 终端问题\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/ljlToTlj",target:"_blank",rel:"noopener noreferrer"}},[s._v("@lilinLue"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6IRJV",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6IRJV"),a("OutboundLink")],1),s._v(" ）")])]),s._v(" "),a("h3",{attrs:{id:"⚠️-注意-9"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-注意-9"}},[s._v("#")]),s._v(" ⚠️ 注意")]),s._v(" "),a("p",[s._v("节点分发白名单可能失效，需要重新配置")]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-23-2023-03-01"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-23-2023-03-01"}},[s._v("#")]),s._v(" 2.10.23 (2023-03-01)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-16"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-16"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 控制台输出工作空间关联数据错误未关联的表和条数")]),s._v(" "),a("li",[s._v("【server】新增 资产管理-SSH管理")]),s._v(" "),a("li",[s._v("【server】新增 构建 SSH 发布支持配置发布前执行命令 （感谢@daniel）")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-25"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-25"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 使用 ANT 产物目录会自动生成模糊匹配表达式文件夹（感谢@leonchen21）")]),s._v(" "),a("li",[s._v("【server】修复 启动时候未自动触发修复数据逻辑")]),s._v(" "),a("li",[s._v("【server】修复 SSH 文件管理二级目录以下无法重命名")]),s._v(" "),a("li",[s._v("【server】优化 SSH 配置授权目录、允许编辑文件后缀、禁止命令移动到资产管理中")]),s._v(" "),a("li",[s._v("【all】优化 SSH文件、项目文件允许编辑文件的后缀支持配置 * (前提编辑格式统一)")]),s._v(" "),a("li",[s._v("【server】优化 升级 docker-java 、svnkit 依赖版本")]),s._v(" "),a("li",[s._v("【server】优化 SSH 支持清空隐藏字段")])]),s._v(" "),a("h3",{attrs:{id:"⚠️-注意-10"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-注意-10"}},[s._v("#")]),s._v(" ⚠️ 注意")]),s._v(" "),a("p",[s._v("由于新增 SSH 资产管理，之前ssh 配置如果引用的工作空间变量的配置信息可能将失效（作用域不同）.\n如果任需要变量信息还需要将对应的信息迁移到全局变量中才可以正常使用")]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-22-2023-02-24"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-22-2023-02-24"}},[s._v("#")]),s._v(" 2.10.22 (2023-02-24)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-17"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-17"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 仓库新增配置超时属性（避免仓库拉取代码超时）（感谢 "),a("a",{attrs:{href:"https://gitee.com/VampireAchao",target:"_blank",rel:"noopener noreferrer"}},[s._v("@阿超"),a("OutboundLink")],1),s._v(" ）")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-26"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-26"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 容器构建无法下载产物（感谢@张飞鸿）")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-21-2023-02-23"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-21-2023-02-23"}},[s._v("#")]),s._v(" 2.10.21 (2023-02-23)")]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-27"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-27"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】优化 容器构建自动删除构建容器")]),s._v(" "),a("li",[s._v("【server】优化 系统管理菜单名：变更为"),a("code",[s._v("插件端配置")]),s._v("，"),a("code",[s._v("服务端配置")]),s._v(" （感谢@ccx2480）")]),s._v(" "),a("li",[s._v("【server】修复 机器管理节点配置同步获取信息错乱（使用到服务端配置）（感谢@ccx2480）")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-20-2023-02-23"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-20-2023-02-23"}},[s._v("#")]),s._v(" 2.10.20 (2023-02-23)")]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-28"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-28"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【agent】修复 插件端验证项目白名单路径失败（感谢@ccblandy）")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-19-2023-02-22"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-19-2023-02-22"}},[s._v("#")]),s._v(" 2.10.19 (2023-02-22)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-18"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-18"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 容器构建缓存插件支持按照 "),a("code",[s._v("path")]),s._v(" 全局缓存 "),a("code",[s._v("type: global")])]),s._v(" "),a("li",[s._v("【server】新增 容器构建缓存插件支持缓存 node_modules "),a("code",[s._v("mode: copy")]),s._v(" (避免出现："),a("a",{attrs:{href:"https://github.com/npm/cli/issues/3669",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/npm/cli/issues/3669"),a("OutboundLink")],1),s._v(")")]),s._v(" "),a("li",[s._v("【server】新增 构建列表新增批量构建\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/175cm75kg18cm",target:"_blank",rel:"noopener noreferrer"}},[s._v("@爱笑的眼睛"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6GNV2",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6GNV2"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】新增 机器管理新增查看关联节点功能")]),s._v(" "),a("li",[s._v("【server】新增 机器新增网络、硬件硬盘查看")]),s._v(" "),a("li",[s._v("【server】新增 机器管理列表新增表格视图")]),s._v(" "),a("li",[s._v("【server】新增 手动分发文件、构建分发弹窗新增筛选指定项目进行分发\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/autools",target:"_blank",rel:"noopener noreferrer"}},[s._v("@Smith"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6GQNG",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6GQNG"),a("OutboundLink")],1),s._v(" ）")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-29"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-29"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 构建读取附件环境变量时机调整到 pull 后")]),s._v(" "),a("li",[s._v("【agent】优化 白名单路径原样保存（避免部分安全组件拦截）")]),s._v(" "),a("li",[s._v("【server】修复 编辑机器分组名失效问题")]),s._v(" "),a("li",[s._v("【server】优化 工作空间菜单配置由系统管理移动到工作空间列表管理中")]),s._v(" "),a("li",[s._v("【server】优化 节点白名单配置分发功能移动到机器管理表格视图中（模板节点）")]),s._v(" "),a("li",[s._v("【server】优化 节点配置分发功能移动到机器管理表格视图中（模板节点）")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-18-2023-02-20"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-18-2023-02-20"}},[s._v("#")]),s._v(" 2.10.18 (2023-02-20)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-19"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-19"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 资产管理->机器管理")]),s._v(" "),a("li",[s._v("【server】新增 配置属性：jpom.node.stat-log-keep-days（节点统计日志保留天数）")]),s._v(" "),a("li",[s._v("【all】新增 机器节点硬盘信息统计")]),s._v(" "),a("li",[s._v("【all】新增 机器节点网络流量信息统计")]),s._v(" "),a("li",[s._v("【server】新增 构建触发器新增获取构建日志接口\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/c180",target:"_blank",rel:"noopener noreferrer"}},[s._v("@黑黑"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6G0AT",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6G0AT"),a("OutboundLink")],1),s._v(" ）")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-30"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-30"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】更名 节点列表更名逻辑节点")]),s._v(" "),a("li",[s._v("【server】修复 节点分发编辑 webhook 字段回显（感谢@酱总）")]),s._v(" "),a("li",[s._v("【server】优化 在线升级统一机器管理（无需切换工作空间）")]),s._v(" "),a("li",[s._v("【server】优化 节点管理>在线升级菜单移动到机器管理中")])]),s._v(" "),a("h3",{attrs:{id:"❌-不兼容功能-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#❌-不兼容功能-6"}},[s._v("#")]),s._v(" ❌ 不兼容功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】删除 node_info unLockType 字段")]),s._v(" "),a("li",[s._v("【server】取消 节点解绑功能")]),s._v(" "),a("li",[s._v("【server】停止 使用 NODE_STAT 表（暂时保留相关数据）")]),s._v(" "),a("li",[s._v("【server】替代 MACHINE_NODE_STAT_LOG 表替代 SYSTEMMONITORLOG 表（并暂时保留 SYSTEMMONITORLOG 数据）")])]),s._v(" "),a("h3",{attrs:{id:"⚠️-注意-11"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-注意-11"}},[s._v("#")]),s._v(" ⚠️ 注意")]),s._v(" "),a("p",[s._v("由于新增机器管理，程序将自动同步节点表中的所有数据"),a("code",[s._v("以节点地址去重")]),s._v("后保存到机器表中，如果同一个节点地址出现多条数据（节点存在不同的工作空间）将跟进节点更新时间最新的为准")]),s._v(" "),a("p",[s._v("插件端需要同步更新，否则节点状态、机器状态为："),a("code",[s._v("状态码错误")])]),s._v(" "),a("p",[s._v("如果更新当前版本后出现节点授权码错误：可能原因是之前同一个机器添加多个节点到不同的工作空间并且最后更新的节点中保存的授权信息是错误，导致数据自动同步后仍然是错误的授权信息")]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-17-2023-02-16"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-17-2023-02-16"}},[s._v("#")]),s._v(" 2.10.17 (2023-02-16)")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 构建配置新增严格执行命令模式（判断命令执行状态码是否为0）\n（感谢@阿克苏市姑墨信息科技有限公司） "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/pulls/169",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee pr 169"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】新增 节点分发新增 webhook 配置属性（感谢@酱总）")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-31"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-31"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 构建产物配置单属性时，二次匹配不能匹配到文件问题\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/bwy-flc",target:"_blank",rel:"noopener noreferrer"}},[s._v("@伤感的风铃草"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6FETS",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6FETS"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】优化 构建历史回滚输出相关操作日志（感谢@酱总）")]),s._v(" "),a("li",[s._v("【server】修复 windows 容器构建无法上传文件到容器问题")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-16-2023-02-14"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-16-2023-02-14"}},[s._v("#")]),s._v(" 2.10.16 (2023-02-14)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-20"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-20"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 docker 列表支持跨工作空间同步\n（感谢 @"),a("a",{attrs:{href:"https://gitee.com/zhangfeihong_597",target:"_blank",rel:"noopener noreferrer"}},[s._v("清风柳絮II号"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6EOIR",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6EOIR"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】新增 构建历史保存构建环境变量（为回滚流程使用）")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-32"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-32"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【all】优化 解压工具支持多种编码格式（GBK、UTF8）（感谢@Again... . ）")]),s._v(" "),a("li",[s._v("【server】优化 在线构建新增配置文件环境变量测试（"),a("code",[s._v("BUILD_CONFIG_BRANCH_NAME")]),s._v("）(感谢@阿克苏市姑墨信息科技有限公司)")]),s._v(" "),a("li",[s._v("【server】修复 节点分发回滚 NPE （感谢@酱总）")]),s._v(" "),a("li",[s._v("【server】优化 构建弹窗部分下拉支持手动刷新数据（感谢@张飞鸿）")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-15-2023-02-13"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-15-2023-02-13"}},[s._v("#")]),s._v(" 2.10.15 (2023-02-13)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-21"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-21"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 构建 pull 流程之后新增 "),a("code",[s._v("BUILD_COMMIT_ID")]),s._v(" 变量")]),s._v(" "),a("li",[s._v("【server】新增 执行脚本输出可用环境变量（服务端脚本、节点脚本、SSH 脚本、在线构建 pull 成功之后、构建事件脚本）")]),s._v(" "),a("li",[s._v("【server】新增 构建确认弹窗新增配置构建环境变量")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-33"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-33"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 节点分发二级路径不能删除问题（感谢@张飞鸿）")]),s._v(" "),a("li",[s._v("【agent】优化 服务端环境隐私变量字段传递到插件端（已经存在的插件端环境变量默认为隐私变量）")]),s._v(" "),a("li",[s._v("【agent】修复 DSL 项目模式 status 事件写入日志编码格式跟随系统配置,避免编码格式不正确（已经存在的日志文件可能会乱码,可以删除文件解决）")]),s._v(" "),a("li",[s._v("【server】优化 提前构建加载附加环境变量（startReady 事件）")]),s._v(" "),a("li",[s._v("【agent】优化 节点进程列表、内存、cpu、硬盘加载方式采用 oshi")]),s._v(" "),a("li",[s._v("【server】优化 在线升级页面新版本检测支持本地网络检测")])]),s._v(" "),a("h3",{attrs:{id:"⚠️-注意-12"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-注意-12"}},[s._v("#")]),s._v(" ⚠️ 注意")]),s._v(" "),a("p",[s._v("插件端需要同步更新，否则节点首页进程列表数据将不能正常显示")]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-14-2023-02-10"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-14-2023-02-10"}},[s._v("#")]),s._v(" 2.10.14 (2023-02-10)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-22"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-22"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 构建状态新增"),a("code",[s._v("构建中断")]),s._v("（执行事件脚本返回中断构建）")]),s._v(" "),a("li",[s._v("【server】新增 构建事件脚本支持返回指定关键词中断构建（需要执行事件脚本输出的最后一行，"),a("code",[s._v("interrupt $type")]),s._v("）")]),s._v(" "),a("li",[s._v("【server】新增 构建触发器将请求参数传入构建环境变量（"),a("code",[s._v("triggerContentType")]),s._v("、"),a("code",[s._v("triggerBodyData")]),s._v("）")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-34"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-34"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】优化 构建产物为文件夹打包位置优化（避免存放位置错乱）")]),s._v(" "),a("li",[s._v("【server】修复 构建触发修改构建产物路径未验证 slip 问题")]),s._v(" "),a("li",[s._v("【server】优化 本地构建产物模糊匹配（ant path）支持配置截取路径、合并文件")]),s._v(" "),a("li",[s._v("【server】优化 构建日志输出信息（部分调整为中文、消息标签和级别）")]),s._v(" "),a("li",[s._v("【server】优化 切换工作空间刷新菜单（感谢@ccx2480）")]),s._v(" "),a("li",[s._v("【server】优化 用户密码提示改为弹窗并且可以快捷复制")]),s._v(" "),a("li",[s._v("【agent】修复 保存 DSL 项目判断是否存在 status 节点,避免无法删除情况（感谢@张飞鸿）")]),s._v(" "),a("li",[s._v("【agent】修复 节点项目修改路径移动文件不生效问题")]),s._v(" "),a("li",[s._v("【agent】取消 编辑项目校验目录存在情况")]),s._v(" "),a("li",[s._v("【server】优化 项目ID、节点分发ID 支持前端快捷生成")]),s._v(" "),a("li",[s._v("【server】优化 构建执行事件脚本描述匹配支持 all 关键词 (匹配所有事件)")]),s._v(" "),a("li",[s._v("【server】修复 执行脚本文件的换行符合跟随系统，避免 windows 中出现异常")]),s._v(" "),a("li",[s._v("【server】优化 解绑操作提示弹窗更明确（减少误操作）（感谢@酱总）")])]),s._v(" "),a("h3",{attrs:{id:"⚠️-注意-13"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-注意-13"}},[s._v("#")]),s._v(" ⚠️ 注意")]),s._v(" "),a("p",[s._v("如果使用到产物模糊匹配的请关注是否需要重新调整匹配符。")]),s._v(" "),a("p",[s._v("新版本匹配符支持配置三个属性：")]),s._v(" "),a("p",[s._v("属性1:属性2[可选]:属性3[可选]")]),s._v(" "),a("p",[a("strong",[s._v("属性1")]),s._v("：为模糊匹配的表达式 ( "),a("code",[s._v("Ant-style")]),s._v(" )")]),s._v(" "),a("p",[a("strong",[s._v("属性2")]),s._v("：匹配到的文件保留方式，可用值："),a("code",[s._v("KEEP_DIR")]),s._v("、"),a("code",[s._v("SAME_DIR")]),s._v("。（大小写均兼容、配置错误默认为 KEEP_DIR）")]),s._v(" "),a("p",[s._v("KEEP_DIR: 保留匹配到的文件的文件层级")]),s._v(" "),a("p",[s._v("SAME_DIR: 将匹配到的文件均保留到同一个层级（合并到一个文件夹下）。慎用该方式，如果多目录存在相同的文件名会出现合并后只保留匹配到的最后一个文件")]),s._v(" "),a("p",[a("strong",[s._v("属性3")]),s._v("： 需要剔除匹配到多级文件夹的指定目录,(可以配置为空)。建议配合属性2的"),a("code",[s._v("KEEP_DIR")]),s._v("使用。剔除目录可以理解为二次过滤前缀匹配文件")]),s._v(" "),a("h4",{attrs:{id:"🌰-举个栗子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🌰-举个栗子"}},[s._v("#")]),s._v(" 🌰 举个栗子")]),s._v(" "),a("h5",{attrs:{id:"栗子1-web-html-keep-dir-web2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#栗子1-web-html-keep-dir-web2"}},[s._v("#")]),s._v(" 栗子1： "),a("code",[s._v("/web*/**/*.html:KEEP_DIR:/web2/")])]),s._v(" "),a("p",[s._v("表示匹配执行构建后，对应目录下的：已 web 开头的目录下面的所有 html 文件，并且保留文件夹层级关系，最后发布时候需要剔除 /web2/")]),s._v(" "),a("p",[s._v("假设：目录下有如下文件")]),s._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/vue/vue.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/web/web1.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/a/b/t.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/web2/a.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/web2/b/a.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/web1/aa/t.html")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("执行匹配后的文件")]),s._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[a("span",{pre:!0,attrs:{class:"token domain constant"}},[s._v("a.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/b/a.html")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h5",{attrs:{id:"栗子2-web-html-same-dir"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#栗子2-web-html-same-dir"}},[s._v("#")]),s._v(" 栗子2： "),a("code",[s._v("/web*/**/*.html:SAME_DIR:")])]),s._v(" "),a("p",[s._v("表示匹配执行构建后，对应目录下的：已 web 开头的目录下面的所有 html 文件，并且合并文件到同一个目录，最后发布时候需要剔除\n/web2/")]),s._v(" "),a("p",[s._v("假设：目录下有如下文件")]),s._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/vue/vue.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/web/web1.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/a/b/t.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/web2/a.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/web2/b/a.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/web1/aa/t.html")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("执行匹配后的文件")]),s._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[a("span",{pre:!0,attrs:{class:"token domain constant"}},[s._v("web1.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token domain constant"}},[s._v("a.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token domain constant"}},[s._v("t.html")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h5",{attrs:{id:"栗子3-web-html-keep-dir"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#栗子3-web-html-keep-dir"}},[s._v("#")]),s._v(" 栗子3： "),a("code",[s._v("/web*/**/*.html:KEEP_DIR:")])]),s._v(" "),a("p",[s._v("表示匹配执行构建后，对应目录下的：已 web 开头的目录下面的所有 html 文件，并且保留文件夹层级关系，最后发布时候按照原目录结构发布")]),s._v(" "),a("p",[s._v("假设：目录下有如下文件")]),s._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/vue/vue.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/web/web1.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/a/b/t.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/web2/a.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/web2/b/a.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/web1/aa/t.html")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("执行匹配后的文件")]),s._v(" "),a("div",{staticClass:"language-log line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-log"}},[a("code",[a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/web/web1.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/web2/a.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/web2/b/a.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token file-path string"}},[s._v("/web1/aa/t.html")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-13-2023-02-08"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-13-2023-02-08"}},[s._v("#")]),s._v(" 2.10.13 (2023-02-08)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-23"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-23"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 项目支持配置分组属性，方便项目列表筛选\n（感谢 @"),a("a",{attrs:{href:"https://gitee.com/hjk2008",target:"_blank",rel:"noopener noreferrer"}},[s._v("hjk2008"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I63PEN",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I63PEN"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】新增 节点分发支持配置分组属性，方便列表筛选")]),s._v(" "),a("li",[s._v("【agent】新增 DSL 项目支持配置自定义备份路径\n（感谢 @"),a("a",{attrs:{href:"https://gitee.com/chenxu8989",target:"_blank",rel:"noopener noreferrer"}},[s._v("陈旭"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I57ZKJ",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I57ZKJ"),a("OutboundLink")],1),s._v(" ）")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-35"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-35"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【all】修复 linux 无法正常安装 service （感谢@山上雪）")]),s._v(" "),a("li",[s._v("【server】优化 构建的节点分发模式增加二级目录\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/qiqi513_admin",target:"_blank",rel:"noopener noreferrer"}},[s._v("@爱琳琳真是太好了"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6DNMX",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6DNMX"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】优化 构建不保留产物时自动删除产物为目录时的压缩包文件")]),s._v(" "),a("li",[s._v("【server】优化 构建状态等待"),a("code",[s._v("节点分发")]),s._v("完成（阻塞执行节点分发）")]),s._v(" "),a("li",[s._v("【server】修复 构建选择"),a("code",[s._v("节点分发")]),s._v("并关闭"),a("code",[s._v("保留产物")]),s._v("，会导致分发失败。\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/qiqi513_admin",target:"_blank",rel:"noopener noreferrer"}},[s._v("@爱琳琳真是太好了"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6DII6",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6DII6"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】修复 构建分发为"),a("code",[s._v("节点分发")]),s._v("，产物为文件时导致的不能回滚\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/mrsmith",target:"_blank",rel:"noopener noreferrer"}},[s._v("@Smith"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6DNSM",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6DNSM"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】优化 定时构建支持配置禁用表达式，方便临时关闭定时执行\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/VampireAchao",target:"_blank",rel:"noopener noreferrer"}},[s._v("@阿超"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6DNBW",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6DNBW"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】修复 DSL 项目配置文件备份数量不生效问题")])]),s._v(" "),a("h3",{attrs:{id:"⚠️-注意-14"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-注意-14"}},[s._v("#")]),s._v(" ⚠️ 注意")]),s._v(" "),a("p",[s._v("Linux 环境 已经安装的需要手动更新一下服务管理脚本")]),s._v(" "),a("p",[a("strong",[s._v("服务端")]),s._v("：(需要到安装目录的 bin 下执行)")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-LfsSo")]),s._v(" Service.sh https://gitee.com/dromara/Jpom/raw/master/modules/server/src/main/bin/Service.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("插件端")]),s._v(" ：(需要到安装目录的 bin 下执行)")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-LfsSo")]),s._v(" Service.sh https://gitee.com/dromara/Jpom/raw/master/modules/agent/src/main/bin/Service.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-12-2023-01-29"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-12-2023-01-29"}},[s._v("#")]),s._v(" 2.10.12 (2023-01-29)")]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-36"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-36"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】优化 在线终端断开连接时提醒并支持重连")]),s._v(" "),a("li",[s._v("【server】修复 线程同步器，避免任务过多造成线程数不可控（节点分发相关功能）")]),s._v(" "),a("li",[s._v("【server】优化 前端打包取消 .map 文件，缩少发布包大小\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/jinjiG",target:"_blank",rel:"noopener noreferrer"}},[s._v("@金技"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6AK0N",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6AK0N"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【all】优化 分片上传文件名采用分片序号（伪装文件后缀）（感谢@冷月）")]),s._v(" "),a("li",[s._v("【all】优化 分片上传文件签名由 sha1 改为 md5 提升效率")]),s._v(" "),a("li",[s._v("【server】优化 构建历史页面鼠标移到名称下拉项显示文字\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/bwy-flc",target:"_blank",rel:"noopener noreferrer"}},[s._v("@伤感的风铃草"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/pulls/167",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee pr 167"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【all】修复 日志监听器 catch 异常日志造成会话未自动删除问题\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/jinjiG",target:"_blank",rel:"noopener noreferrer"}},[s._v("@金技"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I6A5QW",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I6A5QW"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】修复 仓库地址 https 证书验证问题（自动忽略验证）\n（感谢 "),a("a",{attrs:{href:"https://github.com/arstercz",target:"_blank",rel:"noopener noreferrer"}},[s._v("@arstercz"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://github.com/dromara/Jpom/issues/32",target:"_blank",rel:"noopener noreferrer"}},[s._v("Github issues 32"),a("OutboundLink")],1),s._v(" ）")])]),s._v(" "),a("h3",{attrs:{id:"⚠️-注意-15"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-注意-15"}},[s._v("#")]),s._v(" ⚠️ 注意")]),s._v(" "),a("ol",[a("li",[s._v("插件端需要同步升级，否则不能正常使用节点上传文件相关功能")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-11-2023-01-10"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-11-2023-01-10"}},[s._v("#")]),s._v(" 2.10.11 (2023-01-10)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-24"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-24"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 系统缓存新增分片操作数查看")]),s._v(" "),a("li",[s._v("【server】新增 节点分片上传支持配置并发数："),a("code",[s._v("jpom.node.upload-file-concurrent")])])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-37"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-37"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】优化 迁移数据添加更多日志输出")]),s._v(" "),a("li",[s._v("【server】优化 分片上传解析文件数据采用分片形式，避免大文件造成浏览器奔溃")]),s._v(" "),a("li",[s._v("【server】优化 插件端在线升级管理页面错误信息提示由弹窗改到对应节点")]),s._v(" "),a("li",[s._v("【server】修复 迁移数据出现监控报警记录表字段不全问题 （感谢@loyal）")]),s._v(" "),a("li",[s._v("【server】修复 迁移系统参数表中的 sync_trigger_token 数据重复问题（感谢@loyal）")]),s._v(" "),a("li",[s._v("【server】优化 取消迁移数据忽略处理（避免默认工作空间名称不迁移）（感谢@loyal）")]),s._v(" "),a("li",[s._v("【server】优化 获取项目运行状态失败弹窗提醒改为单条数据异常提醒")]),s._v(" "),a("li",[s._v("【server】优化 服务端项目管理项目列表获取运行状态改为并发执行,缩短加载时间")]),s._v(" "),a("li",[s._v("【server】优化 分片上传文件中文件选择器禁用")])]),s._v(" "),a("h3",{attrs:{id:"❌-不兼容功能-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#❌-不兼容功能-7"}},[s._v("#")]),s._v(" ❌ 不兼容功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】取消 监控记录实体中的 logId 字段 （感谢@loyal）")]),s._v(" "),a("li",[s._v("【all】取消 启动时候判断重复启动")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-10-2023-01-09"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-10-2023-01-09"}},[s._v("#")]),s._v(" 2.10.10 (2023-01-09)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-25"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-25"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【all】新增 在线升级是否允许降级操作配置属性"),a("code",[s._v("jpom.system.allowed-downgrade")])]),s._v(" "),a("li",[s._v("【server】新增 分发整体状态新增"),a("code",[s._v("分发失败")])]),s._v(" "),a("li",[s._v("【server】新增 构建日志显示进度折叠率配置："),a("code",[s._v("jpom.build.log-reduce-progress-ratio")])])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-38"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-38"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 mysql 环境非"),a("code",[s._v("allowMultiQueries")]),s._v("初始化表结构失败（感谢@丿幼儿园逃犯）")]),s._v(" "),a("li",[s._v("【server】修复 部分表字段缺失问题（strike）")]),s._v(" "),a("li",[s._v("【server】优化 迁移数据到 mysql 字段大小写跟随实体（感谢@丿幼儿园逃犯）")]),s._v(" "),a("li",[s._v("【server】修复 导入数据库备份文件目录不存在时报错（感谢@丿幼儿园逃犯）")]),s._v(" "),a("li",[s._v("【all】优化 节点上传项目文件采用分片上传、并且支持进度显示")]),s._v(" "),a("li",[s._v("【all】优化 在线升级上传项目包采用分片上传、并且支持进度显示")]),s._v(" "),a("li",[s._v("【all】优化 在线升级，默认禁止降级操作")]),s._v(" "),a("li",[s._v("【server】优化 节点分发上传文件采用分片上传、并且支持进度显示")]),s._v(" "),a("li",[s._v("【server】优化 分发单项的状态信息存储于日志记录中（取消 json 字段存储）")]),s._v(" "),a("li",[s._v("【server】优化 节点分发子项展示逻辑（同步改异步加载,避免长时间加载）")]),s._v(" "),a("li",[s._v("【server】优化 构建日志输出各个流程耗时")]),s._v(" "),a("li",[s._v("【server】优化 构建发布项目文件采用分片上传、并且支持进度显示")]),s._v(" "),a("li",[s._v("【agent】优化 配置文件中上传文件大小限制由 1G 改为 10MB 节省插件端占用内存大小（采用分片代替）")]),s._v(" "),a("li",[s._v("【server】优化 手动上传的节点分发文件将自动删除，节省存储空间")]),s._v(" "),a("li",[s._v("【server】优化 节点分发日志支持显示进度信息")])]),s._v(" "),a("h3",{attrs:{id:"⚠️-注意-16"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-注意-16"}},[s._v("#")]),s._v(" ⚠️ 注意")]),s._v(" "),a("ol",[a("li",[s._v("插件端需要同步升级，否则节点分发项目无法显示项目名称")]),s._v(" "),a("li",[s._v("插件端需要同步升级，否则会出现部分接口 404 或者参数不正确的情况")]),s._v(" "),a("li",[s._v("建议升级验证上传项目文件无问题后，将插件端上传文件大小限制配置属性大改小")]),s._v(" "),a("li",[s._v("spring.servlet.multipart.max-file-size=5MB")]),s._v(" "),a("li",[s._v("spring.servlet.multipart.max-request-size=20MB")])]),s._v(" "),a("p",[a("strong",[s._v("如果需要使用 mysql 存储，则需要修改配置")])]),s._v(" "),a("ol",[a("li",[s._v("修改 "),a("code",[s._v("jpom.db.mode")]),s._v(" 为 "),a("code",[s._v("MYSQL")])]),s._v(" "),a("li",[s._v("修改 "),a("code",[s._v("jpom.db.url")]),s._v(" 为您 mysql 的 jdbc 地址( jdbc:mysql://127.0.0.1:\n3306/jpom?useUnicode=true&characterEncoding=UTF-8&useSSL=false)")]),s._v(" "),a("li",[s._v("修改 "),a("code",[s._v("jpom.db.user-name")]),s._v(" 为对应 mysql 账户")]),s._v(" "),a("li",[s._v("修改 "),a("code",[s._v("jpom.db.user-pwd")]),s._v(" 为对应 mysql 密码")])]),s._v(" "),a("p",[s._v("如果您需要迁移之前 h2 数据库中的数据到 mysql（需要先将 mysql 的连接信息配置好后才能迁移）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" ./bin/Server.sh restart "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-15")]),s._v(" --h2-migrate-mysql --h2-user"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("jpom --h2-pass"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("jpom\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-9-2023-01-06"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-9-2023-01-06"}},[s._v("#")]),s._v(" 2.10.9 (2023-01-06)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-26"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-26"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 服务端数据存储支持 mysql")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-39"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-39"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 在线编辑配置文件保存并修改数据库密码问题")]),s._v(" "),a("li",[s._v("【server】"),a("s",[s._v("三次修复")]),s._v(" 在线终端输入部分字符后自动断开连接问题")]),s._v(" "),a("li",[s._v("【server】升级 svnkit 依赖版本")]),s._v(" "),a("li",[s._v("【server】优化 docker 标签查询精准查询")]),s._v(" "),a("li",[s._v("【server】更名 阅读文件更名为跟踪文件")])]),s._v(" "),a("h3",{attrs:{id:"❌-不兼容功能-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#❌-不兼容功能-8"}},[s._v("#")]),s._v(" ❌ 不兼容功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】删除 数据库中多个数据表中弃用字段")])]),s._v(" "),a("h3",{attrs:{id:"⚠️-注意-17"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-注意-17"}},[s._v("#")]),s._v(" ⚠️ 注意")]),s._v(" "),a("p",[s._v("如果需要使用 mysql 存储，则需要修改配置：")]),s._v(" "),a("ol",[a("li",[s._v("修改 "),a("code",[s._v("jpom.db.mode")]),s._v(" 为 "),a("code",[s._v("MYSQL")])]),s._v(" "),a("li",[s._v("修改 "),a("code",[s._v("jpom.db.url")]),s._v(" 为您 mysql 的 jdbc 地址( jdbc:mysql://127.0.0.1:\n3306/jpom?useUnicode=true&characterEncoding=UTF-8&useSSL=false)")]),s._v(" "),a("li",[s._v("修改 "),a("code",[s._v("jpom.db.user-name")]),s._v(" 为对应 mysql 账户")]),s._v(" "),a("li",[s._v("修改 "),a("code",[s._v("jpom.db.user-pwd")]),s._v(" 为对应 mysql 密码")])]),s._v(" "),a("p",[s._v("如果您需要迁移之前 h2 数据库中的数据到 mysql（需要先将 mysql 的连接信息配置好后才能迁移）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" ./bin/Server.sh restart "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-15")]),s._v(" --h2-migrate-mysql --h2-user"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("jpom --h2-pass"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("jpom\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-8-2023-01-05"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-8-2023-01-05"}},[s._v("#")]),s._v(" 2.10.8 (2023-01-05)")]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-40"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-40"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【all】优化 程序运行的 tmp 文件夹（"),a("code",[s._v("java.io.tmpdir")]),s._v("）跟随项目目录")]),s._v(" "),a("li",[s._v("【all】优化 判断目录越级 "),a("code",[s._v("checkSlip")]),s._v(" 目录转义至 tmpdir，避免在用户目录生成空白文件夹")])]),s._v(" "),a("h3",{attrs:{id:"❌-不兼容功能-9"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#❌-不兼容功能-9"}},[s._v("#")]),s._v(" ❌ 不兼容功能")]),s._v(" "),a("ol",[a("li",[s._v("【all】取消 程序启动写入全局临时信息")]),s._v(" "),a("li",[s._v("【server】取消 服务端没有节点自动探测本地节点功能")])]),s._v(" "),a("h3",{attrs:{id:"⚠️-注意-18"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-注意-18"}},[s._v("#")]),s._v(" ⚠️ 注意")]),s._v(" "),a("p",[s._v("Linux、Windows 环境 已经安装 2.10.0 ~ 2.10.7 的需要手动更新一下管理脚本")]),s._v(" "),a("blockquote",[a("p",[s._v("建议先更新脚本再升级插件端或者服务端")]),s._v(" "),a("p",[s._v("Windows 用户需要自行下载脚本替换")])]),s._v(" "),a("p",[a("strong",[s._v("服务端")]),s._v("：(需要到安装目录的 bin 下执行)")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-LfsSo")]),s._v(" Server.sh https://gitee.com/dromara/Jpom/raw/master/modules/server/src/main/bin/Server.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("插件端")]),s._v(" ：(需要到安装目录的 bin 下执行)")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-LfsSo")]),s._v(" Agent.sh https://gitee.com/dromara/Jpom/raw/master/modules/agent/src/main/bin/Agent.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-7-2023-01-04"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-7-2023-01-04"}},[s._v("#")]),s._v(" 2.10.7 (2023-01-04)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-27"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-27"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 配置管理新增配置目录在线编辑功能")]),s._v(" "),a("li",[s._v("【server】新增 容器构建新增 "),a("code",[s._v("ubuntu-git")]),s._v(" 镜像")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-41"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-41"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 在线终端输入部分字符后自动端口连接问题（感谢 @Again.... ）")]),s._v(" "),a("li",[s._v("【server】修复 执行 SSH 脚本未正常加载环境变量问题")]),s._v(" "),a("li",[s._v("【server】修复 快速安装(绑定)插件端的命令特殊字符转义问题 （感谢@张飞鸿）")]),s._v(" "),a("li",[s._v("【server】优化 节点在线升级确认操作提醒要升级的目标版本号（感谢@木迷榖）")]),s._v(" "),a("li",[s._v("【server】优化 modal 弹窗新增 destroyOnClose , 优化页面卡顿和组件样式冲突")]),s._v(" "),a("li",[s._v("【server】修复 windows nginx 配置文件编辑白名单路径非绝对路径时出现名称错误")])]),s._v(" "),a("h3",{attrs:{id:"❌-不兼容功能-10"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#❌-不兼容功能-10"}},[s._v("#")]),s._v(" ❌ 不兼容功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】下架 构建配置管理功能（请使用配置目录管理功能代替）")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-6-2022-12-29"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-6-2022-12-29"}},[s._v("#")]),s._v(" 2.10.6 (2022-12-29)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-28"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-28"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【agent】新增 上传项目文件，下载远程文件 压缩包支持自动剔除文件夹")]),s._v(" "),a("li",[s._v("【server】新增 节点分发新增手动取消分发任务功能\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/yinxianer",target:"_blank",rel:"noopener noreferrer"}},[s._v("@gxw"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I61SBB",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I61SBB"),a("OutboundLink")],1),s._v(" ）")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-42"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-42"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】优化 SSH 终端 JSCH 新增日志实现，方便排查问题")]),s._v(" "),a("li",[s._v("【agent】优化 部分下载接口取消返回值，避免控制台出现错误日志")]),s._v(" "),a("li",[s._v("【server】优化 服务端代理插件端的 websocket 超时问题")]),s._v(" "),a("li",[s._v("【server】修复 在线终端输入部分字符后自动端口连接问题（感谢 @Again.... ）")]),s._v(" "),a("li",[s._v("【server】修复 部分下拉框无法正常搜索文件（感谢 @Again.... ）")]),s._v(" "),a("li",[s._v("【agent】优化 同时上传相同的文件名时可能异常")]),s._v(" "),a("li",[s._v("【server】优化 节点分发状态新增（等待分发、手动取消状态）")]),s._v(" "),a("li",[s._v("【server】修复 状态为未分发时分发失败引起的状态错误")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-5-2022-12-27"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-5-2022-12-27"}},[s._v("#")]),s._v(" 2.10.5 (2022-12-27)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-29"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-29"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 操作日志新增数据名称字段")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-43"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-43"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【agent】修复 项目文件夹不存在时不能下载远程文件")]),s._v(" "),a("li",[s._v("【all】升级 fastjson 升级为 fastjson2")]),s._v(" "),a("li",[s._v("【all】升级 SpringBoot 2.7.7 、commons-compress")]),s._v(" "),a("li",[s._v("【server】移除 空闲依赖 jaxb-api")]),s._v(" "),a("li",[s._v("【all】优化 启动加载流程，保存顺序加载")]),s._v(" "),a("li",[s._v("【all】修复 启动成功写入全局信息由于没有权限造成的异常\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/leonchen21",target:"_blank",rel:"noopener noreferrer"}},[s._v("@LeonChen21"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I67C3C",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I67C3C"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】优化 websocket 控制台操作日志记录")]),s._v(" "),a("li",[s._v("【server】修复 超级管理的 websocket 操作日志记录工作空间不正确")]),s._v(" "),a("li",[s._v("【agent】优化 插件端删除 spring-boot-starter-websocket 依赖")]),s._v(" "),a("li",[s._v("【server】优化 服务端删除 Java-WebSocket 依赖（采用统一模块管理）")]),s._v(" "),a("li",[s._v("【server】修复 更新构建状态互斥，避免状态被异步更新冲突")]),s._v(" "),a("li",[s._v("【server】优化 下载文件采用标签页面形式取消 blob")])]),s._v(" "),a("h3",{attrs:{id:"❌-不兼容功能-11"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#❌-不兼容功能-11"}},[s._v("#")]),s._v(" ❌ 不兼容功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】取消 兼容低版本插件端的 websocket 授权信息传输方式（低版本插件端请同步升级到最新）")]),s._v(" "),a("li",[s._v("【server】取消 服务端取消向插件端传递操作人的用户名")]),s._v(" "),a("li",[s._v("【server】取消 服务端数据库用户操作日志表对 REQID 字段兼容（2.9.1 以下）")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-4-2022-12-23"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-4-2022-12-23"}},[s._v("#")]),s._v(" 2.10.4 (2022-12-23)")]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-44"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-44"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【all】修复 linux 管理脚本中的 pid 文件内容与真实进程不一致问题")]),s._v(" "),a("li",[s._v("【all】恢复 linux 管理脚本支持创建服务管理")])]),s._v(" "),a("h3",{attrs:{id:"⚠️-注意-19"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-注意-19"}},[s._v("#")]),s._v(" ⚠️ 注意")]),s._v(" "),a("p",[s._v("Linux 环境 已经安装 2.10.3 ~ 2.10.0 的需要手动更新一下管理脚本")]),s._v(" "),a("blockquote",[a("p",[s._v("需要"),a("code",[s._v("创建服务来管理")]),s._v("的需要更新后才能正常使用在线升级和保存配置并重启")])]),s._v(" "),a("blockquote",[a("p",[s._v("建议先更新脚本再升级插件端或者服务端")])]),s._v(" "),a("p",[a("strong",[s._v("服务端")]),s._v("：(需要到安装目录的 bin 下执行)")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-LfsSo")]),s._v(" Server.sh https://gitee.com/dromara/Jpom/raw/master/modules/server/src/main/bin/Server.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-LfsSo")]),s._v(" Service.sh https://gitee.com/dromara/Jpom/raw/master/modules/server/src/main/bin/Service.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("插件端")]),s._v(" ：(需要到安装目录的 bin 下执行)")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-LfsSo")]),s._v(" Agent.sh https://gitee.com/dromara/Jpom/raw/master/modules/agent/src/main/bin/Agent.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-LfsSo")]),s._v(" Service.sh https://gitee.com/dromara/Jpom/raw/master/modules/agent/src/main/bin/Service.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-3-2022-12-22"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-3-2022-12-22"}},[s._v("#")]),s._v(" 2.10.3 (2022-12-22)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-30"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-30"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 在线构建新增 "),a("code",[s._v("packageFile")]),s._v(" 流程 编译 webhook 或者事件脚本调用")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-45"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-45"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】修复 快速导入节点工作空间id "),a("code",[s._v("undefined")])]),s._v(" "),a("li",[s._v("【server】修复 本地运行脚本默认找不到的情况")]),s._v(" "),a("li",[s._v("【agent】优化 项目控制台日志文件默认编码格式判断系统 windows 默认 GBK,其他默认 UTF-8\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/gf_666",target:"_blank",rel:"noopener noreferrer"}},[s._v("@gf_666"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I66ZZZ",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I66ZZZ"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】优化 在线构建 ssh 清空产物异常不标记发布异常")])]),s._v(" "),a("h3",{attrs:{id:"⚠️-注意-20"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-注意-20"}},[s._v("#")]),s._v(" ⚠️ 注意")]),s._v(" "),a("p",[s._v("Linux 环境 已经安装 2.10.2 ~ 2.10.0 的需要手动更新一下管理脚本，之前管理脚本存在部分场景日志输出错乱的问题")]),s._v(" "),a("blockquote",[a("p",[s._v("建议先更新脚本再升级插件端或者服务端")])]),s._v(" "),a("p",[a("strong",[s._v("服务端")]),s._v("：(需要到安装目录的 bin 下执行)")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-LfsSo")]),s._v(" Server.sh https://gitee.com/dromara/Jpom/raw/master/modules/server/src/main/bin/Server.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("插件端")]),s._v(" ：(需要到安装目录的 bin 下执行)")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-LfsSo")]),s._v(" Agent.sh https://gitee.com/dromara/Jpom/raw/master/modules/agent/src/main/bin/Agent.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-2-2022-12-21"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-2-2022-12-21"}},[s._v("#")]),s._v(" 2.10.2 (2022-12-21)")]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-46"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-46"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】节点快速安装命令示例提供默认安装命令")]),s._v(" "),a("li",[s._v("【server】修复 docker 插件未正常加载问题（感谢@顺子）")]),s._v(" "),a("li",[s._v("【server】优化 本地构建命令执行方式由逐行改为脚本执行")]),s._v(" "),a("li",[s._v("【server】修复 构建未配置 webhook 控制台报错")]),s._v(" "),a("li",[s._v("【server】修复 构建未配置 webhook 不触发事件脚本")])]),s._v(" "),a("h3",{attrs:{id:"❌-不兼容功能-12"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#❌-不兼容功能-12"}},[s._v("#")]),s._v(" ❌ 不兼容功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】下架 SSH 上传文件安装插件端方式，采用快速安装命令代替")]),s._v(" "),a("li",[s._v("【server】取消 构建命令和本地命令发布 不支持 #{} 变量替换")]),s._v(" "),a("li",[s._v("【server】取消 SSH 命令模板 不支持 #{} 变量替换（仅支持 ${} 替换）")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-1-2022-12-20"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-1-2022-12-20"}},[s._v("#")]),s._v(" 2.10.1 (2022-12-20)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-31"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-31"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】新增 节点项目支持快速复制操作\n（感谢"),a("a",{attrs:{href:"https://gitee.com/mt-mored",target:"_blank",rel:"noopener noreferrer"}},[s._v("@mt-mored"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I653O3",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I653O3"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【all】新增 节点项目、独立节点分发支持彻底删除")]),s._v(" "),a("li",[s._v("【agent】新增 DSL 项目模式执行脚本支持节点环境变量\n（感谢"),a("a",{attrs:{href:"https://gitee.com/sushengbuyu",target:"_blank",rel:"noopener noreferrer"}},[s._v("@苏生不语"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I66MNP",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I66MNP"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【all】新增 构建项目发布、节点分发支持配置发布前先停止（避免 windows 环境文件被占用）\n（感谢 "),a("a",{attrs:{href:"https://gitee.com/yiziyu",target:"_blank",rel:"noopener noreferrer"}},[s._v("@yiziyu"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I65MS1",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I65MS1"),a("OutboundLink")],1),s._v("、"),a("a",{attrs:{href:"https://gitee.com/all-around-badass",target:"_blank",rel:"noopener noreferrer"}},[s._v("@all-around-badass"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I66PYU",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I66PYU"),a("OutboundLink")],1),s._v(" ）")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-47"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-47"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】优化 节点分发菜单更名为项目管理")]),s._v(" "),a("li",[s._v("【server】优化 节点分发添加项目限制数量由 2 调整为 1\n（感谢"),a("a",{attrs:{href:"https://gitee.com/sushengbuyu",target:"_blank",rel:"noopener noreferrer"}},[s._v("@苏生不语"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I66R73",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I66R73"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】修复 节点分发手动上传文件二级目录出现 "),a("code",[s._v("undefined")])]),s._v(" "),a("li",[s._v("【agent】修复 默认项目模式执行命令存在 "),a("code",[s._v("null")]),s._v(" 字符串")]),s._v(" "),a("li",[s._v("【server】修复 初次安装服务端初始化数据库失败问题 （感谢@lg）")]),s._v(" "),a("li",[s._v("【server】优化 日志显示组件（取消正则搜索），日志删除 "),a("code",[s._v("ansi")]),s._v(" 颜色\n（感谢"),a("a",{attrs:{href:"https://gitee.com/sushengbuyu",target:"_blank",rel:"noopener noreferrer"}},[s._v("@苏生不语"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I657JR",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I657JR"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】优化 编辑组件可能出现行错和内容错乱问题")]),s._v(" "),a("li",[s._v("【server】优化 查看系统日志的多次切换内容返回错乱问题")])]),s._v(" "),a("h3",{attrs:{id:"❌-不兼容功能-13"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#❌-不兼容功能-13"}},[s._v("#")]),s._v(" ❌ 不兼容功能")]),s._v(" "),a("ol",[a("li",[s._v("【agent】取消 DSL 项目脚本的 #{} 替换变量")])]),s._v(" "),a("h3",{attrs:{id:"⚠️-注意-21"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-注意-21"}},[s._v("#")]),s._v(" ⚠️ 注意")]),s._v(" "),a("p",[s._v("Linux 环境 已经安装 2.10.0 的需要手动更新一下管理脚本，2.10.0 管理脚本存在在线升级和在线重启日志输出重复问题")]),s._v(" "),a("blockquote",[a("p",[s._v("建议先更新脚本再升级插件端或者服务端")])]),s._v(" "),a("p",[a("strong",[s._v("服务端")]),s._v("：(需要到安装目录的 bin 下执行)")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-LfsSo")]),s._v(" Server.sh https://gitee.com/dromara/Jpom/raw/master/modules/server/src/main/bin/Server.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("插件端")]),s._v(" ：(需要到安装目录的 bin 下执行)")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-LfsSo")]),s._v(" Agent.sh https://gitee.com/dromara/Jpom/raw/master/modules/agent/src/main/bin/Agent.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"_2-10-0-2022-12-19"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-10-0-2022-12-19"}},[s._v("#")]),s._v(" 2.10.0 (2022-12-19)")]),s._v(" "),a("h3",{attrs:{id:"🐣-新增功能-32"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐣-新增功能-32"}},[s._v("#")]),s._v(" 🐣 新增功能")]),s._v(" "),a("ol",[a("li",[s._v("【all】外置 "),a("code",[s._v("logback")]),s._v(" 配置文件")]),s._v(" "),a("li",[s._v("【server】服务端管理相关功能独立页面菜单")]),s._v(" "),a("li",[s._v("【server】新增项目触发器用于管理项目状态")]),s._v(" "),a("li",[s._v("【all】新增 构建项目发布支持配置发布到二级目录")]),s._v(" "),a("li",[s._v("【server】新增 节点分发发布支持配置发布到二级目录")])]),s._v(" "),a("h3",{attrs:{id:"🐞-解决bug、优化功能-48"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🐞-解决bug、优化功能-48"}},[s._v("#")]),s._v(" 🐞 解决BUG、优化功能")]),s._v(" "),a("ol",[a("li",[s._v("【all】启动相关信息由控制台输出改为 "),a("code",[s._v("logback")])]),s._v(" "),a("li",[s._v("【all】节点管理中 "),a("code",[s._v("其他功能")]),s._v(" 菜单更名为 "),a("code",[s._v("脚本管理")])]),s._v(" "),a("li",[s._v("【all】优化版本升级修改管理脚本里变量,采用文件记录方式")]),s._v(" "),a("li",[s._v("【server】优化容器启动脚本，支持监听进程已经终端重启操作")]),s._v(" "),a("li",[s._v("【server】修复 自动刷新页面已经关闭的标签页，后台仍然在发送请求\n（感谢"),a("a",{attrs:{href:"https://gitee.com/sushengbuyu",target:"_blank",rel:"noopener noreferrer"}},[s._v("@苏生不语"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"https://gitee.com/dromara/Jpom/issues/I664OP",target:"_blank",rel:"noopener noreferrer"}},[s._v("Gitee issues I664OP"),a("OutboundLink")],1),s._v(" ）")]),s._v(" "),a("li",[s._v("【server】修正触发器说明错别字")])]),s._v(" "),a("h3",{attrs:{id:"❌-不兼容功能-14"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#❌-不兼容功能-14"}},[s._v("#")]),s._v(" ❌ 不兼容功能")]),s._v(" "),a("ol",[a("li",[s._v("【server】取消支持 2.8.0 以下 json 文件转存数据库")]),s._v(" "),a("li",[s._v("【all】下架 JDK 管理模块（请使用 DSL 项目模式代替）")]),s._v(" "),a("li",[s._v("【all】下架 TOMCAT 管理模块（请使用 DSL 项目模式代替）")]),s._v(" "),a("li",[s._v("【all】删除 项目内存监控页面")]),s._v(" "),a("li",[s._v("【all】配置文件名称由 "),a("code",[s._v("extConfig.yml")]),s._v(" 变更为 "),a("code",[s._v("application.yml")])]),s._v(" "),a("li",[s._v("【all】调整项目打包目录结构")]),s._v(" "),a("li",[s._v("【all】取消兼容低版本数据目录文件迁移（调试运行）")]),s._v(" "),a("li",[s._v("【all】取消自动识别文件编码格式模块 "),a("code",[s._v("auto-charset-jchardet")])]),s._v(" "),a("li",[s._v("【all】更新管理脚本，进程标识更新（已经存在的需要手动停止）")]),s._v(" "),a("li",[s._v("【all】取消插件端配置化向服务端注册功能（采用快速导入方式替代）")]),s._v(" "),a("li",[s._v("【server】取消服务端授权 token 配置")]),s._v(" "),a("li",[s._v("【all】下架 节点脚本导入功能")]),s._v(" "),a("li",[s._v("【server】取消限制创建用户最大数配置："),a("code",[s._v("user.maxCount")])]),s._v(" "),a("li",[s._v("【server】删除 node_info 表 cycle 字段")]),s._v(" "),a("li",[s._v("【agent】删除项目回收记录功能")])]),s._v(" "),a("h3",{attrs:{id:"❌-不兼容的属性配置变更"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#❌-不兼容的属性配置变更"}},[s._v("#")]),s._v(" ❌ 不兼容的属性配置变更")]),s._v(" "),a("blockquote",[a("p",[s._v("属性配置支持驼峰和下划线")])]),s._v(" "),a("ol",[a("li",[s._v("【agent】"),a("code",[s._v("whitelistDirectory.checkStartsWith")]),s._v(" -> "),a("code",[s._v("jpom.whitelist-directory.check-starts-with")])]),s._v(" "),a("li",[s._v("【agent】"),a("code",[s._v("project.stopWaitTime")]),s._v(" -> "),a("code",[s._v("jpom.project.statusWaitTime")])]),s._v(" "),a("li",[s._v("【agent】"),a("code",[s._v("project.*")]),s._v(" -> "),a("code",[s._v("jpom.project.*")])]),s._v(" "),a("li",[s._v("【agent】修正拼写错误 "),a("code",[s._v("log.*back*")]),s._v(" -> "),a("code",[s._v("jpom.project.log.*backup*")])]),s._v(" "),a("li",[s._v("【agent】"),a("code",[s._v("log.*")]),s._v(" -> "),a("code",[s._v("jpom.project.log.*")])]),s._v(" "),a("li",[s._v("【agent】"),a("code",[s._v("log.intiReadLine")]),s._v(" -> "),a("code",[s._v("jpom.init-read-line")])]),s._v(" "),a("li",[s._v("【agent】 "),a("code",[s._v("log.autoBackConsoleCron")]),s._v(" 不支持配置 none (none 使用 "),a("code",[s._v("jpom.project.log.autoBackupToFile")]),s._v(" 代替)")]),s._v(" "),a("li",[s._v("【all】删除 "),a("code",[s._v("consoleLog.reqXss")]),s._v(" 、"),a("code",[s._v("consoleLog.reqResponse")])]),s._v(" "),a("li",[s._v("【all】"),a("code",[s._v("consoleLog.charset")]),s._v(" -> "),a("code",[s._v("jpom.system.console-charset")])]),s._v(" "),a("li",[s._v("【server】"),a("code",[s._v("node.uploadFileTimeOut")]),s._v(" -> "),a("code",[s._v("jpom.node.uploadFileTimeout")])]),s._v(" "),a("li",[s._v("【server】"),a("code",[s._v("system.nodeHeartSecond")]),s._v(" -> "),a("code",[s._v("jpom.node.heartSecond")])]),s._v(" "),a("li",[s._v("【server】"),a("code",[s._v("user.*")]),s._v(" -> "),a("code",[s._v("jpom.user.*")])]),s._v(" "),a("li",[s._v("【server】"),a("code",[s._v("jpom.authorize.expired")]),s._v(" -> "),a("code",[s._v("jpom.user.tokenExpired")])]),s._v(" "),a("li",[s._v("【server】"),a("code",[s._v("jpom.authorize.renewal")]),s._v(" -> "),a("code",[s._v("jpom.user.tokenRenewal")])]),s._v(" "),a("li",[s._v("【server】"),a("code",[s._v("jpom.authorize.key")]),s._v(" -> "),a("code",[s._v("jpom.user.tokenJwtKey")])]),s._v(" "),a("li",[s._v("【server】"),a("code",[s._v("jpom.webApiTimeout")]),s._v(" -> "),a("code",[s._v("jpom.web.api-timeout")])]),s._v(" "),a("li",[s._v("【server】删除 "),a("code",[s._v("ssh.initEnv")])]),s._v(" "),a("li",[s._v("【server】批量修正前端相关配置属性均修改到 "),a("code",[s._v("jpom.web.*")])]),s._v(" "),a("li",[s._v("【server】"),a("code",[s._v("db.*")]),s._v(" -> "),a("code",[s._v("jpom.db.*")])]),s._v(" "),a("li",[s._v("【server】"),a("code",[s._v("build.*")]),s._v(" -> "),a("code",[s._v("jpom.build.*")])])]),s._v(" "),a("h3",{attrs:{id:"⚠️-注意-22"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-注意-22"}},[s._v("#")]),s._v(" ⚠️ 注意")]),s._v(" "),a("blockquote",[a("p",[s._v("此版本为不兼容升级，需要手动升级修改相关配置才能正常使用")])]),s._v(" "),a("h4",{attrs:{id:"简洁的升级流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简洁的升级流程"}},[s._v("#")]),s._v(" 简洁的升级流程")]),s._v(" "),a("ol",[a("li",[s._v("停止正在运行的程序插件端或者服务端")]),s._v(" "),a("li",[s._v("备份已经存在的插件端或者服务端的数据目录")]),s._v(" "),a("li",[s._v("手动安装新版本 "),a("code",[s._v("2.10.0+")])]),s._v(" "),a("li",[s._v("还原数据：将备份的数据目录迁移到新安装的数据目录（需要再未运行的状态下操作）")]),s._v(" "),a("li",[s._v("重启程序")])]),s._v(" "),a("p",[s._v("详细的升级文档："),a("a",{attrs:{href:"https://jpom.top/pages/upgrade/2.9.x-to-2.10.x/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://jpom.top/pages/upgrade/2.9.x-to-2.10.x/"),a("OutboundLink")],1)]),s._v(" "),a("hr")])}),[],!1,null,null,null);a.default=r.exports}}]);